!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("G6",[],e):"object"==typeof exports?exports.G6=e():t.G6=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var i={},r=n(30);i.Color=n(102),i.Layout=n(18),i.Math=n(6),i.Matrix=n(2),i.Tween=n(31),i.Canvas=n(11),i.Graph=n(9),i.Net=n(146),i.Tree=n(80),i.Mind=n(142),i.Global=i.Graph.Global,i.Handler=i.Graph.Handler,i.Shape=i.Graph.Shape,i.Util=i.Graph.Util,i.registNode=i.Graph.registNode,i.registEdge=i.Graph.registEdge,i.registBehaviour=i.Handler.registBehaviour,r.tracking=!0,i.track=function(t){r.tracking=t},n(150),t.exports=i},function(t,e,n){var i=n(105);t.exports=i},function(t,e,n){var i={Matrix3:n(81),Vector2:n(82),Vector3:n(83)};t.exports=i},function(t,e,n){"use strict";function i(t){for(var e=t.superclass.constructor;e.Mode;)t.Mode=r.mix({},e.Mode,t.Mode),e=e.superclass.constructor}var r=n(1),a={resetMode:function(t,e){var n;e._off();for(var i=0;i<t.length;i++)n=a[t[i]],n&&n(e)},registMode:function(t){i(t),r.each(t.Mode,function(t){r.each(t,function(t){try{n(151)("./"+t)}catch(e){throw new Error("there is no such "+t+" behaviour! \u6ca1\u6709"+t+"\u884c\u4e3a\uff01")}})})},registBehaviour:function(t,e){a[t]=e}};t.exports=a},function(t,e,n){var i=n(1),r=n(40),a=n(5),o=n(2).Vector3,s=function(t){s.superclass.constructor.call(this,t)};s.ATTRS={},i.extend(s,r),i.augment(s,{isShape:!0,createPath:function(){},drawInner:function(t){var e=this,n=e.__attrs;e.createPath(t);var r=t.globalAlpha;if(e.hasFill()){var a=n.fillOpacity;i.isNull(a)||1===a?t.fill():(t.globalAlpha=a,t.fill(),t.globalAlpha=r)}if(e.hasStroke()){var o=e.__attrs.lineWidth;if(o>0){var s=n.strokeOpacity;i.isNull(s)||1===s||(t.globalAlpha=s),t.stroke()}}},isPointInPath:function(){return!1},isHitBox:function(){return!0},isHit:function(t,e){var n=this,i=new o(t,e,1);if(n.invert(i),n.isHitBox()){var r=n.getBBox();if(r&&!a.box(r.minX,r.maxX,r.minY,r.maxY,i.x,i.y))return!1}var s=n.__attrs.clip;return s?!!s.inside(t,e)&&n.isPointInPath(i.x,i.y):n.isPointInPath(i.x,i.y)},calculateBox:function(){return null},clearTotalMatrix:function(){this.__cfg.totalMatrix=null,this.__cfg.region=null},clearBBox:function(){this.__cfg.box=null,this.__cfg.region=null},getBBox:function(){var t=this.__cfg.box;return t||(t=this.calculateBox(),t&&(t.x=t.minX,t.y=t.minY,t.width=t.maxX-t.minX,t.height=t.maxY-t.minY),this.__cfg.box=t),t}}),t.exports=s},function(t,e,n){var i=n(21),r=n(22),a=n(14),o=n(20);t.exports={line:function(t,e,n,r,a,o,s){var u=i.box(t,e,n,r,a);if(!this.box(u.minX,u.maxX,u.minY,u.maxY,o,s))return!1;var c=i.pointDistance(t,e,n,r,o,s);return!isNaN(c)&&c<=a/2},polyline:function(t,e,n,i){var r=t.length-1;if(r<1)return!1;for(var a=0;a<r;a++){var o=t[a][0],s=t[a][1],u=t[a+1][0],c=t[a+1][1];if(this.line(o,s,u,c,e,n,i))return!0}return!1},cubicline:function(t,e,n,i,r,o,s,u,c,h,l){return a.pointDistance(t,e,n,i,r,o,s,u,h,l)<=c/2},quadraticline:function(t,e,n,i,a,o,s,u,c){return r.pointDistance(t,e,n,i,a,o,u,c)<=s/2},arcline:function(t,e,n,i,r,a,s,u,c){return o.pointDistance(t,e,n,i,r,a,u,c)<=s/2},rect:function(t,e,n,i,r,a){return t<=r&&r<=t+n&&e<=a&&a<=e+i},circle:function(t,e,n,i,r){return Math.pow(i-t,2)+Math.pow(r-e,2)<=Math.pow(n,2)},box:function(t,e,n,i,r,a){return t<=r&&r<=e&&n<=a&&a<=i}}},function(t,e,n){var i=n(104);t.exports=i},function(t,e){"use strict";t.exports={colors:["#4E7CCC","#36B3C3","#4ECDA5","#94E08A","#E2F194","#EDCC72","#F8AB60","#F9815C","#EB4456","#C82B3D"],grid:{line:{stroke:"#F5F5F5",lineWidth:1},forceAlign:!0,cell:10},nodeStyle:{stroke:"#666",fill:"#fff",lineWidth:1,radius:4,fillOpacity:.1},delegationStyle:{stroke:"#108EE9",lineDash:[3,3]},nodeLabelStyle:{fill:"#666",textAlign:"center",textBaseline:"middle",fontSize:14},edgeStyle:{lineWidth:1,stroke:"#999",lineAppendWidth:10},edgeLabelStyle:{fill:"#666",textAlign:"center",textBaseline:"middle"},edgeLabelRectStyle:{fill:"white"},anchorPointStyle:{fill:"#108EE9",lineWidth:.1,r:4},anchorPointHoverStyle:{lineWidth:6,stroke:"#108EE9",strokeOpacity:.2},frameRectStyle:{fill:"blue",opacity:.1},nodeControlPointStyle:{r:4,fill:"#fff",shadowBlur:4,shadowColor:"#666"},edgeControlPointStyle:{r:4,fill:"#fff",shadowBlur:4,shadowColor:"#666"},nodeAcitveBoxStyle:{stroke:"#108EE9",lineDash:[3,3]},zIndex:{controlPoint:4,anchorPoint:3,delegate:2,node:1,edge:0,nodeLabel:5,edgeLabel:4,edgeLabelBackground:3,hoverShape:6},treeButtonStyle:{fill:"#fff",stroke:"#333"},treeButtonRadius:6,treeButtonPadding:3,autoZoomPadding:10,updateDuration:450,enterDuration:450,leaveDuration:450,preciseAnchor:!1,updateEasing:"easeOutQuart",enterEasing:"easeOutQuart",leaveEasing:"easeOutQuart",fontFamily:'"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "\u5fae\u8f6f\u96c5\u9ed1", SimSun, "sans-serif"'}},function(t,e,n){"use strict";var i=n(1),r=n(28),a=n(15),o=n(140),s=n(62),u=n(138),c={};i.mix(c,i,r,a,o,s,u),t.exports=c},function(t,e,n){"use strict";var i=n(3),r=n(131);n(128),n(129),r.Mapper=n(60),r.Item=n(59),r.Shape=n(61),r.Util=n(8),r.Global=n(7),r.Handler=n(3),r.ItemGroup=n(58),r.registNode=r.Shape.registNode,r.registEdge=r.Shape.registEdge,r.Mode={none:[]},i.registMode(r),t.exports=r},function(t,e,n){var i=n(99);t.exports=i},function(t,e,n){var i=n(108),r=n(42);i.G=r,i.Group=r.Group,i.Shape={},i.Shape.Marker=r.Marker,i.Util=n(57),i.Matrix=n(2),t.exports=i},function(t,e,n){function i(t,e,n){var i=new s(1,0).angleTo(t),r=i-u,a=i+u,o=6+3*n;return[{x:e.x-o*Math.cos(r),y:e.y-o*Math.sin(r)},e,{x:e.x-o*Math.cos(a),y:e.y-o*Math.sin(a)}]}function r(t,e){t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y),t.lineTo(e[2].x,e[2].y)}function a(t,e,n,a){r(t,i(e,n,a))}function o(t,e,n){var i=n/Math.sin(u);return t.setLength(i/2),e.sub(t),e}var s=n(2).Vector2,u=Math.PI/6;t.exports={makeArrow:a,getEndPoint:o}},function(t,e,n){"use strict";function i(t,e){if(a.isNumeric(t)&&a.isNumeric(e))return o.number(t,e);if(a.isString(t)&&a.isString(e)){var n=new u(t),i=new u(e);if(n.getType()&&i.getType())return s.color(n,i)}}function r(t,e){if(a.isNumeric(t)&&a.isNumeric(e))return o.unNumber(t,e);if(a.isString(t)&&a.isString(e)){var n=new u(t),i=new u(e);if(n.getType()&&i.getType())return s.unColor(n,i)}}var a=n(1),o=n(91),s=n(88),u=n(17);t.exports={singular:i,unSingular:r}},function(t,e,n){function i(t,e,n,i,r){var a=1-r;return a*a*(a*i+3*r*n)+r*r*(r*t+3*a*e)}function r(t,e,n,i,r){var a=1-r;return 3*(((e-t)*a+2*(n-e)*r)*a+(i-n)*r*r)}function a(t,e,n,r,a,o,s,u,h,l,f){var d,g,p,v,y,x,m,b,_=.005,w=1/0,M=1e-4,S=new c(h,l);for(g=0;g<1;g+=.05)p=new c(i(t,n,a,s,g),i(e,r,o,u,g)),v=p.distanceToSquared(S),v<w&&(d=g,w=v);w=1/0;for(var A=0;A<32&&!(_<M);A++)m=d-_,b=d+_,p=new c(i(t,n,a,s,m),i(e,r,o,u,m)),v=p.distanceToSquared(S),m>=0&&v<w?(d=m,w=v):(x=new c(i(t,n,a,s,b),i(e,r,o,u,b)),y=x.distanceToSquared(S),b<=1&&y<w?(d=b,w=y):_*=.5);return f&&(f.x=i(t,n,a,s,d),f.y=i(e,r,o,u,d)),Math.sqrt(w)}function o(t,e,n,i){var r,a,o,s=3*t-9*e+9*n-3*i,u=6*e-12*n+6*i,c=3*n-3*i,l=[];if(h.equal(s,0))h.equal(u,0)||(r=-c/u,r>=0&&r<=1&&l.push(r));else{var f=u*u-4*s*c;h.equal(f,0)?l.push(-u/(2*s)):f>0&&(o=Math.sqrt(f),r=(-u+o)/(2*s),a=(-u-o)/(2*s),r>=0&&r<=1&&l.push(r),a>=0&&a<=1&&l.push(a))}return l}function s(t,e,n,i,r){var a=-3*e+9*n-9*i+3*r,o=t*a+6*e-12*n+6*i;return t*o-3*e+3*n}function u(t,e,n,i,r,a,o,u,c){l.isNull(c)&&(c=1),c=c>1?1:c<0?0:c;for(var h=c/2,f=12,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],g=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,v=0;v<f;v++){var y=h*d[v]+h,x=s(y,t,n,r,o),m=s(y,e,i,a,u),b=x*x+m*m;p+=g[v]*Math.sqrt(b)}return h*p}var c=n(2).Vector2,h=n(6),l=n(1);t.exports={at:i,derivativeAt:r,projectPoint:function(t,e,n,i,r,o,s,u,c,h){var l={};return a(t,e,n,i,r,o,s,u,c,h,l),l},pointDistance:a,extrema:o,len:u}},function(t,e,n){"use strict";function i(t){var e=[];return r.each(t,function(t){e.push(t.x),e.push(t.y)}),e}var r=n(1),a=n(37);r.mix(a,{getEllipsePath:function(t,e,n,i){var r=[["M",t,e-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]];return r},pointsToPolygon:function(t,e){if(!t.length)return"";for(var n="",i="",a=0,o=t.length;a<o;a++){var s=t[a];i=0===a?"M{x} {y}":"L{x} {y}",n+=r.substitute(i,s)}return e&&(n+="Z"),n},pointsToBezier:function(t){t=i(t);var e=a.catmullRomToBezier(t);return e.unshift(["M",t[0],t[1]]),e},pathIntersection:function(t,e){return a.intersection(t,e)},getWaterPositions:function(t,e,n,i){return 0===e?[[t+.5*n/Math.PI/2,i/2],[t+.5*n/Math.PI,i],[t+n/4,i]]:1===e?[[t+.5*n/Math.PI/2*(Math.PI-2),i],[t+.5*n/Math.PI/2*(Math.PI-1),i/2],[t+n/4,0]]:2===e?[[t+.5*n/Math.PI/2,-i/2],[t+.5*n/Math.PI,-i],[t+n/4,-i]]:[[t+.5*n/Math.PI/2*(Math.PI-2),-i],[t+.5*n/Math.PI/2*(Math.PI-1),-i/2],[t+n/4,0]]},getWaterPath:function(t,e,n,i,r,o,s){for(var u=2*Math.ceil(2*t/n*4),c=[];i<2*-Math.PI;)i+=2*Math.PI;for(;i>0;)i-=2*Math.PI;i=i/Math.PI/2*n;var h=o-t+i-2*t;c.push(["M",h,e]);for(var l=0,f=0;f<u;++f){var d=f%4,g=a.getWaterPositions(f*n/4,d,n,r);c.push(["C",g[0][0]+h,-g[0][1]+e,g[1][0]+h,-g[1][1]+e,g[2][0]+h,-g[2][1]+e]),f===u-1&&(l=g[2][0])}return c.push(["L",l+h,s+t]),c.push(["L",h,s+t]),c.push(["L",h,e]),c}}),t.exports=a},function(t,e){"use strict";var n={alignPoint:function(t,e){t.x=Math.round(t.x/e)*e,t.y=Math.round(t.y/e)*e},getControlInfo:function(t,e,n,i,r){var a,o,s=t.x-n.x,u=t.y-n.y,c=i.getBBox(),h=i.getPosition();switch("frontCanvas"===r&&(h=i.getCenter()),e){case 0:a=c.width-s,o=c.height-u;break;case 1:a=c.width+s,o=c.height-u;break;case 2:a=c.width+s,o=c.height+u;break;default:a=c.width-s,o=c.height+u}var l=[a,o];return{x:h.x+s/2,y:h.y+u/2,size:l}}};t.exports=n},function(t,e,n){t.exports=n(93)},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";t.exports=n(22)},function(t,e,n){var i=n(12);t.exports=i},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(4),a=n(1),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=this;n.options=e,a.isFunction(e.callback)||(n.options.callback=function(){})}return t.prototype._prepareRoot=function(){var t=this;t.rootNode=new r(t.root,t.options)},t.prototype.doLayout=function(){throw new Error("please override this method")},t.prototype.getNodes=function(){var t=this,e=t.doLayout();e.translate(-(e.x+e.width/2+e.hgap),-(e.y+e.height/2+e.vgap));var n=[];return e.eachNode(function(e){var i=e.data;i.x=e.x+e.width/2+e.hgap,i.y=e.y+e.height/2+e.vgap,i.align=e.align,i.inAnchor=e.inAnchor?[e.inAnchor.x,e.inAnchor.y]:null,i.outAnchor=e.outAnchor?[e.outAnchor.x,e.outAnchor.y]:null,t.options.callback(e),n.push(i)}),n},t.prototype.getEdges=function(){var t=this,e=t.options,n=e.extraEdges,i=this.rootNode,r=[];return i.eachNode(function(t){t.children.forEach(function(e){r.push({id:t.id+"-"+e.id,source:t.id,target:e.id})})}),r.concat(n),r},t}();t.exports=o},function(t,e,n){"use strict";var i=n(18),r=n(30),a=n(9),o=n(8),s=i[0];t.exports=function(t,e,n){var u=e.direction||s;if(e.isHorizontal=r(u),u&&i.indexOf(u)===-1)throw new TypeError("Invalid direction: "+u);if(u===i[0])n(t,e),a(t,"L","R",e);else if(u===i[1])n(t,e),t.right2left(),a(t,"R","L",e);else if(u===i[2])n(t,e),a(t,"T","B",e);else if(u===i[3])n(t,e),t.bottom2top(),a(t,"B","T",e);else if(u===i[4]||u===i[5]){var c=o(t,e),h=c.left,l=c.right;n(h,e),n(l,e),e.isHorizontal?(a(h,"R","L",e),a(l,"L","R",e)):(a(h,"B","T",e),a(l,"T","B",e)),e.isHorizontal?h.right2left():h.bottom2top(),l.translate(h.x-l.x,h.y-l.y),t.x=h.x,t.y=l.y,a(t,"C","C",e,!0);var f=t.getBoundingBox();e.isHorizontal?f.top<0&&t.translate(0,-f.top):f.left<0&&t.translate(-f.left,0)}return t}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(16),a=2*r,o=r,s={getId:function(t){return t.id||t.name},getHGap:function(t){return t.hgap||o},getVGap:function(t){return t.vgap||o},getChildren:function(t){return t.children},getHeight:function(t){return t.height||a},getWidth:function(t){var e=t.name||" ";return t.width||e.split("").length*r}},u=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];i(this,t);var a=this;if(a.vgap=a.hgap=0,e instanceof t)return e;a.data=e;var o=(n.getHGap||s.getHGap)(e),u=(n.getVGap||s.getVGap)(e);if(a.width=(n.getWidth||s.getWidth)(e),a.height=(n.getHeight||s.getHeight)(e),a.id=(n.getId||s.getId)(e),a.x=a.y=0,a.inAnchor={x:0,y:.5},a.outAnchor={x:1,y:.5},a.depth=0,!r&&!e.isCollapsed)for(var c=[a],h=void 0;h=c.pop();)if(!h.data.isCollapsed){var l=(n.getChildren||s.getChildren)(h.data),f=l?l.length:0;if(h.children=[],l&&f)for(var d=0;d<f;d++){var g=new t(l[d],n);h.children.push(g),c.push(g),g.parent=h,g.depth=h.depth+1}}a.children||(a.children=[]),a.addGap(o,u)}return t.prototype.isRoot=function(){return 0===this.depth},t.prototype.isLeaf=function(){return 0===this.children.length},t.prototype.addGap=function(t,e){var n=this;n.hgap+=t,n.vgap+=e,n.width+=2*t,n.height+=2*e},t.prototype.eachNode=function(t){for(var e=this,n=[e],i=null;i=n.pop();)t(i),n=n.concat(i.children)},t.prototype.DFTraverse=function(t){this.eachNode(t)},t.prototype.BFTraverse=function(t){for(var e=this,n=[e],i=null;i=n.shift();)t(i),n=n.concat(i.children)},t.prototype.getBoundingBox=function(){var t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.width=Math.max(t.width,e.x+e.width),t.height=Math.max(t.height,e.y+e.height)}),t},t.prototype.translate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.eachNode(function(n){n.x+=t,n.y+=e})},t.prototype.right2left=function(){var t=this,e=t.getBoundingBox();t.eachNode(function(t){t.x=t.x-2*(t.x-e.left)-t.width}),t.translate(e.width,0)},t.prototype.bottom2top=function(){var t=this,e=t.getBoundingBox();t.eachNode(function(t){t.y=t.y-2*(t.y-e.top)-t.height}),t.translate(0,e.height)},t.prototype.getCenterX=function(){var t=this;return t.x+t.width/2},t.prototype.getCenterY=function(){var t=this;return t.y+t.height/2},t.prototype.getActualWidth=function(){var t=this;return t.width-2*t.hgap},t.prototype.getActualHeight=function(){var t=this;return t.height-2*t.vgap},t.prototype.getAnchorPoint=function(t){var e=this,n=e.getActualWidth(),i=e.getActualHeight();return{x:e.x+e.hgap+n*t.x,y:e.y+e.vgap+i*t.y}},t}();t.exports=u},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,n){n?t.y+=e:t.x+=e,t.children.forEach(function(t){i(t,e,n)})}function r(t,e){var n=e?t.y:t.x;return t.children.forEach(function(t){n=Math.min(r(t,e),n)}),n}function a(t,e){var n=r(t,e);i(t,-n,e)}function o(t,e,n){n?e.y=t.x:e.x=t.x,t.c.forEach(function(t,i){o(t,e.children[i],n)})}function s(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e?(t.x=n,n+=t.width):(t.y=n,n+=t.height),t.children.forEach(function(t){s(t,e,n)})}var u=function c(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];n(this,c);var a=this;a.w=t||0,a.h=e||0,a.y=i||0,a.x=0,a.c=r||[],a.cs=r.length,a.prelim=0,a.mod=0,a.shift=0,a.change=0,a.tl=null,a.tr=null,a.el=null,a.er=null,a.msel=0,a.mser=0};u.fromNode=function(t,e){if(!t)return null;var n=[];return t.children.forEach(function(t){n.push(u.fromNode(t,e))}),e?new u(t.height,t.width,t.x,n):new u(t.width,t.height,t.y,n)},t.exports=function(t){function e(t){if(0===t.cs)return void n(t);e(t.c[0]);for(var r=x(l(t.c[0].el),0,null),a=1;a<t.cs;++a){e(t.c[a]);var o=l(t.c[a].er);i(t,a,r),r=x(o,a,r)}g(t),n(t)}function n(t){0===t.cs?(t.el=t,t.er=t,t.msel=t.mser=0):(t.el=t.c[0].el,t.msel=t.c[0].msel,t.er=t.c[t.cs-1].er,t.mser=t.c[t.cs-1].mser)}function i(t,e,n){for(var i=t.c[e-1],a=i.mod,o=t.c[e],s=o.mod;null!==i&&null!==o;){l(i)>n.low&&(n=n.nxt);var u=a+i.prelim+i.w-(s+o.prelim);u>0&&(s+=u,r(t,e,n.index,u));var g=l(i),p=l(o);g<=p&&(i=h(i),null!==i&&(a+=i.mod)),g>=p&&(o=c(o),null!==o&&(s+=o.mod))}!i&&o?f(t,e,o,s):i&&!o&&d(t,e,i,a)}function r(t,e,n,i){t.c[e].mod+=i,t.c[e].msel+=i,t.c[e].mser+=i,v(t,e,n,i)}function c(t){return 0===t.cs?t.tl:t.c[0]}function h(t){return 0===t.cs?t.tr:t.c[t.cs-1]}function l(t){return t.y+t.h}function f(t,e,n,i){var r=t.c[0].el;r.tl=n;var a=i-n.mod-t.c[0].msel;r.mod+=a,r.prelim-=a,t.c[0].el=t.c[e].el,t.c[0].msel=t.c[e].msel}function d(t,e,n,i){var r=t.c[e].er;r.tr=n;var a=i-n.mod-t.c[e].mser;r.mod+=a,r.prelim-=a,t.c[e].er=t.c[e-1].er,t.c[e].mser=t.c[e-1].mser}function g(t){t.prelim=(t.c[0].prelim+t.c[0].mod+t.c[t.cs-1].mod+t.c[t.cs-1].prelim+t.c[t.cs-1].w)/2-t.w/2}function p(t,e){e+=t.mod,t.x=t.prelim+e,y(t);for(var n=0;n<t.cs;n++)p(t.c[n],e)}function v(t,e,n,i){if(n!==e-1){var r=e-n;t.c[n+1].shift+=i/r,t.c[e].shift-=i/r,t.c[e].change-=i-i/r}}function y(t){for(var e=0,n=0,i=0;i<t.cs;i++)e+=t.c[i].shift,n+=e+t.c[i].change,t.c[i].mod+=n}function x(t,e,n){for(;null!==n&&t>=n.low;)n=n.nxt;return{low:t,index:e,nxt:n}}var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},b=m.isHorizontal;s(t,b);var _=u.fromNode(t,b);return e(_),p(_,0),o(_,t,b),a(t,b),t}},function(t,e,n){"use strict";var i=n(1),r=function(t){i.mix(this,t),this._init()};i.augment(r,{nodes:null,edges:null,y:0,hasWeight:!1,idField:"name",valueField:"value",sourceField:"source",targetField:"target",sourceWeightField:"sourceWeight",targetWeightField:"targetWeight",maxValue:null,thickness:.05,margin:.01,detachment:!1,_init:function(){var t=this,e=t.nodes,n=t.valueField,r=t.targetWeightField;if(i.isNull(e)){var a=t.edges.slice(0);t.edges=a,i.isNull(a[0][r])&&(t.targetWeightField=t.sourceWeightField),e=t._createNodes()}else e=e.slice(0),t.nodes=e;t.hasWeight&&i.isNull(e[0][n])&&(t._initNodeMap(),t._calculateValue()),t._setMarginWidth(e)},_createNodes:function(){var t=this,e=t.edges,n=t.sourceField,i=t.targetField,r=[],a={};return e.forEach(function(e){var o=e[n],s=e[i];t._creatNode(o,a,r),t._creatNode(s,a,r)}),t.nodes=r,r},_creatNode:function(t,e,n){if(i.isNull(e[t])){var r={id:t};n.push(r),e[t]=r}},_initNodeMap:function(){var t=this,e=t.idField,n=t.targetField,r=t.sourceField,a=t.nodes;if(i.isObject(a))return a;var o={};return i.each(a,function(a){i.isNull(a.id)&&(a.id=a[e]),i.isNull(a.y)||delete a.y,a.inEdges=t._getEdgeOfCurNode(a,n),a.outEdges=t._getEdgeOfCurNode(a,r),o[a.id]=a}),t.nodesMap=o,t.nodes=a,o},_getEdgeOfCurNode:function(t,e){var n=this.edges,i=n.filter(function(n){return n[e]===t.id});return i},_calculateValue:function(){var t=this,e=t.nodes,n=t.valueField;e.forEach(function(e){i.isNull(e[n])&&t._getValueFromEdges(e)})},_getValueFromEdges:function(t){var e=this.valueField,n=this.sourceField,i=this.targetField,r=this.sourceWeightField,a=this.targetWeightField,o=0,s=this.detachment;if(s){var u=0,c=0;t.outEdges.forEach(function(t){c+=t[r]}),t.inEdges.forEach(function(t){u+=t[a]}),o=Math.max(u,c)}else t.outEdges.forEach(function(t){o+=t[r]}),t.inEdges.forEach(function(t){t[n]!==t[i]&&(o+=t[a])});return t[e]=o,o},_setMarginWidth:function(t){var e=this.margin,n=t.length,i=2*n*e;this.marginWidth=i},getNodes:function(){var t=this,e=t.nodes;return t.hasWeight?t._layoutByWeight(e):t._layout(e),e},_layout:function(t){var e=t.length,n=1/e,i=this.y;t.map(function(t,e){t.x=(e+.5)*n,t.y=i})},_layoutByWeight:function(t){var e=this.y,n=this.marginWidth,i=this.thickness,r=this.valueField,a=0;t.forEach(function(t){a+=t[r]});var o=this.maxValue||a;t.map(function(t){t.weight=t[r]/o,t.width=t.weight*(1-n),t.height=i,t.y=e}),this._layoutX(t)},_layoutX:function(t){var e=this.margin;t.map(function(n,i){for(var r=0,a=i-1;a>=0;a--)r+=t[a].width+2*e;n.x=e+.5*n.width+r})},reset:function(){this._init()}}),t.exports=r},function(t,e,n){"use strict";var i=n(1),r=n(28),a=n(29),o=n(6),s=function(t){i.mix(this,t),this._init()};i.extend(s,o),i.augment(s,{hasWeight:!0,stepField:"step",totalStep:0,calculationTimes:2,_init:function(){var t=this.edges.slice(0);this.edges=t,this._initNode()},_initNode:function(){var t=this,e=t.nodes,n=t.stepField,r=t.valueField;i.isNull(e)?e=t._createNodes():(e=e.slice(0),t.nodes=e),t._initNodeMap(),i.isNull(e[0][n])&&t._calculateStep(),i.isNull(e[0][r])&&t._calculateValue()},_calculateStep:function(){var t=this,e=t.nodes,n=t.stepField;e.forEach(function(e){i.isNull(e[n])&&t._getStepFromEdges(e)});var r=e.filter(function(t){return 0===t.outEdges.length});r.map(function(e){e.step=t.totalStep-1})},_getValueFromEdges:function(t){var e=this.valueField,n=0,i=t.step;return 0===i?t.outEdges.forEach(function(t){n+=t[e]}):t.inEdges.forEach(function(t){n+=t[e]}),t.value=n,n},_getStepFromEdges:function(t){var e=this,n=e.sourceField,r=0;return t.inEdges.length>0&&t.inEdges.forEach(function(t){var a,o=e._findObj(t[n]);a=i.isNull(o.step)?e._getStepFromEdges(o):o.step,r=Math.max(a+1,r)}),t.step=r,e.totalStep=Math.max(e.totalStep,r+1),r},_findObj:function(t){var e=this.nodesMap;return e[t]},getNodes:function(){var t=this,e=t.nodes,n=t.sourceField,r=t.targetField,a=t.stepField,o=t.valueField,s=[],u=[],c=[];e.forEach(function(t){var e=t[a];void 0===u[e]&&(u[e]=[]),u[e].push(t),i.isNull(s[e])?s[e]=t[o]:s[e]+=t[o]}),t.maxValue=Math.max.apply(null,s),t.totalStep=u.length,t._setMarginWidth(u[0]),t._layoutByWeight(u[0]),t._layoutNodes(u,n);for(var h=t.calculationTimes;h>0;h--)t._layoutNodes(u.reverse(),r),t._layoutNodes(u.reverse(),n);return u.forEach(function(t){c=c.concat(t)}),t.normalization(c),c},normalization:function(t){var e=1;t.forEach(function(t){t.x>e&&(e=t.x)}),e>1&&t.map(function(t){t.x=t.x/e,t.width=t.width/e})},_layoutNodes:function(t,e){var n=this;if(t.length>=2){var i;for(i=1;i<t.length;i++)n.y=i/(n.totalStep-1),n._layoutHighStep(t[i],e),t[i].sort(function(t,e){return t.x-e.x}),n._handleConflict(t[i]);n._layoutX(t[i-1])}},_handleConflict:function(t){var e=this.margin;t.map(function(n,i){i>0&&n.x-.5*n.width<=t[i-1].x+.5*t[i-1].width+2*e&&(n.x=t[i-1].x+.5*t[i-1].width+2*e+.5*n.width)})},_layoutHighStep:function(t,e){var n=this,i=n.valueField,r=n.maxValue,a=n.thickness,o=n.marginWidth,s=n.y,u=e===n.sourceField?n.targetField:n.sourceField;t.map(function(t){var c,h=n._getEdgeOfCurNode(t,u),l=0;h.forEach(function(r){c=n._findObj(r[e]);var a=r[i];l+=c.x*a/t[i]}),t.x=l,t.weight=t[i]/r,t.width=t.weight*(1-o),t.height=a,t.y=void 0===t.y?s:t.y})},getEdges:function(){for(var t=this.calculationTimes;t>0;t--)this._layoutEdges();return this.edges},_layoutEdges:function(){var t=this,e=t.nodes,n=t.stepField,i=t.targetField,r=t.sourceField,a=t.totalStep;e.forEach(function(e){0!==e[n]&&t._edgeSort(e.inEdges,r)}),e.forEach(function(e){e[n]!==a&&t._edgeSort(e.outEdges,i)})},_edgeSort:function(t,e){var n=this,i=n.edges;t.sort(function(t,i){return n._findObj(t[e]).x-n._findObj(i[e]).x}),t.forEach(function(o,s){for(var u=0;u<s;u++){var c=n._findIndex(i,t[u]),h=n._findIndex(i,o);n._findObj(t[u][e]).x>n._findObj(o[e]).x?a(i,h,c):r(i,h,c)}})},_findIndex:function(t,e){var n=this.sourceField,i=this.targetField,r=t.findIndex(function(t){return t[n]===e[n]&&t[i]===e[i]});return r}}),t.exports=s},function(t,e,n){"use strict";var i=n(4);t.exports=function(t,e){for(var n=new i(t.data,e,(!0)),r=new i(t.data,e,(!0)),a=t.children.length,o=Math.round(a/2),s=0;s<a;s++){var u=t.children[s];s<o?r.children.push(u):n.children.push(u)}return{left:n,right:r}}},function(t,e,n){"use strict";function i(t,e,n,i){i.forceAlign?t.align=i.forceAlign:!t.isRoot()||"H"!==i.direction&&"V"!==i.direction?t.align=t.isLeaf()?a(n):n:t.align=i.isHorizontal?"CH":"CV",t.inAnchor=r[e],t.outAnchor=r[n]}var r=n(17),a=n(27);t.exports=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments[4];a?i(t,e,n,r):t.eachNode(function(t){i(t,e,n,r)})}},function(t,e,n){var i=n(11);t.exports=i},function(t,e){"use strict";function n(t,e,i){i=i||0;for(var r in e)if(e.hasOwnProperty(r)){var s=e[r];null!==s&&o.isObject(s)?(o.isObject(t[r])||(t[r]={}),i<a?n(t[r],e[r],i+1):t[r]=e[r]):o.isArray(s)?(t[r]=[],t[r]=t[r].concat(s)):void 0!==s&&(t[r]=e[r])}}var i=Object.prototype,r=i.toString,a=5,o={substitute:function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]}):t},ucfirst:function(t){return t+="",t.charAt(0).toUpperCase()+t.substring(1)},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},isBoolean:function(t){return"boolean"==typeof t},isFunction:function(t){return"function"==typeof t},isArray:"isArray"in Array?Array.isArray:function(t){return"[object Array]"===r.call(t)},isDate:function(t){return"[object Date]"===r.call(t)},isNull:function(t){return void 0===t||null===t},notNull:function(t){return!o.isNull(t)},isBlank:function(t){if(o.isArray(t))return 0===t.length;if(o.isObject(t)){var e=0;return o.each(t,function(t,n){e++}),0===e}return!1},isObject:"[object Object]"===r.call(null)?function(t){return null!==t&&void 0!==t&&"[object Object]"===r.call(t)&&void 0===t.ownerDocument}:function(t){return"[object Object]"===r.call(t)},extend:function(t,e,n,i){o.isFunction(e)||(n=e,e=t,t=function(){});var r=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}n.prototype=t;var i=new n;return i.constructor=e,i},a=r(e.prototype,t);return t.prototype=o.mix(a,t.prototype),t.superclass=r(e.prototype,e),o.mix(a,n),o.mix(t,i),t},augment:function(t){for(var e=o.toArray(arguments),n=1;n<e.length;n++){var i=e[n];o.isFunction(i)&&(i=i.prototype),o.mix(t.prototype,i)}},toArray:function(t){return t&&t.length?Array.prototype.slice.call(t):[]},mix:function(){var t=o.toArray(arguments),e=t[0];if(e===!0){e=t[1];for(var i=2;i<t.length;i++){var r=t[i];n(e,r)}}else for(var i=1;i<t.length;i++){var r=t[i];for(var a in r)r.hasOwnProperty(a)&&"constructor"!==a&&(e[a]=r[a])}return e},each:function(t,e){if(t)if(o.isObject(t)){for(var n in t)if(t.hasOwnProperty(n)){var i=e(t[n],n);if(i===!1)break}}else if(t.length)for(var r=0;r<t.length;r++){var i=e(t[r],r);if(i===!1)break}},requestAnimationFrame:function(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return setTimeout(t,16)};return e(t)},cancelAnimationFrame:function(t){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||function(t){return clearTimeout(t)};return e(t)}};t.exports=o},function(t,e,n){"use strict";function i(t,e){var n=e.toString(),i=n.indexOf(".");if(i===-1)return Math.round(t);var r=n.substr(i+1).length;return parseFloat(t.toFixed(r))}function r(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&(t[n]=e[n])}var a=n(10);a.mix(a,{mixin:function(t,e){if(t&&e){t._mixins=e,t.ATTRS=t.ATTRS||{};var n={};a.each(e,function(e){a.augment(t,e);var i=e.ATTRS;i&&a.mix(n,i)}),t.ATTRS=a.mix(n,t.ATTRS)}},map:function(t,e){var n=[];return a.each(t,function(t,i){n.push(e(t,i))}),n},filter:function(t,e){var n=[];return a.each(t,function(t,i){e(t,i)&&n.push(t)}),n},guid:function(){var t={};return function(e){return e=e||"g",t[e]?t[e]+=1:t[e]=1,e+t[e]}}(),inArray:function(t,e){return a.indexOf(t,e)!==-1},indexOf:function(t,e){var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var i=-1,r=0;r<t.length;r++)if(t[r]===e){i=r;break}return i},remove:function(t,e){var n=a.indexOf(t,e);n!==-1&&t.splice(n,1)},empty:function(t){if(!(t instanceof Array))for(var e=t.length-1;e>=0;e--)delete t[e];t.length=0},equalsArray:function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=!0,i=0;i<t.length;i++)if(t[i]!==e[i]){n=!1;break}return n},wrapBehavior:function(t,e){var n=function(n){t[e](n)};return t["_wrap_"+e]=n,n},getWrapBehavior:function(t,e){return t["_wrap_"+e]},fixedBase:function(t,e){return i(t,e)},length:function(t){if(a.isArray(t))return t.length;if(a.isObject(t)){var e=0;return a.each(t,function(){e++}),e}return 0},clone:function(t){if("object"!=typeof t||null===t)return t;var e;if(a.isArray(t)){e=[];for(var n=0,i=t.length;n<i;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=a.clone(t[n]):e[n]=t[n]}else{e={};for(var r in t)"object"==typeof t[r]&&null!=t[r]?e[r]=a.clone(t[r]):e[r]=t[r]}return e},simpleMix:function(t,e,n,i){return e&&r(t,e),n&&r(t,n),i&&r(t,i),t}}),t.exports=a},function(t,e,n){var i;!function(r,a){i=function(){return r.returnExportsGlobal=a()}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))}(this,function(){var t={},e=t.Graph=function(){this.nodeSet={},this.nodes=[],this.edges=[],this.adjacency={},this.nextNodeId=0,this.nextEdgeId=0,this.eventListeners=[]},n=t.Node=function(t,e){this.id=t,this.data=void 0!==e?e:{}},i=t.Edge=function(t,e,n,i){this.id=t,this.source=e,this.target=n,this.data=void 0!==i?i:{}};e.prototype.addNode=function(t){return t.id in this.nodeSet||this.nodes.push(t),this.nodeSet[t.id]=t,this.notify(),t},e.prototype.addNodes=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t],i=new n(e,{label:e});this.addNode(i)}},e.prototype.addEdge=function(t){var e=!1;return this.edges.forEach(function(n){t.id===n.id&&(e=!0)}),e||this.edges.push(t),t.source.id in this.adjacency||(this.adjacency[t.source.id]={}),t.target.id in this.adjacency[t.source.id]||(this.adjacency[t.source.id][t.target.id]=[]),e=!1,this.adjacency[t.source.id][t.target.id].forEach(function(n){t.id===n.id&&(e=!0)}),e||this.adjacency[t.source.id][t.target.id].push(t),this.notify(),t},e.prototype.addEdges=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t],n=this.nodeSet[e[0]];if(void 0==n)throw new TypeError("invalid node name: "+e[0]);var i=this.nodeSet[e[1]];if(void 0==i)throw new TypeError("invalid node name: "+e[1]);var r=e[2];this.newEdge(n,i,r)}},e.prototype.newNode=function(t){var e=new n((this.nextNodeId++),t);return this.addNode(e),e},e.prototype.newEdge=function(t,e,n){var r=new i((this.nextEdgeId++),t,e,n);return this.addEdge(r),r},e.prototype.loadJSON=function(t){("string"==typeof t||t instanceof String)&&(t=JSON.parse(t)),("nodes"in t||"edges"in t)&&(this.addNodes.apply(this,t.nodes),this.addEdges.apply(this,t.edges))},e.prototype.getEdges=function(t,e){return t.id in this.adjacency&&e.id in this.adjacency[t.id]?this.adjacency[t.id][e.id]:[]},e.prototype.removeNode=function(t){t.id in this.nodeSet&&delete this.nodeSet[t.id];for(var e=this.nodes.length-1;e>=0;e--)this.nodes[e].id===t.id&&this.nodes.splice(e,1);this.detachNode(t)},e.prototype.detachNode=function(t){var e=this.edges.slice();e.forEach(function(e){e.source.id!==t.id&&e.target.id!==t.id||this.removeEdge(e)},this),this.notify()},e.prototype.removeEdge=function(t){for(var e=this.edges.length-1;e>=0;e--)this.edges[e].id===t.id&&this.edges.splice(e,1);for(var n in this.adjacency){for(var i in this.adjacency[n]){for(var r=this.adjacency[n][i],a=r.length-1;a>=0;a--)this.adjacency[n][i][a].id===t.id&&this.adjacency[n][i].splice(a,1);0==this.adjacency[n][i].length&&delete this.adjacency[n][i]}u(this.adjacency[n])&&delete this.adjacency[n]}this.notify()},e.prototype.merge=function(t){var e=[];t.nodes.forEach(function(t){e.push(this.addNode(new n(t.id,t.data)))},this),t.edges.forEach(function(t){var n=e[t.from],r=e[t.to],a=t.directed?a=t.type+"-"+n.id+"-"+r.id:n.id<r.id?t.type+"-"+n.id+"-"+r.id:t.type+"-"+r.id+"-"+n.id,o=this.addEdge(new i(a,n,r,t.data));o.data.type=t.type},this)},e.prototype.filterNodes=function(t){var e=this.nodes.slice();e.forEach(function(e){t(e)||this.removeNode(e)},this)},e.prototype.filterEdges=function(t){var e=this.edges.slice();e.forEach(function(e){t(e)||this.removeEdge(e)},this)},e.prototype.addGraphListener=function(t){
this.eventListeners.push(t)},e.prototype.notify=function(){this.eventListeners.forEach(function(t){t.graphChanged()})};var r=t.Layout={};r.ForceDirected=function(t,e,n,i,r){this.graph=t,this.stiffness=e,this.repulsion=n,this.damping=i,this.minEnergyThreshold=r||.01,this.nodePoints={},this.edgeSprings={}},r.ForceDirected.prototype.point=function(t){if(!(t.id in this.nodePoints)){var e=void 0!==t.data.mass?t.data.mass:1;this.nodePoints[t.id]=new r.ForceDirected.Point(o.random(),e)}return this.nodePoints[t.id]},r.ForceDirected.prototype.spring=function(t){if(!(t.id in this.edgeSprings)){var e=void 0!==t.data.length?t.data.length:1,n=!1,i=this.graph.getEdges(t.source,t.target);if(i.forEach(function(t){n===!1&&t.id in this.edgeSprings&&(n=this.edgeSprings[t.id])},this),n!==!1)return new r.ForceDirected.Spring(n.point1,n.point2,0,0);if(this.graph.getEdges(t.target,t.source),i.forEach(function(t){n===!1&&t.id in this.edgeSprings&&(n=this.edgeSprings[t.id])},this),n!==!1)return new r.ForceDirected.Spring(n.point2,n.point1,0,0);this.edgeSprings[t.id]=new r.ForceDirected.Spring(this.point(t.source),this.point(t.target),e,this.stiffness)}return this.edgeSprings[t.id]},r.ForceDirected.prototype.eachNode=function(t){var e=this;this.graph.nodes.forEach(function(n){t.call(e,n,e.point(n))})},r.ForceDirected.prototype.eachEdge=function(t){var e=this;this.graph.edges.forEach(function(n){t.call(e,n,e.spring(n))})},r.ForceDirected.prototype.eachSpring=function(t){var e=this;this.graph.edges.forEach(function(n){t.call(e,e.spring(n))})},r.ForceDirected.prototype.applyCoulombsLaw=function(){this.eachNode(function(t,e){this.eachNode(function(t,n){if(e!==n){var i=e.p.subtract(n.p),r=i.magnitude()+.1,a=i.normalise();e.applyForce(a.multiply(this.repulsion).divide(r*r*.5)),n.applyForce(a.multiply(this.repulsion).divide(r*r*-.5))}})})},r.ForceDirected.prototype.applyHookesLaw=function(){this.eachSpring(function(t){var e=t.point2.p.subtract(t.point1.p),n=t.length-e.magnitude(),i=e.normalise();t.point1.applyForce(i.multiply(t.k*n*-.5)),t.point2.applyForce(i.multiply(t.k*n*.5))})},r.ForceDirected.prototype.attractToCentre=function(){this.eachNode(function(t,e){var n=e.p.multiply(-1);e.applyForce(n.multiply(this.repulsion/50))})},r.ForceDirected.prototype.updateVelocity=function(t){this.eachNode(function(e,n){n.v=n.v.add(n.a.multiply(t)).multiply(this.damping),n.a=new o(0,0)})},r.ForceDirected.prototype.updatePosition=function(t){this.eachNode(function(e,n){n.p=n.p.add(n.v.multiply(t))})},r.ForceDirected.prototype.totalEnergy=function(t){var e=0;return this.eachNode(function(t,n){var i=n.v.magnitude();e+=.5*n.m*i*i}),e};var a=function(t,e){return function(){return t.apply(e,arguments)}};t.requestAnimationFrame=a(this.requestAnimationFrame||this.webkitRequestAnimationFrame||this.mozRequestAnimationFrame||this.oRequestAnimationFrame||this.msRequestAnimationFrame||function(t,e){this.setTimeout(t,10)},this),r.ForceDirected.prototype.start=function(e,n,i){var r=this;this._started||(this._started=!0,this._stop=!1,void 0!==i&&i(),t.requestAnimationFrame(function a(){r.tick(.03),void 0!==e&&e(),r._stop||r.totalEnergy()<r.minEnergyThreshold?(r._started=!1,void 0!==n&&n()):t.requestAnimationFrame(a)}))},r.ForceDirected.prototype.stop=function(){this._stop=!0},r.ForceDirected.prototype.tick=function(t){this.applyCoulombsLaw(),this.applyHookesLaw(),this.attractToCentre(),this.updateVelocity(t),this.updatePosition(t)},r.ForceDirected.prototype.nearest=function(t){var e={node:null,point:null,distance:null},n=this;return this.graph.nodes.forEach(function(i){var r=n.point(i),a=r.p.subtract(t).magnitude();(null===e.distance||a<e.distance)&&(e={node:i,point:r,distance:a})}),e},r.ForceDirected.prototype.getBoundingBox=function(){var t=new o((-2),(-2)),e=new o(2,2);this.eachNode(function(n,i){i.p.x<t.x&&(t.x=i.p.x),i.p.y<t.y&&(t.y=i.p.y),i.p.x>e.x&&(e.x=i.p.x),i.p.y>e.y&&(e.y=i.p.y)});var n=e.subtract(t).multiply(.07);return{bottomleft:t.subtract(n),topright:e.add(n)}};var o=t.Vector=function(t,e){this.x=t,this.y=e};o.random=function(){return new o(10*(Math.random()-.5),10*(Math.random()-.5))},o.prototype.add=function(t){return new o(this.x+t.x,this.y+t.y)},o.prototype.subtract=function(t){return new o(this.x-t.x,this.y-t.y)},o.prototype.multiply=function(t){return new o(this.x*t,this.y*t)},o.prototype.divide=function(t){return new o(this.x/t||0,this.y/t||0)},o.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},o.prototype.normal=function(){return new o((-this.y),this.x)},o.prototype.normalise=function(){return this.divide(this.magnitude())},r.ForceDirected.Point=function(t,e){this.p=t,this.m=e,this.v=new o(0,0),this.a=new o(0,0)},r.ForceDirected.Point.prototype.applyForce=function(t){this.a=this.a.add(t.divide(this.m))},r.ForceDirected.Spring=function(t,e,n,i){this.point1=t,this.point2=e,this.length=n,this.k=i};var s=t.Renderer=function(t,e,n,i,r,a){this.layout=t,this.clear=e,this.drawEdge=n,this.drawNode=i,this.onRenderStop=r,this.onRenderStart=a,this.layout.graph.addGraphListener(this)};s.prototype.graphChanged=function(t){this.start()},s.prototype.start=function(t){var e=this;this.layout.start(function(){e.clear(),e.layout.eachEdge(function(t,n){e.drawEdge(t,n.point1.p,n.point2.p)}),e.layout.eachNode(function(t,n){e.drawNode(t,n.p)})},this.onRenderStop,this.onRenderStart)},s.prototype.stop=function(){this.layout.stop()},Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,i;if(null==this)throw new TypeError(" this is null or not defined");var r=Object(this),a=r.length>>>0;if("[object Function]"!={}.toString.call(t))throw new TypeError(t+" is not a function");for(e&&(n=e),i=0;i<a;){var o;i in r&&(o=r[i],t.call(n,o,i,r)),i++}});var u=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};return t})},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,n){n?(e.x=t.x,e.y=t.y):(e.x=t.y,e.y=t.x),t.children.forEach(function(t,r){i(t,e.children[r],n)})}var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n(this,s);var i=this;i.x=i.y=0,i.leftChild=i.rightChild=null,i.height=t||0,i.children=e},o={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};t.exports=function(t){function e(t){if(!t)return null;t.width=0,t.depth&&t.depth>c&&(c=t.depth);var n=t.children,i=n.length,r=new a(t.height,[]);return n.forEach(function(t,n){var a=e(t);r.children.push(a),0===n&&(r.leftChild=a),n===i-1&&(r.rightChild=a)}),r.originNode=t,r.isLeaf=t.isLeaf(),r}function n(t){if(t.isLeaf||0===t.children.length)t.drawingDepth=c;else{var e=t.children.map(function(t){return n(t)}),i=Math.min.apply(null,e);t.drawingDepth=i-1}return t.drawingDepth}function s(t){t.x=t.drawingDepth*u.rankSep,t.isLeaf?(t.y=0,h&&(t.y=h.y+h.height+u.nodeSep,t.originNode.parent!==h.originNode.parent&&(t.y+=u.subTreeSep)),h=t):(t.children.forEach(function(t){s(t)}),t.y=(t.leftChild.y+t.rightChild.y)/2)}var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u=r({},o,u);var c=0,h=void 0,l=e(t);return n(l),s(l),i(l,t,u.isHorizontal),t}},function(t,e){"use strict";function n(t,e,n){t.x+=n*t.depth,t.y=e?e.y+e.height:0}var i=20;t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,r=null;t.eachNode(function(t){n(t,r,e),r=t})}},function(t,e){"use strict";t.exports=18},function(t,e){"use strict";t.exports={T:{x:.5,y:0},R:{x:1,y:.5},B:{x:.5,y:1},L:{x:0,y:.5},C:null}},function(t,e){"use strict";t.exports=["LR","RL","TB","BT","H","V"]},function(t,e){"use strict";t.exports=["LR","RL","H","L","R"]},function(t,e,n){"use strict";var i=n(1),r=n(7),a=function(t){i.mix(this,t),this._init()};i.extend(a,r),i.augment(a,{step:0,margin:0,valueField:"..value",_init:function(){var t=this.edges.slice(0);this.edges=t,t.map(function(t){t["..value"]=1}),this._initNode()},_calculateStep:function(){var t=this,e=t.nodes,n=t.stepField;if(i.isNull(e[0][n])){var r=e.filter(function(t){return 0===t.inEdges.length});0===r.length&&(r=[e[0]]),t._setNodesStep(r)}e.map(function(e){void 0===e.step&&(e.step=t.step,t.step=t.step+1,t._setNodesStep([e]))})},_setNodesStep:function(t){var e=this,n=e.step,r=e.stepField,a=t.filter(function(t){return i.isNull(t[r])});if(a.length>0){a.map(function(t){t[r]=n}),e.step=n+1;var o=e._getNextNodes(a);o.length>0&&e._setNodesStep(o)}},_getNextNodes:function(t){var e=this,n=e.targetField,r=e.stepField,a=[];return t.forEach(function(t){t.outEdges.length>0&&t.outEdges.forEach(function(o){var s=o[n];if(s!==t.id){var u=e._findObj(s);i.isNull(u[r])&&a.push(u)}})}),a},_calculateValue:function(){var t=this,e=t.nodes,n=t.valueField;e.map(function(t){t[n]=1})},_layoutByWeight:function(t){var e=t.length,n=1/e,i=this.y,r=this;t.map(function(t,e){t.x=(e+.5)*n,t.y=void 0===t.y?i:t.y,r.onNodeChange(t.id,{x:t.x,y:t.y})})},_layoutHighStep:function(t,e){var n=this,i=n.y,r=e===n.sourceField?n.targetField:n.sourceField;t.map(function(t){var a,o=n._getEdgeOfCurNode(t,r),s=0,u=0,c=e===n.sourceField?t.step-1:t.step+1;o.forEach(function(t){a=n._findObj(t[e]),a.step===c&&(u++,s+=a.x)}),t.x=s/u,t.y=void 0===t.y?i:t.y,n.onNodeChange(t.id,{x:t.x,y:t.y})})},_layoutNodes:function(t,e){var n=this;if(t.length>=2){var i;for(i=1;i<t.length;i++)n.y=i/(n.totalStep-1),n._layoutHighStep(t[i],e),t[i].sort(function(t,e){return t.x-e.x}),n._layoutByWeight(t[i])}},onNodeChange:function(){},getNodes:function(){var t=a.superclass.getNodes.call(this),e=this.stepField,n=this.valueField;return t.map(function(t){delete t.inEdges,delete t.outEdges,delete t[e],delete t[n]}),t},start:function(){this.getNodes()}}),t.exports=a},function(t,e,n){"use strict";var i=n(1),r=n(13),a=function(t){i.mix(this,t),this._init()};i.augment(a,{graph:null,stiffness:200,repulsion:400,minEnergyThreshold:.01,damping:.3,_init:function(){var t=this,e={nodes:[],edges:[]};i.each(t.nodes,function(t){e.nodes.push(t.id)}),i.each(t.edges,function(t){e.edges.push([t.source,t.target])});var n=new r.Graph,a=new r.Layout.ForceDirected(n,this.stiffness,this.repulsion,this.damping,this.minEnergyThreshold),o=new r.Renderer(a,function(){},function(){},function(e,n){t.onNodeChange(e.id,n)},function(){t.onFinish()},function(){t.onStart()});n.loadJSON(e),this.layout=a,this.renderer=o},onNodeChange:function(){},onEdgeChange:function(){},onClear:function(){},onFinish:function(){},onStart:function(){},start:function(){this.renderer.start()}}),t.exports=a},function(t,e,n){"use strict";var i={CompactBoxTree:n(23),Dendrogram:n(24),IndentedTree:n(25),LayeredTidyTree:n(26),TreeLayout:n(2),Flow:n(20),Force:n(21),Linear:n(6),Sankey:n(7)};t.exports=i},function(t,e,n){"use strict";function i(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],a=Object.getOwnPropertyDescriptor(e,r);a&&a.configurable&&void 0===t[r]&&Object.defineProperty(t,r,a)}return t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):i(t,e))}var s=n(2),u=n(5),c=n(3),h=function(t){function e(){return r(this,e),a(this,t.apply(this,arguments))}return o(e,t),e.prototype.doLayout=function(){t.prototype._prepareRoot.call(this);var e=this;return e.options.forceAlign="R",c(e.rootNode,e.options,u)},e}(s);t.exports=h},function(t,e,n){"use strict";function i(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],a=Object.getOwnPropertyDescriptor(e,r);a&&a.configurable&&void 0===t[r]&&Object.defineProperty(t,r,a)}return t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):i(t,e))}var s=n(2),u=n(14),c=n(3),h=function(t){function e(){return r(this,e),a(this,t.apply(this,arguments))}return o(e,t),e.prototype.doLayout=function(){t.prototype._prepareRoot.call(this);var e=this,n=e.rootNode,i=e.options;return n.width=0,c(n,i,u),n},e}(s);t.exports=h},function(t,e,n){"use strict";function i(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],a=Object.getOwnPropertyDescriptor(e,r);a&&a.configurable&&void 0===t[r]&&Object.defineProperty(t,r,a)}return t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):i(t,e))}var s=n(2),u=n(15),c=n(9),h=n(8),l=["LR","RL","H"],f=l[0],d=function(t){function e(){return r(this,e),a(this,t.apply(this,arguments))}return o(e,t),e.prototype.doLayout=function(){t.prototype._prepareRoot.call(this);var e=this,n=e.rootNode,i=e.options;i.isHorizontal=!0;var r=i.indent;e.options.forceAlign="R";var a=i.direction||f;if(a&&l.indexOf(a)===-1)throw new TypeError("Invalid direction: "+a);if(a===l[0])u(n,r),c(n,"L","L",i);else if(a===l[1])u(n,r),n.right2left(),c(n,"R","R",i);else if(a===l[2]){var o=h(n,i),s=o.left,d=o.right;u(s,r),s.right2left(),c(s,"R","R",i),u(d,r),c(d,"L","L",i);var g=s.getBoundingBox();d.translate(g.width,0),n.x=d.x-n.width/2,c(n,"B","B",i,!0)}return n},e}(s);t.exports=d},function(t,e,n){"use strict";function i(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],a=Object.getOwnPropertyDescriptor(e,r);a&&a.configurable&&void 0===t[r]&&Object.defineProperty(t,r,a)}return t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):i(t,e))}var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},u=n(4),c=n(2),h=n(5),l=n(3),f={nodeSize:20,nodeSep:20,rankSep:200},d=function(t){function e(){return r(this,e),a(this,t.apply(this,arguments))}return o(e,t),e.prototype.doLayout=function(){t.prototype._prepareRoot.call(this);var e=this,n=s({},f,e.options),i=n.nodeSize||f.nodeSize,r=n.nodeSep||f.nodeSep,a=n.rankSep||f.rankSep;e.rootNode=new u(e.root,s(n,{getWidth:function(){return i},getHeight:function(){return i},getHGap:function(){return a},getVGap:function(){return r}}));var o=e.rootNode;return l(o,n,h),o},e}(c);t.exports=d},function(t,e){"use strict";var n={R:"L",L:"R",T:"B",B:"T"};t.exports=function(t){return n[t]}},function(t,e){"use strict";t.exports=function(t,e,n){if(!(e>=n)){var i=t.splice(e,1)[0];t.splice(n,0,i)}}},function(t,e){"use strict";t.exports=function(t,e,n){if(!(e<=n)){var i=t.splice(e,1)[0];t.splice(n-1,0,i)}}},function(t,e,n){"use strict";var i=n(19);t.exports=function(t){return i.indexOf(t)>-1}}])})},function(t,e,n){"use strict";var i=n(1),r=n(35);i.mix(i,{parsePathString:r.toArray,path2string:r.toString,path2curve:r.toCurve,pathToAbsolute:r.toAbsolute,catmullRom2bezier:r.catmullRomToBezier}),t.exports=i},function(t,e,n){function i(t,e,n,i){return{x:Math.cos(i)*n+t,y:Math.sin(i)*n+e}}function r(t,e,n,i){var r,a;return i?t<e?(r=e-t,a=2*Math.PI-n+t):t>n&&(r=2*Math.PI-t+e,a=t-n):(r=t-e,a=n-t),r>a?n:e}function a(t,e,n,i){var a=0;return n-e>=2*Math.PI&&(a=2*Math.PI),e=c.mod(e,2*Math.PI),n=c.mod(n,2*Math.PI)+a,t=c.mod(t,2*Math.PI),i?e>=n?t>n&&t<e?t:r(t,n,e,!0):t<e||t>n?t:r(t,e,n):e<=n?e<t&&t<n?t:r(t,e,n,!0):t>e||t<n?t:r(t,n,e)}function o(t,e,n,i,r,o,s,c,h){var l=new u(s,c),f=new u(t,e),d=new u(1,0),g=u.sub(l,f),p=d.angleTo(g);p=a(p,i,r,o);var v=new u(n*Math.cos(p)+t,n*Math.sin(p)+e);h&&(h.x=v.x,h.y=v.y);var y=l.distanceTo(v);return y}function s(t,e,n,r,o,s){var u=0,c=Math.PI/2,l=Math.PI,f=3*Math.PI/2,d=[],g=a(u,r,o,s);g===u&&d.push(i(t,e,n,u)),g=a(c,r,o,s),g===c&&d.push(i(t,e,n,c)),g=a(l,r,o,s),g===l&&d.push(i(t,e,n,l)),g=a(f,r,o,s),g===f&&d.push(i(t,e,n,f)),d.push(i(t,e,n,r)),d.push(i(t,e,n,o));var p=1/0,v=-(1/0),y=1/0,x=-(1/0);return h.each(d,function(t){p>t.x&&(p=t.x),v<t.x&&(v=t.x),y>t.y&&(y=t.y),x<t.y&&(x=t.y)}),{minX:p,minY:y,maxX:v,maxY:x}}var u=n(2).Vector2,c=n(6),h=n(1);t.exports={nearAngle:a,projectPoint:function(t,e,n,i,r,a,s,u){var c={};return o(t,e,n,i,r,a,s,u,c),c},pointDistance:o,box:s}},function(t,e,n){var i=n(2).Vector2;t.exports={at:function(t,e,n){return(e-t)*n+t},pointDistance:function(t,e,n,r,a,o){var s=new i(n-t,r-e);if(s.isZero())return NaN;var u=s.vertical();u.normalize();var c=new i(a-t,o-e);return Math.abs(c.dot(u))},box:function(t,e,n,i,r){var a=r/2,o=Math.min(t,n),s=Math.max(t,n),u=Math.min(e,i),c=Math.max(e,i);return{minX:o-a,minY:u-a,maxX:s+a,maxY:c+a}},len:function(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))}}},function(t,e,n){function i(t,e,n,i){var r=1-i;return r*(r*t+2*i*e)+i*i*n}function r(t,e,n,r,a,s,u,c,h){var l,f,d,g,p,v,y,x=.005,m=1/0,b=1e-4,_=new o(u,c);for(p=0;p<1;p+=.05)d=new o(i(t,n,a,p),i(e,r,s,p)),f=d.distanceToSquared(_),f<m&&(l=p,m=f);for(m=1/0,y=0;y<32&&!(x<b);y++){var w=l-x,M=l+x;d=new o(i(t,n,a,w),i(e,r,s,w)),f=d.distanceToSquared(_),w>=0&&f<m?(l=w,m=f):(g=new o(i(t,n,a,M),i(e,r,s,M)),v=g.distanceToSquared(_),M<=1&&v<m?(l=M,m=v):x*=.5)}return h&&(h.x=i(t,n,a,l),h.y=i(e,r,s,l)),Math.sqrt(m)}function a(t,e,n){var i=t+n-2*e;if(s.equal(i,0))return[.5];var r=(t-e)/i;return r<=1&&r>=0?[r]:[]}var o=n(2).Vector2,s=n(6);t.exports={at:i,projectPoint:function(t,e,n,i,a,o,s,u){var c={};return r(t,e,n,i,a,o,s,u,c),c},pointDistance:r,extrema:a}},function(t,e,n){"use strict";t.exports={ScaleIn:n(121),ScaleOut:n(122),Update:n(123),Util:n(24)}},function(t,e,n){"use strict";var i=n(7),r={scaleIn:function(t,e,n,r,a){r=r?r:e,a=a?a:n,t.transform([["t",-r,-a],["s",.01,.01],["t",e,n]]),t.animate({transform:[["t",-e,-n],["s",100,100],["t",r,a]]},i.enterDuration,i.enterEasing)},scaleOut:function(t,e,n){t.animate({transform:[["t",-e,-n],["s",.01,.01],["t",e,n]]},i.leaveDuration,i.leaveEasing,function(){t.remove()})}};t.exports=r},function(t,e,n){"use strict";var i=n(1),r=n(10),a=n(38),o=n(26),s=n(23),u=n(61),c=n(7),h=n(8),l=s.ScaleIn,f=s.ScaleOut,d=function g(t){g.superclass.constructor.call(this,t),this._init()};d.ATTRS={id:"",type:null,model:{},mapper:null,group:null,controlGroup:null,keyShape:null,"class":null},i.extend(d,r),i.mixin(d,[a,o]),i.augment(d,{_init:function(){var t=this,e=t.get("type"),n=u.getShape(e);this.set("shapeManger",n)},_calculateBBox:function(){var t=this,e=t.getKeyShape(),n=e.get("parent"),i=h.getBBox(e,n);return this.set("boxStash",i),i},getBBox:function(){var t=this.get("boxStash");return t||this._calculateBBox()},getKeyShape:function(){var t=this,e=t.get("group"),n=e.get("children"),i=t.get("keyShape");return i||n[0]},getShapeObj:function(){return this.get("shapeObj")},getShapeCfg:function(){return this.get("group").get("shapeCfg")},update:function(){var t=this,e=t.get("group");e.clear(),t.draw();var n=t.get("controlGroup");n&&(n.clear(),t._showBox(n),t._showControlPoints(n))},draw:function(){var t,e,n,r,a=this,o=a.get("model"),s=a.get("mapper"),u=s.mapping(o),c=a.get("group"),h=a.get("shapeManger");if(c.set("shapeCfg",u),a.beforeDraw(),t=u.shape,i.isArray(u.shape)&&(t=u.shape[0]),t&&t.startsWith&&t.startsWith("http")){if(!u.size)return e=new Image,n=a.getCanvas(),e.src=u.shape,void(e.onload=function(){return!(!a||a.get("destroyed"))&&(o.size=[e.width,e.height],a.draw(),void n.draw())});t="image"}r=h.draw(t,u,c),a.set("shapeObj",h.getShape(t)),a.set("keyShape",r),a._setAnimate(),a.afterDraw()},_setAnimate:function(){var t=this.get("group"),e=this.getShapeObj(),n=this.get("graph");if(n){var r=i.mix(!0,{},{enterAnimate:l,leaveAnimate:f},{enterAnimate:n.enterAnimate,leaveAnimate:n.leaveAnimate},{enterAnimate:e.enterAnimate,leaveAnimate:e.leaveAnimate});t.set("enterAnimate",r.enterAnimate),t.set("leaveAnimate",r.leaveAnimate)}},getCanvas:function(){var t=this.get("group").get("canvas");return t},beforeDraw:function(){},afterDraw:function(){var t=this.getShapeObj();this._calculateBBox(),t&&t["class"]&&this.set("class",t["class"])},destroyItem:function(){},destroy:function(){var t=this,e=t.get("group");e&&e.remove();var n=t.get("controlGroup");n&&n.remove(),t.destroyItem(),d.superclass.destroy.call(this)},setActiveStatus:function(t){var e=this,n=e.get("controlGroup");if(n&&n.remove(!0),t){var i=e.get("frontGroup");n=i.addGroup({zIndex:c.zIndex.controlPoint}),e._showBox(n),e._showControlPoints(n),e.set("controlGroup",n)}else e.set("controlGroup",null)},_showBox:function(){},_show:function(){var t=this.get("group");t.show()},_hide:function(){var t=this.get("group");t.hide(),this.clearActived()},_showControlPoints:function(t){var e,n=this,r=n.getControlPoints(),a=n.get("type"),o=c[a+"ControlPointStyle"];o&&(e=o.r?o.r:5,i.each(r,function(r,a){t.addShape("rect",{elCls:"control-point",pointIndex:a,point:r,item:n,attrs:i.mix({},o,{x:r.x-e,y:r.y-e,width:2*e,height:2*e})})}))},showDelegation:function(t){var e,n=this.getDelegationPath(t),r=this.get("delegateEl"),a=t.stroke,o=i.mix(!0,{},c.delegationStyle,{path:n,stroke:a});r?r.attr(o):(e=this.get("frontGroup"),r=e.addShape("path",{attrs:o,capture:!1,zIndex:c.zIndex.delegate}),this.set("delegateEl",r))},getControlPoints:function(){},getDelegationPath:function(){},hideDelegation:function(){var t=this,e=t.get("delegateEl");e&&e.remove(),t.set("delegateEl",null)}}),t.exports=d},function(t,e,n){"use strict";var i=n(1),r=function(){};i.augment(r,{hasClass:function(t){var e=this.get("class");return!(!e||e.indexOf(t)===-1)}}),t.exports=r},function(t,e,n){"use strict";function i(t,e,n){return n?t.getShape(n):t.getShape(e)}var r=n(1),a={},o={defaultShapeType:null,getShape:function(t){var e=this,n=e[t]||e[e.defaultShapeType]||a.ShapeBase;return n},draw:function(t,e,n){var i,a=this.getShape(t),o=a.style(e);return o&&(r.isObject(e.style)?e.style=r.mix({},o,e.style):e.style=o),i=a.draw(e,n),a.afterDraw(e,n,i),i}},s={afterDraw:function(){},draw:function(){},style:function(){}};a.registGeom=function(t,e){var n=r.ucfirst(t),i=r.mix({},o,e);return a[n]=i,i.className=n,i},a.registNode=function(t,e,n){var o=a.Node,s=i(o,t,n),u=r.mix({},s,e);return o[t]=u,u},a.registEdge=function(t,e,n){var o=a.Edge,s=i(o,t,n),u=r.mix({},s,e);return o[t]=u,u},a.getShape=function(t){var e=this;return t=r.ucfirst(t),e[t]||a.ShapeBase},a.GeomShape=o,a.ShapeBase=s,t.exports=a},function(t,e,n){"use strict";var i=n(1),r=n(6),a=n(2),o=a.Vector2,s=a.Vector3,u=2,c=.01;i.mix(r,{getpointInRectQuadrant:function(t,e){var n=new o(t.maxX-t.minX,t.minY-t.maxY),i=new o(t.maxX-t.minX,t.maxY-t.minY),a=new o(t.minX-t.maxX,t.maxY-t.minY),s=new o(t.minX-t.maxX,t.minY-t.maxY),u=new o(e.x-(t.minX+t.maxX)/2,e.y-(t.minY+t.maxY)/2);return r.getVectorAngle(u,i)<r.getVectorAngle(a,i)?2:r.getVectorAngle(u,n)<r.getVectorAngle(i,n)?1:r.getVectorAngle(u,s)<r.getVectorAngle(n,s)?0:r.getVectorAngle(u,a)<r.getVectorAngle(s,a)?3:void 0},getVectorAngle:function(t,e){var n=t.angleTo(e,!0);return n},isBetween:function(t,e,n){return t>=e&&t<=n},apply:function(t,e,n){var i=new s(t.x,t.y,1);return e.apply(i,n),t.x=i.x,t.y=i.y,t},getBBox:function(t,e){e=e?e:t;var n,i,a,o,s,u=t.getBBox(),c=r.apply({x:u.minX,y:u.minY},t,e),h=r.apply({x:u.maxX,y:u.maxY},t,e);return n=c.x,i=c.y,a=h.x,o=h.y,s={minX:n,minY:i,x:n,y:i,maxX:a,maxY:o,centerX:(a+n)/2,centerY:(o+i)/2,width:a-n,height:o-i}},radixSort:function(t){var e,n,i,r,a,o,s,u=10,c=1,h=[],l=1;for(i=0;i<t.length;i++)e=parseInt(t[i].get("zIndex"),10),n=e.toString().length,e.toString().length>l&&(l=n);for(i=0;i<l;i++,c*=10,u*=10){for(r=0;r<t.length;r++)a=parseInt(t[r].get("zIndex")%u/c,10),void 0===h[a]&&(h[a]=[]),h[a].push(t[r]);for(o=0,r=0;r<h.length;r++)if(s=void 0,void 0!==h[r])for(s=h[r].shift();void 0!==s;)t[o++]=s,s=h[r].shift()}return t},scaleMatrix:function(t,e,n){e&&n.translate(-e.x,-e.y),n.scale(t,t),e&&n.translate(e.x,e.y)},invertPoint:function(t,e,n){return e=e.getInverse(),r.converPoint(t,e,n)},converPoint:function(t,e,n){void 0===n&&(n=1);var i=new s(t.x,t.y,n);return i.applyMatrix(e),{x:i.x,y:i.y}},getRectIntersect:function(t,e){var n=t.x,i=t.y,a=t.width,o=t.height,s=n+a/2,u=i+o/2,c=[],h={x:s,y:u};c.push({x:n,y:i}),c.push({x:n+a,y:i}),c.push({x:n+a,y:i+o}),c.push({x:n,y:i+o}),c.push({x:n,y:i});for(var l=null,f=1;f<c.length&&!(l=r.getLineIntersect(c[f-1],c[f],h,e));f++);return l},getLineIntersect:function(t,e,n,i){var a=r.vector(t,n),o=r.vector(t,e),s=r.vector(n,i),u=o.x*s.y-o.y*s.x,h=u*u,l=o.x*o.x+o.y*o.y,f=s.x*s.x+s.y*s.y,d=null;if(h>c*l*f){var g=(a.x*s.y-a.y*s.x)/u,p=(a.x*o.y-a.y*o.x)/u;r.isBetween(g,0,1)&&r.isBetween(p,0,1)&&(d={x:t.x+g*o.x,y:t.y+g*o.y})}return d},getSnapPoint:function(t,e){for(var n=r.distance(t[0],e,!1),i=t[0],a=1;a<t.length;a++){var o=t[a],s=r.distance(o,e,!1);s<n&&(i=o,n=s)}return i},distance:function(t,e,n){var i=(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y);return n===!1?i:Math.sqrt(i)},isInRect:function(t,e,n,i,r){return t.x<i&&t.x>e&&t.y<r&&t.y>n},isInSegment:function(t,e,n){if(!t||!e||!n)return!1;var i=r.segmentDistance(t,e,n);return i!==1/0&&i<u},segmentDistance:function(t,e,n){var i=r.vector(t,n),a=r.vector(e,n),o=r.vector(t,e),s=i.angle(o),u=a.angle(o);if(s=s-Math.PI/2>0?1:0,u=u-Math.PI/2>0?1:0,s===u)return 1/0;var c=o.angle(i),h=o.length();return Math.abs(h*Math.sin(c))},vector:function(t,e){return new o(e.x-t.x,e.y-t.y)},guid:function(){return"xxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)})}}),t.exports=r},function(t,e,n){"use strict";var i=n(3),r=function(t,e){var n,i,r,a,o,s=t.get("rootGroup");t._on("mousedown",function(t){e&&(t.shape||t.frontEvObj.shape)||(n={x:t.domX,y:t.domY},i=s.getMatrix())}),t._on("dragmove",function(e){n&&(a=e.domX-n.x,o=e.domY-n.y,r=i.clone(),r.translate(a,o),t.updateMatrix(r),t.refresh())}),t._on("mouseup",function(){n&&(t.draw(!1),n=void 0,i=void 0,a=void 0,o=void 0,r=void 0)})};i.dragCanvas=r,t.exports=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a="https://kcart.alipay.com/web/bi.do",o=n(1),s=function(){function t(e){i(this,t);var n=this,r=e||{},s=new Image;o.mix(n,{image:s,server:a},r)}return r(t,[{key:"log",value:function(t){var e=this,n=t||{},i=o.mix({pg:document.URL,r:(new Date).getTime()},n),r=encodeURIComponent(JSON.stringify([i]));e.image.src=e.server+"?BIProfile=merge&d="+r}}]),t}();e["default"]=s,t.exports=e["default"]},function(t,e,n){var i=n(97);i.Tween=n(34),i.Ease=n(32),t.exports=i},function(t,e){var n={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)))},easeOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*t)*Math.sin((1*t-e)*(2*Math.PI)/n)+1)},easeInOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:2==(t/=.5)?1:(n||(n=1*(.3*1.5)),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),t<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)):i*Math.pow(2,-10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)*.5+1)},easeInBack:function(t){var e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:function(t){return 1-n.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?1*(7.5625*t*t):t<2/2.75?1*(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return t<.5?.5*n.easeInBounce(2*t):.5*n.easeOutBounce(2*t-1)+.5}};t.exports=n},function(t,e,n){"use strict";var i=n(1),r=n(86),a={duration:"duration",destroy:"destroy",delay:"delay",repeat:"repeat",onUpdate:"onUpdate"},o={interpolation:r.interpolation,getFrame:function(t,e,n,r){var a,s,u,c={attrs:{},matrix:e.matrix.clone()},h=n.onUpdate;for(u in n.attrs)if(e.attrs[u]!=n.attrs[u])if("path"===u)t>=1?c.attrs[u]=n.attrs[u]:e.pathStash&&n.pathStash?c.attrs[u]=o.pathInterpolation(t,e.pathStash,n.pathStash):(s=i.path2curve(e.attrs[u],n.attrs[u]),e.pathStash=s[0],n.pathStash=s[1]);else{if(a=o.interpolation(e.attrs[u],n.attrs[u]),!i.isFunction(a))return c;c.attrs[u]=a(t)}if(n.matrix&&e.matrix)if("matrix3"===n.matrix.type){if(a=o.interpolation(e.matrix,n.matrix),!i.isFunction(a))return c;c.matrix=a(t)}else i.isFunction(n.matrix)&&(c.matrix=n.matrix.call(r,c.matrix,t));return i.isFunction(h)&&h(c,t),c},pathInterpolation:function(t,e,n){for(var r,a,s,u,c=[],h=0;h<e.length;h++){a=e[h],s=n[h],r=[];for(var l=0;l<a.length;l++)if(i.isNumeric(a[l])){if(u=o.interpolation(a[l],s[l]),!i.isFunction(u))return a[l];r.push(u(t))}else r.push(a[l]);c.push(r)}return c},getKeyFrameByProps:function(t,e){var n=[],r=o.props2frame(t,e),a={
attrs:o.getTargetAttrs(t,r.attrs),matrix:t.getMatrix().clone()};return i.isFunction(e.onUpdate)&&(r.onUpdate=e.onUpdate),n[0]=a,n[1]=r,n},props2frame:function(t,e){var n={matrix:null,attrs:{}};return i.each(e,function(i,r){"transform"!==r||e.k?"matrix"===r?n.matrix=i:a[r]||(n.attrs[r]=i):n.matrix=o.transform(t.getMatrix(),i)}),n},transform:function(t,e){return t=t.clone(),i.each(e,function(e){switch(e[0]){case"t":t.translate(e[1],e[2]);break;case"s":t.scale(e[1],e[2]);break;case"r":t.rotate(e[1]);break;case"m":t.multiply(e[1]);break;default:return!1}}),t},getTargetAttrs:function(t,e){var n,i={};for(n in e)i[n]=t.attr(n);return i}};t.exports=o},function(t,e,n){"use strict";var i=n(10),r=n(33),a=n(19),o=n(32),s=function(t){s.superclass.constructor.call(this,t),this._init()};a.extend(s,i),s.ATTRS={type:"tween",canvas:null,target:null,startTime:null,endTime:null,duration:null,ratio:0,destroyTarget:!1,needsDestroy:!1,available:!0,repeat:!1,callBack:null,currentFrame:null,startKeyFrame:{attrs:null,matrix:null},endKeyFrame:{attrs:null,matrix:null}},a.augment(s,{_init:function(){var t=this.get("startTime"),e=this.get("duration");this.set("endTime",t+e)},_autoSetStartKeyFrame:function(){var t=this.get("target"),e=this.get("endKeyFrame"),n=a.mix({},r.getTargetAttrs(t,e.attrs)),i=t.getMatrix().clone();this.set("startKeyFrame",{attrs:n,matrix:i})},tryStep:function(t){var e=this.get("startTime"),n=(this.get("duration"),this.get("startKeyFrame")),i=this.get("target"),r=e;return t>=r&&i&&!i.get("destroyed")?(n.attrs||n.matrix||this._autoSetStartKeyFrame(),this.step(t)):!(i&&!i.get("destroyed"))&&(this.set("needsDestroy",!0),!1)},step:function(t){var e,n,i,s=this.get("target"),u=this.get("startTime"),c=t-u,h=this.get("duration"),l=this.get("startKeyFrame"),f=this.get("endKeyFrame"),d=this.get("easing");return a.isFunction(d)||(d=o[d]?o[d]:o.linear),n=c/h,n=n<=0?0:n>=1?1:n,i=d(n),e=r.getFrame(i,l,f,s),e.attrs&&s.attr(e.attrs),e.matrix&&s.setMatrix(e.matrix),this.set("ratio",n),this.set("currentFrame",e),this.updateStatus(),s},updateStatus:function(){var t=this.get("ratio"),e=this.get("callBack"),n=this.get("destroyTarget"),i=this.get("target"),r=this.get("repeat");if(t>=1)if(r){var a=this.get("startTime"),o=this.get("endTime"),s=this.get("duration");this.set("startTime",a+s),this.set("endTime",o+s),this.reset()}else this.set("needsDestroy",!0),e&&e.call(i),n&&!i.get("destroyed")&&i.remove(!0)},reset:function(){var t=this.get("target"),e=this.get("startKeyFrame");e.attrs&&t.attr(e.attrs),e.matrix&&t.setMatrix(e.matrix),this.set("ratio",0),this.set("needsDestroy",!1)},play:function(){var t=this,e=(t.get("target"),t.get("canvas")),n=t.get("available"),i=t.get("ratio"),r=t.get("callBack"),o=+new Date;return n?(t.step(o),e&&e.get("destroyed")!==!0&&e.draw(),void a.requestAnimationFrame(function(){return i>=1?(r&&r(),void t.destroy()):void(i>=0&&t.play())})):void t.destroy()}}),t.exports=s},function(t,e,n){"use strict";var i=(n(1),"\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029"),r=new RegExp("([a-z])["+i+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+i+"]*,?["+i+"]*)+)","ig"),a=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+i+"]*,?["+i+"]*","ig"),o=function(t){if(!t)return null;if(typeof t==typeof[])return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(r,function(t,i,r){var o=[],s=i.toLowerCase();if(r.replace(a,function(t,e){e&&o.push(+e)}),"m"==s&&o.length>2&&(n.push([i].concat(o.splice(0,2))),s="l",i="m"==i?"l":"L"),"o"==s&&1==o.length&&n.push([i,o[0]]),"r"==s)n.push([i].concat(o));else for(;o.length>=e[s]&&(n.push([i].concat(o.splice(0,e[s]))),e[s]););}),n},s=function(t,e){for(var n=[],i=0,r=t.length;r-2*!e>i;i+=2){var a=[{x:+t[i-2],y:+t[i-1]},{x:+t[i],y:+t[i+1]},{x:+t[i+2],y:+t[i+3]},{x:+t[i+4],y:+t[i+5]}];e?i?r-4==i?a[3]={x:+t[0],y:+t[1]}:r-2==i&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[r-2],y:+t[r-1]}:r-4==i?a[3]=a[2]:i||(a[0]={x:+t[i],y:+t[i+1]}),n.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return n},u=function(t,e,n,i,r){if(null==r&&null==i&&(i=n),t=+t,e=+e,n=+n,i=+i,null!=r)var a=Math.PI/180,o=t+n*Math.cos(-i*a),s=t+n*Math.cos(-r*a),u=e+n*Math.sin(-i*a),c=e+n*Math.sin(-r*a),h=[["M",o,u],["A",n,n,0,+(r-i>180),0,s,c]];else h=[["M",t,e],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]];return h},c=function(t){if(t=o(t),!t||!t.length)return[["M",0,0]];var e,n=[],i=0,r=0,a=0,c=0,h=0;"M"==t[0][0]&&(i=+t[0][1],r=+t[0][2],a=i,c=r,h++,n[0]=["M",i,r]);for(var l,f,d=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),g=h,p=t.length;g<p;g++){if(n.push(l=[]),f=t[g],e=f[0],e!=e.toUpperCase())switch(l[0]=e.toUpperCase(),l[0]){case"A":l[1]=f[1],l[2]=f[2],l[3]=f[3],l[4]=f[4],l[5]=f[5],l[6]=+f[6]+i,l[7]=+f[7]+r;break;case"V":l[1]=+f[1]+r;break;case"H":l[1]=+f[1]+i;break;case"R":for(var v=[i,r].concat(f.slice(1)),y=2,x=v.length;y<x;y++)v[y]=+v[y]+i,v[++y]=+v[y]+r;n.pop(),n=n.concat(s(v,d));break;case"O":n.pop(),v=u(i,r,f[1],f[2]),v.push(v[0]),n=n.concat(v);break;case"U":n.pop(),n=n.concat(u(i,r,f[1],f[2],f[3])),l=["U"].concat(n[n.length-1].slice(-2));break;case"M":a=+f[1]+i,c=+f[2]+r;default:for(y=1,x=f.length;y<x;y++)l[y]=+f[y]+(y%2?i:r)}else if("R"==e)v=[i,r].concat(f.slice(1)),n.pop(),n=n.concat(s(v,d)),l=["R"].concat(f.slice(-2));else if("O"==e)n.pop(),v=u(i,r,f[1],f[2]),v.push(v[0]),n=n.concat(v);else if("U"==e)n.pop(),n=n.concat(u(i,r,f[1],f[2],f[3])),l=["U"].concat(n[n.length-1].slice(-2));else for(var m=0,b=f.length;m<b;m++)l[m]=f[m];if(e=e.toUpperCase(),"O"!=e)switch(l[0]){case"Z":i=+a,r=+c;break;case"H":i=l[1];break;case"V":r=l[1];break;case"M":a=l[l.length-2],c=l[l.length-1];default:i=l[l.length-2],r=l[l.length-1]}}return n},h=function(t,e,n,i){return[t,e,n,i,n,i]},l=function(t,e,n,i,r,a){var o=1/3,s=2/3;return[o*t+s*n,o*e+s*i,o*r+s*n,o*a+s*i,r,a]},f=function(t,e,n,i,r,a,o,s,u,c){n===i&&(n+=1);var h,l=120*Math.PI/180,d=Math.PI/180*(+r||0),g=[],p=function(t,e,n){var i=t*Math.cos(n)-e*Math.sin(n),r=t*Math.sin(n)+e*Math.cos(n);return{x:i,y:r}};if(c)S=c[0],A=c[1],w=c[2],M=c[3];else{h=p(t,e,-d),t=h.x,e=h.y,h=p(s,u,-d),s=h.x,u=h.y,t===s&&e===u&&(s+=1,u+=1);var v=(Math.cos(Math.PI/180*r),Math.sin(Math.PI/180*r),(t-s)/2),y=(e-u)/2,x=v*v/(n*n)+y*y/(i*i);x>1&&(x=Math.sqrt(x),n=x*n,i=x*i);var m=n*n,b=i*i,_=(a==o?-1:1)*Math.sqrt(Math.abs((m*b-m*y*y-b*v*v)/(m*y*y+b*v*v))),w=_*n*y/i+(t+s)/2,M=_*-i*v/n+(e+u)/2,S=Math.asin(((e-M)/i).toFixed(9)),A=Math.asin(((u-M)/i).toFixed(9));S=t<w?Math.PI-S:S,A=s<w?Math.PI-A:A,S<0&&(S=2*Math.PI+S),A<0&&(A=2*Math.PI+A),o&&S>A&&(S-=2*Math.PI),!o&&A>S&&(A-=2*Math.PI)}var P=A-S;if(Math.abs(P)>l){var E=A,T=s,C=u;A=S+l*(o&&A>S?1:-1),s=w+n*Math.cos(A),u=M+i*Math.sin(A),g=f(s,u,n,i,r,0,o,T,C,[A,E,w,M])}P=A-S;var I=Math.cos(S),k=Math.sin(S),B=Math.cos(A),O=Math.sin(A),F=Math.tan(P/4),N=4/3*n*F,D=4/3*i*F,j=[t,e],z=[t+N*k,e-D*I],R=[s+N*O,u-D*B],Y=[s,u];if(z[0]=2*j[0]-z[0],z[1]=2*j[1]-z[1],c)return[z,R,Y].concat(g);g=[z,R,Y].concat(g).join().split(",");for(var X=[],G=0,L=g.length;G<L;G++)X[G]=G%2?p(g[G-1],g[G],d).y:p(g[G],g[G+1],d).x;return X},d=function(t,e){for(var n=c(t),i=e&&c(e),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=(function(t,e,n){var i,r;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(f.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"==n||"S"==n?(i=2*e.x-e.bx,r=2*e.y-e.by):(i=e.x,r=e.y),t=["C",i,r].concat(t.slice(1));break;case"T":"Q"==n||"T"==n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(l(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(l(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(h(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(h(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(h(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(h(e.x,e.y,e.X,e.Y))}return t}),s=function(t,e){if(t[e].length>7){t[e].shift();for(var r=t[e];r.length;)d[e]="A",i&&(g[e]="A"),t.splice(e++,0,["C"].concat(r.splice(0,6)));t.splice(e,1),x=Math.max(n.length,i&&i.length||0)}},u=function(t,e,r,a,o){t&&e&&"M"==t[o][0]&&"M"!=e[o][0]&&(e.splice(o,0,["M",a.x,a.y]),r.bx=0,r.by=0,r.x=t[o][1],r.y=t[o][2],x=Math.max(n.length,i&&i.length||0))},d=[],g=[],p="",v="",y=0,x=Math.max(n.length,i&&i.length||0);y<x;y++){n[y]&&(p=n[y][0]),"C"!=p&&(d[y]=p,y&&(v=d[y-1])),n[y]=o(n[y],r,v),"A"!=d[y]&&"C"==p&&(d[y]="C"),s(n,y),i&&(i[y]&&(p=i[y][0]),"C"!=p&&(g[y]=p,y&&(v=g[y-1])),i[y]=o(i[y],a,v),"A"!=g[y]&&"C"==p&&(g[y]="C"),s(i,y)),u(n,i,r,a,y),u(i,n,a,r,y);var m=n[y],b=i&&i[y],_=m.length,w=i&&b.length;r.x=m[_-2],r.y=m[_-1],r.bx=parseFloat(m[_-4])||r.x,r.by=parseFloat(m[_-3])||r.y,a.bx=i&&(parseFloat(b[w-4])||a.x),a.by=i&&(parseFloat(b[w-3])||a.y),a.x=i&&b[w-2],a.y=i&&b[w-1]}return i?[n,i]:n},g=/,?([a-z]),?/gi,p=function(t){return t.join(",").replace(g,"$1")},v={toArray:o,toString:p,toCurve:d,toAbsolute:c,catmullRomToBezier:s};t.exports=v},function(t,e){"use strict";function n(){var t=document.createElement("i");return t.title="Web Colour Picker",t.style.display="none",document.body.appendChild(t),t}var i=/rgb\((\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,r={},a=null;t.exports={toRGB:function(t){a||(a=n());var e;if(r[t])e=r[t];else{a.style.color=t,e=document.defaultView.getComputedStyle(a,"").getPropertyValue("color");var o=i.exec(e);o.shift(),e=this.arr2rgb(o),r[t]=e}return e},toHex:function(t){return t=Math.round(t),t=t.toString(16),1===t.length&&(t="0"+t),t},hsl2Rgb:function(t){var e=t[0],n=t[1],i=t[2],r={};if(0===n)r.r=r.g=r.b=i;else{var a=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t},o=i<=.5?i*(1+n):i+n-i*n,s=2*i-o;r.r=a(s,o,e+1/3),r.g=a(s,o,e),r.b=a(s,o,e-1/3)}return r.r=Math.min(Math.round(255*r.r),255),r.g=Math.min(Math.round(255*r.g),255),r.b=Math.min(Math.round(255*r.b),255),"#"+this.toHex(r.r)+this.toHex(r.g)+this.toHex(r.b)},rgb2hsl:function(t){var e,n,i,r=this.rgb2arr(t),a=r[0]/255,o=r[1]/255,s=r[2]/255,u=Math.min(a,o,s),c=Math.max(a,o,s),h=c-u;return c===u?e=0:a===c?e=(o-s)/h:o===c?e=2+(s-a)/h:s===c&&(e=4+(a-o)/h),e=Math.min(60*e,360),e<0&&(e+=360),i=(u+c)/2,n=c===u?0:i<=.5?h/(c+u):h/(2-c-u),[e/360,n,i]},arr2rgb:function(t){return"#"+this.toHex(t[0])+this.toHex(t[1])+this.toHex(t[2])},rgb2arr:function(t){var e=[];return e.push(parseInt(t.substr(1,2),16)),e.push(parseInt(t.substr(3,2),16)),e.push(parseInt(t.substr(5,2),16)),e}}},function(t,e,n){"use strict";var i=n(1),r=Math.PI,a="\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",o=new RegExp("([a-z])["+a+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+a+"]*,?["+a+"]*)+)","ig"),s=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+a+"]*,?["+a+"]*","ig"),u=function(t){if(!t)return null;if(typeof t==typeof[])return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(o,function(t,i,r){var a=[],o=i.toLowerCase();if(r.replace(s,function(t,e){e&&a.push(+e)}),"m"==o&&a.length>2&&(n.push([i].concat(a.splice(0,2))),o="l",i="m"==i?"l":"L"),"o"==o&&1==a.length&&n.push([i,a[0]]),"r"==o)n.push([i].concat(a));else for(;a.length>=e[o]&&(n.push([i].concat(a.splice(0,e[o]))),e[o]););}),n},c=function(t,e){for(var n=[],i=0,r=t.length;r-2*!e>i;i+=2){var a=[{x:+t[i-2],y:+t[i-1]},{x:+t[i],y:+t[i+1]},{x:+t[i+2],y:+t[i+3]},{x:+t[i+4],y:+t[i+5]}];e?i?r-4==i?a[3]={x:+t[0],y:+t[1]}:r-2==i&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[r-2],y:+t[r-1]}:r-4==i?a[3]=a[2]:i||(a[0]={x:+t[i],y:+t[i+1]}),n.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return n},h=function(t,e,n,i,r){if(null==r&&null==i&&(i=n),t=+t,e=+e,n=+n,i=+i,null!=r)var a=Math.PI/180,o=t+n*Math.cos(-i*a),s=t+n*Math.cos(-r*a),u=e+n*Math.sin(-i*a),c=e+n*Math.sin(-r*a),h=[["M",o,u],["A",n,n,0,+(r-i>180),0,s,c]];else h=[["M",t,e],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]];return h},l=function(t){if(t=u(t),!t||!t.length)return[["M",0,0]];var e,n=[],i=0,r=0,a=0,o=0,s=0;"M"==t[0][0]&&(i=+t[0][1],r=+t[0][2],a=i,o=r,s++,n[0]=["M",i,r]);for(var l,f,d=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),g=s,p=t.length;g<p;g++){if(n.push(l=[]),f=t[g],e=f[0],e!=e.toUpperCase())switch(l[0]=e.toUpperCase(),l[0]){case"A":l[1]=f[1],l[2]=f[2],l[3]=f[3],l[4]=f[4],l[5]=f[5],l[6]=+f[6]+i,l[7]=+f[7]+r;break;case"V":l[1]=+f[1]+r;break;case"H":l[1]=+f[1]+i;break;case"R":for(var v=[i,r].concat(f.slice(1)),y=2,x=v.length;y<x;y++)v[y]=+v[y]+i,v[++y]=+v[y]+r;n.pop(),n=n.concat(c(v,d));break;case"O":n.pop(),v=h(i,r,f[1],f[2]),v.push(v[0]),n=n.concat(v);break;case"U":n.pop(),n=n.concat(h(i,r,f[1],f[2],f[3])),l=["U"].concat(n[n.length-1].slice(-2));break;case"M":a=+f[1]+i,o=+f[2]+r;default:for(y=1,x=f.length;y<x;y++)l[y]=+f[y]+(y%2?i:r)}else if("R"==e)v=[i,r].concat(f.slice(1)),n.pop(),n=n.concat(c(v,d)),l=["R"].concat(f.slice(-2));else if("O"==e)n.pop(),v=h(i,r,f[1],f[2]),v.push(v[0]),n=n.concat(v);else if("U"==e)n.pop(),n=n.concat(h(i,r,f[1],f[2],f[3])),l=["U"].concat(n[n.length-1].slice(-2));else for(var m=0,b=f.length;m<b;m++)l[m]=f[m];if(e=e.toUpperCase(),"O"!=e)switch(l[0]){case"Z":i=+a,r=+o;break;case"H":i=l[1];break;case"V":r=l[1];break;case"M":a=l[l.length-2],o=l[l.length-1];default:i=l[l.length-2],r=l[l.length-1]}}return n},f=function(t,e,n,i){return[t,e,n,i,n,i]},d=function(t,e,n,i,r,a){var o=1/3,s=2/3;return[o*t+s*n,o*e+s*i,o*r+s*n,o*a+s*i,r,a]},g=function(t,e,n,i,r,a,o,s,u,c){n===i&&(n+=1);var h,l=120*Math.PI/180,f=Math.PI/180*(+r||0),d=[],p=function(t,e,n){var i=t*Math.cos(n)-e*Math.sin(n),r=t*Math.sin(n)+e*Math.cos(n);return{x:i,y:r}};if(c)S=c[0],A=c[1],w=c[2],M=c[3];else{h=p(t,e,-f),t=h.x,e=h.y,h=p(s,u,-f),s=h.x,u=h.y,t===s&&e===u&&(s+=1,u+=1);var v=(Math.cos(Math.PI/180*r),Math.sin(Math.PI/180*r),(t-s)/2),y=(e-u)/2,x=v*v/(n*n)+y*y/(i*i);x>1&&(x=Math.sqrt(x),n=x*n,i=x*i);var m=n*n,b=i*i,_=(a==o?-1:1)*Math.sqrt(Math.abs((m*b-m*y*y-b*v*v)/(m*y*y+b*v*v))),w=_*n*y/i+(t+s)/2,M=_*-i*v/n+(e+u)/2,S=Math.asin(((e-M)/i).toFixed(9)),A=Math.asin(((u-M)/i).toFixed(9));S=t<w?Math.PI-S:S,A=s<w?Math.PI-A:A,S<0&&(S=2*Math.PI+S),A<0&&(A=2*Math.PI+A),o&&S>A&&(S-=2*Math.PI),!o&&A>S&&(A-=2*Math.PI)}var P=A-S;if(Math.abs(P)>l){var E=A,T=s,C=u;A=S+l*(o&&A>S?1:-1),s=w+n*Math.cos(A),u=M+i*Math.sin(A),d=g(s,u,n,i,r,0,o,T,C,[A,E,w,M])}P=A-S;var I=Math.cos(S),k=Math.sin(S),B=Math.cos(A),O=Math.sin(A),F=Math.tan(P/4),N=4/3*n*F,D=4/3*i*F,j=[t,e],z=[t+N*k,e-D*I],R=[s+N*O,u-D*B],Y=[s,u];if(z[0]=2*j[0]-z[0],z[1]=2*j[1]-z[1],c)return[z,R,Y].concat(d);d=[z,R,Y].concat(d).join().split(",");for(var X=[],G=0,L=d.length;G<L;G++)X[G]=G%2?p(d[G-1],d[G],f).y:p(d[G],d[G+1],f).x;return X},p=function(t,e){for(var n=l(t),i=e&&l(e),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=(function(t,e,n){var i,r;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(g.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"==n||"S"==n?(i=2*e.x-e.bx,r=2*e.y-e.by):(i=e.x,r=e.y),t=["C",i,r].concat(t.slice(1));break;case"T":"Q"==n||"T"==n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(d(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(d(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(f(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(f(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(f(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(f(e.x,e.y,e.X,e.Y))}return t}),s=function(t,e){if(t[e].length>7){t[e].shift();for(var r=t[e];r.length;)c[e]="A",i&&(h[e]="A"),t.splice(e++,0,["C"].concat(r.splice(0,6)));t.splice(e,1),x=Math.max(n.length,i&&i.length||0)}},u=function(t,e,r,a,o){t&&e&&"M"==t[o][0]&&"M"!=e[o][0]&&(e.splice(o,0,["M",a.x,a.y]),r.bx=0,r.by=0,r.x=t[o][1],r.y=t[o][2],x=Math.max(n.length,i&&i.length||0))},c=[],h=[],p="",v="",y=0,x=Math.max(n.length,i&&i.length||0);y<x;y++){n[y]&&(p=n[y][0]),"C"!=p&&(c[y]=p,y&&(v=c[y-1])),n[y]=o(n[y],r,v),"A"!=c[y]&&"C"==p&&(c[y]="C"),s(n,y),i&&(i[y]&&(p=i[y][0]),"C"!=p&&(h[y]=p,y&&(v=h[y-1])),i[y]=o(i[y],a,v),"A"!=h[y]&&"C"==p&&(h[y]="C"),s(i,y)),u(n,i,r,a,y),u(i,n,a,r,y);var m=n[y],b=i&&i[y],_=m.length,w=i&&b.length;r.x=m[_-2],r.y=m[_-1],r.bx=parseFloat(m[_-4])||r.x,r.by=parseFloat(m[_-3])||r.y,a.bx=i&&(parseFloat(b[w-4])||a.x),a.by=i&&(parseFloat(b[w-3])||a.y),a.x=i&&b[w-2],a.y=i&&b[w-1]}return i?[n,i]:n},v=function(t,e,n,i){return null==t&&(t=e=n=i=0),null==e&&(e=t.y,n=t.width,i=t.height,t=t.x),{x:t,y:e,w:n,h:i,cx:t+n/2,cy:e+i/2}},y=/,?([a-z]),?/gi,x=function(t){return t.join(",").replace(y,"$1")},m=function(t,e,n,i,r){var a=-3*e+9*n-9*i+3*r,o=t*a+6*e-12*n+6*i;return t*o-3*e+3*n},b=function(t,e,n,i,r,a,o,s,u){null==u&&(u=1),u=u>1?1:u<0?0:u;for(var c=u/2,h=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,g=0;g<h;g++){var p=c*l[g]+c,v=m(p,t,n,r,o),y=m(p,e,i,a,s),x=v*v+y*y;d+=f[g]*Math.sqrt(x)}return c*d},_=function(t,e,n,i,r,a,o,s){for(var u,c,h,l,f,d,g,p,v=[],y=[[],[]],x=0;x<2;++x)if(0==x?(c=6*t-12*n+6*r,u=-3*t+9*n-9*r+3*o,h=3*n-3*t):(c=6*e-12*i+6*a,u=-3*e+9*i-9*a+3*s,h=3*i-3*e),Math.abs(u)<1e-12){if(Math.abs(c)<1e-12)continue;l=-h/c,0<l&&l<1&&v.push(l)}else g=c*c-4*h*u,p=Math.sqrt(g),g<0||(f=(-c+p)/(2*u),0<f&&f<1&&v.push(f),d=(-c-p)/(2*u),0<d&&d<1&&v.push(d));for(var m,b=v.length,_=b;b--;)l=v[b],m=1-l,y[0][b]=m*m*m*t+3*m*m*l*n+3*m*l*l*r+l*l*l*o,y[1][b]=m*m*m*e+3*m*m*l*i+3*m*l*l*a+l*l*l*s;return y[0][_]=t,y[1][_]=e,y[0][_+1]=o,y[1][_+1]=s,y[0].length=y[1].length=_+2,{min:{x:Math.min.apply(0,y[0]),y:Math.min.apply(0,y[1])},max:{x:Math.max.apply(0,y[0]),y:Math.max.apply(0,y[1])}}},w=function(t,e,n,i,r,a,o,s){if(!(Math.max(t,n)<Math.min(r,o)||Math.min(t,n)>Math.max(r,o)||Math.max(e,i)<Math.min(a,s)||Math.min(e,i)>Math.max(a,s))){var u=(t*i-e*n)*(r-o)-(t-n)*(r*s-a*o),c=(t*i-e*n)*(a-s)-(e-i)*(r*s-a*o),h=(t-n)*(a-s)-(e-i)*(r-o);if(h){var l=u/h,f=c/h,d=+l.toFixed(2),g=+f.toFixed(2);if(!(d<+Math.min(t,n).toFixed(2)||d>+Math.max(t,n).toFixed(2)||d<+Math.min(r,o).toFixed(2)||d>+Math.max(r,o).toFixed(2)||g<+Math.min(e,i).toFixed(2)||g>+Math.max(e,i).toFixed(2)||g<+Math.min(a,s).toFixed(2)||g>+Math.max(a,s).toFixed(2)))return{x:l,y:f}}}},M=function(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height},S=function(t,e,n,i,r){if(r)return[["M",+t+ +r,e],["l",n-2*r,0],["a",r,r,0,0,1,r,r],["l",0,i-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-n,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-i],["a",r,r,0,0,1,r,-r],["z"]];var a=[["M",t,e],["l",n,0],["l",0,i],["l",-n,0],["z"]];return a.toString=toString,a},v=function(t,e,n,i){return null==t&&(t=e=n=i=0),null==e&&(e=t.y,n=t.width,i=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:i,h:i,x2:t+n,y2:e+i,cx:t+n/2,cy:e+i/2,r1:Math.min(n,i)/2,r2:Math.max(n,i)/2,r0:Math.sqrt(n*n+i*i)/2,path:S(t,e,n,i),vb:[t,e,n,i].join(" ")}},A=function(t,e){return t=v(t),e=v(e),M(e,t.x,t.y)||M(e,t.x2,t.y)||M(e,t.x,t.y2)||M(e,t.x2,t.y2)||M(t,e.x,e.y)||M(t,e.x2,e.y)||M(t,e.x,e.y2)||M(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},P=function(t,e,n,r,a,o,s,u){i.isArray(t)||(t=[t,e,n,r,a,o,s,u]);var c=_.apply(null,t);return v(c.min.x,c.min.y,c.max.x-c.min.x,c.max.y-c.min.y)},E=function(t,e,n,i,a,o,s,u,c){var h=1-c,l=Math.pow(h,3),f=Math.pow(h,2),d=c*c,g=d*c,p=l*t+3*f*c*n+3*h*c*c*a+g*s,v=l*e+3*f*c*i+3*h*c*c*o+g*u,y=t+2*c*(n-t)+d*(a-2*n+t),x=e+2*c*(i-e)+d*(o-2*i+e),m=n+2*c*(a-n)+d*(s-2*a+n),b=i+2*c*(o-i)+d*(u-2*o+i),_=h*t+c*n,w=h*e+c*i,M=h*a+c*s,S=h*o+c*u,A=90-180*Math.atan2(y-m,x-b)/r;return{x:p,y:v,m:{x:y,y:x},n:{x:m,y:b},start:{x:_,y:w},end:{x:M,y:S},alpha:A}},T=function(t,e,n){var i=P(t),r=P(e);if(!A(i,r))return n?0:[];for(var a=b.apply(0,t),o=b.apply(0,e),s=~~(a/8),u=~~(o/8),c=[],h=[],l={},f=n?0:[],d=0;d<s+1;d++){var g=E.apply(0,t.concat(d/s));c.push({x:g.x,y:g.y,t:d/s})}for(d=0;d<u+1;d++)g=E.apply(0,e.concat(d/u)),h.push({x:g.x,y:g.y,t:d/u});for(d=0;d<s;d++)for(var p=0;p<u;p++){var v=c[d],y=c[d+1],x=h[p],m=h[p+1],_=Math.abs(y.x-v.x)<.001?"y":"x",M=Math.abs(m.x-x.x)<.001?"y":"x",S=w(v.x,v.y,y.x,y.y,x.x,x.y,m.x,m.y);if(S){if(l[S.x.toFixed(4)]==S.y.toFixed(4))continue;l[S.x.toFixed(4)]=S.y.toFixed(4);var T=v.t+Math.abs((S[_]-v[_])/(y[_]-v[_]))*(y.t-v.t),C=x.t+Math.abs((S[M]-x[M])/(m[M]-x[M]))*(m.t-x.t);T>=0&&T<=1&&C>=0&&C<=1&&(n?f++:f.push({x:S.x,y:S.y,t1:T,t2:C}))}}return f},C=function(t,e,n){t=p(t),e=p(e);for(var i,r,a,o,s,u,c,h,l,f,d=n?0:[],g=0,v=t.length;g<v;g++){var y=t[g];if("M"==y[0])i=s=y[1],r=u=y[2];else{"C"==y[0]?(l=[i,r].concat(y.slice(1)),i=l[6],r=l[7]):(l=[i,r,i,r,s,u,s,u],i=s,r=u);for(var x=0,m=e.length;x<m;x++){var b=e[x];if("M"==b[0])a=c=b[1],o=h=b[2];else{"C"==b[0]?(f=[a,o].concat(b.slice(1)),a=f[6],o=f[7]):(f=[a,o,a,o,c,h,c,h],a=c,o=h);var _=T(l,f,n);if(n)d+=_;else{for(var w=0,M=_.length;w<M;w++)_[w].segment1=g,_[w].segment2=x,_[w].bez1=l,_[w].bez2=f;d=d.concat(_)}}}}}return d},I=function(t,e){return C(t,e)},k={toArray:u,toString:x,toCurve:p,toAbsolute:l,catmullRomToBezier:c,rectPath:S,intersection:I};t.exports=k},function(t,e,n){var i=n(106);i.Group=n(107),t.exports=i},function(t,e){t.exports={prefix:"g",backupContext:document.createElement("canvas").getContext("2d"),debug:!1,warn:function(){}}},function(t,e,n){var i=n(1),r=n(114),a=n(115),o=n(113),s=n(41),u=n(110),c=["fillStyle","font","globalAlpha","lineCap","lineWidth","lineJoin","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline","lineDash"],h=function(t){this.__cfg={zIndex:0,capture:!0,visible:!0,destroyed:!1},i.simpleMix(this.__cfg,this.getDefaultCfg(),t),this.initAttrs(this.__cfg.attrs),this.initTransform(),this.initEventDispatcher(),this.init()};h.CFG={id:null,zIndex:0,canvas:null,parent:null,capture:!0,context:null,visible:!0,destroyed:!1},i.augment(h,r,u,a,o,{init:function(){this.setSilent("animable",!0);var t=this.__attrs;t&&t.rotate&&this.rotateAtStart(t.rotate)},getParent:function(){return this.get("parent")},getDefaultCfg:function(){return{}},set:function(t,e){var n="__set"+i.ucfirst(t);return this[n]&&(e=this[n](e)),this.__cfg[t]=e,this},setSilent:function(t,e){this.__cfg[t]=e},get:function(t){return this.__cfg[t]},draw:function(t){this.get("destroyed")||this.get("visible")&&(this.setContext(t),this.drawInner(t),this.restoreContext(t))},setContext:function(t){var e=this.__attrs.clip;t.save(),e&&(e.resetTransform(t),e.createPath(t),t.clip()),this.resetContext(t),this.resetTransform(t)},restoreContext:function(t){t.restore()},resetContext:function(t){var e=this.__attrs;if(!this.isGroup)for(var n in e)if(c.indexOf(n)>-1){var r=e[n];"fillStyle"===n&&(r=s.parseStyle(r,this)),"strokeStyle"===n&&(r=s.parseStyle(r,this)),"lineDash"===n&&t.setLineDash?i.isArray(r)?t.setLineDash(r):i.isString(r)&&t.setLineDash(r.split(" ")):t[n]=r}},drawInner:function(){},show:function(){return this.set("visible",!0),this},hide:function(){return this.set("visible",!1),this},remove:function(t){if(void 0===t&&(t=!0),this.get("parent")){var e=this.get("parent"),n=e.get("children");i.remove(n,this)}return t&&this.destroy(),this},destroy:function(){var t=this.get("destroyed");t||(this.__cfg={},this.__attrs=null,this.__listeners=null,this.__m=null,this.set("destroyed",!0))},__setZIndex:function(t){return this.__cfg.zIndex=t,i.notNull(this.get("parent"))&&this.get("parent").sort(),t},__setAttrs:function(t){return this.attr(t),t},clone:function(){return i.clone(this)},getBBox:function(){return{minX:0,maxX:0,minY:0,maxY:0}}}),t.exports=h},function(t,e,n){function i(t,e){if(void 0===e)return t;t=new h(t),t.multiplyA(e);var n=t.getType();return"hsl"===n?t.getHSLStyle():"rgb"===n?t.getRGBStyle():void 0}function r(t,e,n){var r=t.match(v);u.each(r,function(t){t=t.split(":");var r=i(t[1],n);e.addColorStop(t[0],r)})}function a(t,e,n){var i,a,o=d.exec(t),s=c.mod(c.degreeToRad(parseFloat(o[1])),2*Math.PI),u=o[2],h=e.getBBox();s>=0&&s<.5*Math.PI?(i={x:h.minX,y:h.minY},a={x:h.maxX,y:h.maxY}):.5*Math.PI<=s&&s<Math.PI?(i={x:h.maxX,y:h.minY},a={x:h.minX,y:h.maxY}):Math.PI<=s&&s<1.5*Math.PI?(i={x:h.maxX,y:h.maxY},a={x:h.minX,y:h.minY}):(i={x:h.minX,y:h.maxY},a={x:h.maxX,y:h.minY});var l=Math.tan(s),f=l*l,g=(a.x-i.x+l*(a.y-i.y))/(f+1)+i.x,p=l*(a.x-i.x+l*(a.y-i.y))/(f+1)+i.y,v=e.get("context"),y=v.createLinearGradient(i.x,i.y,g,p);return r(u,y,n),y}function o(t,e,n){var i=g.exec(t),a=parseFloat(i[1]),o=parseFloat(i[2]),s=parseFloat(i[3]),u=i[4],c=e.getBBox(),h=e.get("context"),l=c.maxX-c.minX,f=c.maxY-c.minY,d=Math.sqrt(l*l+f*f)/2,p=h.createRadialGradient(c.minX+l*a,c.minY+f*o,s,c.minX+l/2,c.minY+f/2,d);return r(u,p,n),p}function s(t,e){var n=p.exec(t),i=n[1],r=n[2];switch(i){case"a":i="repeat";break;case"x":i="repeat-x";break;case"y":i="repeat-y";break;case"n":i="no-repeat";break;default:i="no-repeat"}var a=document.getElementById(r),o=e.get("context"),s=o.createPattern(a,i);return s}var u=n(1),c=n(6),h=n(17),l=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,f=/[^\s\,]+/gi,d=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,g=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,p=/^p\s*([axyn])\s+(.*)/i,v=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,y={};t.exports={parsePath:function(t){return t=t||[],u.isArray(t)?t:u.isString(t)?(t=t.match(l),u.each(t,function(e,n){if(e=e.match(f),e[0].length>1){var i=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=i}u.each(e,function(t,n){isNaN(t)||(e[n]=+t)}),t[n]=e}),t):void 0},parseStyle:function(t,e,n){if(u.isString(t)){if("("===t[1]||"("===t[2]){if("l"===t[0])return a(t,e,n);if("r"===t[0])return o(t,e,n);if("p"===t[0])return s(t,e)}return u.isNull(n)?t:i(t,n)}},numberToColor:function(t){var e=y[t];if(!e){for(var n=t.toString(16),i=n.length;i<6;i++)n="0"+n;e="#"+n,y[t]=e}return e}}},function(t,e,n){var i=n(39),r={Group:n(112),Shape:n(4),Rect:n(55),Circle:n(44),Ellipse:n(46),Path:n(51),Text:n(56),Line:n(49),Image:n(48),Polygon:n(52),Polyline:n(53),Arc:n(43),Fan:n(47),Cubic:n(45),Quadratic:n(54),Marker:n(50),debug:function(t){i.debug=t}};t.exports=r},function(t,e,n){var i=n(1),r=n(2).Vector2,a=n(4),o=n(5),s=n(20),u=n(12),c=function(t){c.superclass.constructor.call(this,t)};c.ATTRS={x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,arrow:!1},i.extend(c,a),i.augment(c,{canStroke:!0,type:"arc",getDefaultAttrs:function(){return{x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,arrow:!1}},calculateBox:function(){var t=this.__attrs,e=t.x,n=t.y,i=t.r,r=t.startAngle,a=t.endAngle,o=t.clockwise,u=t.lineWidth,c=u/2,h=s.box(e,n,i,r,a,o);return h.minX-=c,h.minY-=c,h.maxX+=c,h.maxY+=c,h},isPointInPath:function(t,e){var n=this.__attrs,i=n.x,r=n.y,a=n.r,s=n.startAngle,u=n.endAngle,c=n.clockwise,h=n.lineWidth;return!!this.hasStroke()&&o.arcline(i,r,a,s,u,c,h,t,e)},createPath:function(t){var e=this.__attrs,n=e.x,i=e.y,a=e.r,o=e.startAngle,s=e.endAngle,c=e.clockwise,h=e.lineWidth,l=e.arrow;if(t=t||self.get("context"),t.beginPath(),t.arc(n,i,a,o,s,c),l){var f={x:n+a*Math.cos(s),y:i+a*Math.sin(s)},d=new r(-a*Math.sin(s),a*Math.cos(s));c&&d.multiplyScaler(-1),u.makeArrow(t,d,f,h)}}}),t.exports=c},function(t,e,n){var i=n(1),r=n(4),a=n(5),o=function(t){o.superclass.constructor.call(this,t)};o.ATTRS={x:0,y:0,r:0,lineWidth:1},i.extend(o,r),i.augment(o,{canFill:!0,canStroke:!0,type:"circle",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var t=this.__attrs,e=t.x,n=t.y,i=t.r,r=t.lineWidth,a=r/2+i;return{minX:e-a,minY:n-a,maxX:e+a,maxY:n+a}},isPointInPath:function(t,e){var n=this.hasFill(),i=this.hasStroke();return n&&i?this.__isPointInFill(t,e)||this.__isPointInStroke(t,e):n?this.__isPointInFill(t,e):!!i&&this.__isPointInStroke(t,e)},__isPointInFill:function(t,e){var n=this.__attrs,i=n.x,r=n.y,o=n.r;return a.circle(i,r,o,t,e)},__isPointInStroke:function(t,e){var n=this.__attrs,i=n.x,r=n.y,o=n.r,s=n.lineWidth;return a.arcline(i,r,o,0,2*Math.PI,!1,s,t,e)},createPath:function(t){var e=this.__attrs,n=e.x,i=e.y,r=e.r;t=t||self.get("context"),t.beginPath(),t.arc(n,i,r,0,2*Math.PI,!1)}}),t.exports=o},function(t,e,n){var i=n(1),r=n(4),a=n(5),o=n(12),s=n(14),u=n(2).Vector2,c=function(t){c.superclass.constructor.call(this,t)};c.ATTRS={p1:null,p2:null,p3:null,p4:null,lineWidth:1,arrow:!1},i.extend(c,r),i.augment(c,{canStroke:!0,type:"cubic",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var t,e,n=this.__attrs,r=n.p1,a=n.p2,o=n.p3,u=n.p4;if(i.isNull(r)||i.isNull(a)||i.isNull(o)||i.isNull(u))return null;var c=n.lineWidth/2,h=s.extrema(r[0],a[0],o[0],u[0]);for(t=0,e=h.length;t<e;t++)h[t]=s.at(r[0],a[0],o[0],u[0],h[t]);var l=s.extrema(r[1],a[1],o[1],u[1]);for(t=0,e=l.length;t<e;t++)l[t]=s.at(r[1],a[1],o[1],u[1],l[t]);return h.push(r[0],u[0]),l.push(r[1],u[1]),{minX:Math.min.apply(Math,h)-c,maxX:Math.max.apply(Math,h)+c,minY:Math.min.apply(Math,l)-c,maxY:Math.max.apply(Math,l)+c}},isPointInPath:function(t,e){var n=this.__attrs,i=n.p1,r=n.p2,o=n.p3,s=n.p4,u=n.lineWidth;return a.cubicline(i[0],i[1],r[0],r[1],o[0],o[1],s[0],s[1],u,t,e)},createPath:function(t){var e=this.__attrs,n=e.p1,r=e.p2,a=e.p3,s=e.p4,c=e.lineWidth,h=e.arrow;if(t=t||self.get("context"),!(i.isNull(n)||i.isNull(r)||i.isNull(a)||i.isNull(s)))if(t.beginPath(),t.moveTo(n[0],n[1]),h){var l=new u(s[0]-a[0],s[1]-a[1]),f=o.getEndPoint(l,new u(s[0],s[1]),c);t.bezierCurveTo(r[0],r[1],a[0],a[1],f.x,f.y),o.makeArrow(t,l,f,c)}else t.bezierCurveTo(r[0],r[1],a[0],a[1],s[0],s[1])},getPoint:function(t){var e=this.__attrs;return{x:s.at(e.p4[0],e.p3[0],e.p2[0],e.p1[0],t),y:s.at(e.p4[1],e.p3[1],e.p2[1],e.p1[1],t)}}}),t.exports=c},function(t,e,n){var i=n(1),r=n(4),a=n(5),o=n(2),s=o.Matrix3,u=o.Vector3,c=function(t){c.superclass.constructor.call(this,t)};c.ATTRS={x:0,y:0,rx:1,ry:1,lineWidth:1},i.extend(c,r),i.augment(c,{canFill:!0,canStroke:!0,type:"ellipse",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var t=this.__attrs,e=t.x,n=t.y,i=t.rx,r=t.ry,a=t.lineWidth,o=i+a/2,s=r+a/2;return{minX:e-o,minY:n-s,maxX:e+o,maxY:n+s}},isPointInPath:function(t,e){var n=this.hasFill(),i=this.hasStroke();return n&&i?this.__isPointInFill(t,e)||this.__isPointInStroke(t,e):n?this.__isPointInFill(t,e):!!i&&this.__isPointInStroke(t,e)},__isPointInFill:function(t,e){var n=this.__attrs,i=n.x,r=n.y,o=n.rx,c=n.ry,h=o>c?o:c,l=o>c?1:o/c,f=o>c?c/o:1,d=new u(t,e,1),g=new s;g.scale(l,f),g.translate(i,r);var p=g.getInverse();return d.applyMatrix(p),a.circle(0,0,h,d.x,d.y)},__isPointInStroke:function(t,e){var n=this.__attrs,i=n.x,r=n.y,o=n.rx,c=n.ry,h=n.lineWidth,l=o>c?o:c,f=o>c?1:o/c,d=o>c?c/o:1,g=new u(t,e,1),p=new s;p.scale(f,d),p.translate(i,r);var v=p.getInverse();return g.applyMatrix(v),a.arcline(0,0,l,0,2*Math.PI,!1,h,g.x,g.y)},createPath:function(t){var e=this.__attrs,n=e.x,i=e.y,r=e.rx,a=e.ry;t=t||self.get("context");var o=r>a?r:a,u=r>a?1:r/a,c=r>a?a/r:1,h=new s;h.scale(u,c),h.translate(n,i);var l=h.to2DObject();t.beginPath(),t.save(),t.transform(l.a,l.b,l.c,l.d,l.e,l.f),t.arc(0,0,o,0,2*Math.PI),t.restore(),t.closePath()}}),t.exports=c},function(t,e,n){var i=n(1),r=n(4),a=n(5),o=n(6),s=n(20),u=n(2),c=u.Vector2,h=function(t){h.superclass.constructor.call(this,t)};h.ATTRS={x:0,y:0,rs:0,re:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1},i.extend(h,r),i.augment(h,{canFill:!0,canStroke:!0,type:"fan",getDefaultAttrs:function(){return{clockwise:!1,lineWidth:1,rs:0,re:0}},calculateBox:function(){var t=this,e=t.__attrs,n=e.x,i=e.y,r=e.rs,a=e.re,o=e.startAngle,u=e.endAngle,c=e.clockwise,h=e.lineWidth,l=s.box(n,i,r,o,u,c),f=s.box(n,i,a,o,u,c),d=Math.min(l.minX,f.minX),g=Math.min(l.minY,f.minY),p=Math.max(l.maxX,f.maxX),v=Math.max(l.maxY,f.maxY),y=h/2;return{minX:d-y,minY:g-y,maxX:p+y,maxY:v+y}},isPointInPath:function(t,e){var n=this.hasFill(),i=this.hasStroke();return n&&i?this.__isPointInFill(t,e)||this.__isPointInStroke(t,e):n?this.__isPointInFill(t,e):!!i&&this.__isPointInStroke(t,e);
},__isPointInFill:function(t,e){var n=this.__attrs,i=n.x,r=n.y,a=n.rs,u=n.re,h=n.startAngle,l=n.endAngle,f=n.clockwise,d=new c(1,0),g=new c(t-i,e-r),p=d.angleTo(g),v=s.nearAngle(p,h,l,f);if(o.equal(p,v)){var y=g.lengthSq();if(a*a<=y&&y<=u*u)return!0}return!1},__isPointInStroke:function(t,e){var n=this.__attrs,i=n.x,r=n.y,o=n.rs,s=n.re,u=n.startAngle,c=n.endAngle,h=n.clockwise,l=n.lineWidth,f={x:Math.cos(u)*o+i,y:Math.sin(u)*o+r},d={x:Math.cos(u)*s+i,y:Math.sin(u)*s+r},g={x:Math.cos(c)*o+i,y:Math.sin(c)*o+r},p={x:Math.cos(c)*s+i,y:Math.sin(c)*s+r};return!!a.line(f.x,f.y,d.x,d.y,l,t,e)||(!!a.line(g.x,g.y,p.x,p.y,l,t,e)||(!!a.arcline(i,r,o,u,c,h,l,t,e)||!!a.arcline(i,r,s,u,c,h,l,t,e)))},createPath:function(t){var e=this.__attrs,n=e.x,i=e.y,r=e.rs,a=e.re,o=e.startAngle,s=e.endAngle,u=e.clockwise,c={x:Math.cos(o)*r+n,y:Math.sin(o)*r+i},h={x:Math.cos(o)*a+n,y:Math.sin(o)*a+i},l={x:Math.cos(s)*r+n,y:Math.sin(s)*r+i};t=t||self.get("context"),t.beginPath(),t.moveTo(c.x,c.y),t.lineTo(h.x,h.y),t.arc(n,i,a,o,s,u),t.lineTo(l.x,l.y),t.arc(n,i,r,s,o,!u),t.closePath()}}),t.exports=h},function(t,e,n){var i=n(1),r=n(4),a=n(5),o=function(t){o.superclass.constructor.call(this,t)};o.ATTRS={x:0,y:0,img:void 0,width:0,height:0,sx:null,sy:null,swidth:null,sheight:null},i.extend(o,r),i.augment(o,{type:"image",__afterSetAttrImg:function(t){this.__setAttrImg(t)},__afterSetAttrAll:function(t){t.img&&this.__setAttrImg(t.img)},isHitBox:function(){return!1},calculateBox:function(){var t=this.__attrs,e=t.x,n=t.y,i=t.width,r=t.height;return{minX:e,minY:n,maxX:e+i,maxY:n+r}},isPointInPath:function(t,e){var n=this.__attrs;if(this.get("toDraw")||!n.img)return!1;var i=n.x,r=n.y,o=n.width,s=n.height;return a.rect(i,r,o,s,t,e)},__setLoading:function(t){var e=this.get("canvas");return t===!1&&this.get("toDraw")===!0&&(this.__cfg.loading=!1,e.draw()),t},__setAttrImg:function(t){var e=this,n=e.__attrs;if(!i.isString(t))return t instanceof Image?(n.width||e.attr("width",t.width),n.height||e.attr("height",t.height),t):t instanceof HTMLElement&&i.isString(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase()?(n.width||e.attr("width",Number(t.getAttribute("width"))),n.height||e.attr("height",Number(t.getAttribute("height"))),t):t instanceof ImageData?(n.width||e.attr("width",t.width),n.height||e.attr("height",t.height),t):null;var r=new Image;r.onload=function(){if(e.get("destroyed"))return!1;e.attr("imgSrc",t),e.attr("img",r);var n=e.get("callback");n&&n.call(e),e.set("loading",!1)},r.src=t,e.set("loading",!0)},drawInner:function(t){return this.get("loading")?void this.set("toDraw",!0):void this.__drawImage(t)},__drawImage:function(t){var e=this.__attrs,n=e.x,r=e.y,a=e.img,o=e.width,s=e.height,u=e.sx,c=e.sy,h=e.swidth,l=e.sheight;if(this.set("toDraw",!1),a instanceof Image||a instanceof HTMLElement&&i.isString(a.nodeName)&&"CANVAS"===a.nodeName.toUpperCase()){if(i.isNull(u)||i.isNull(c)||i.isNull(h)||i.isNull(l))return void t.drawImage(a,n,r,o,s);if(i.notNull(u)&&i.notNull(c)&&i.notNull(h)&&i.notNull(l))return void t.drawImage(a,u,c,h,l,n,r,o,s)}else if(a instanceof ImageData)return void t.putImageData(a,n,r,u||0,c||0,h||o,l||s)}}),t.exports=o},function(t,e,n){var i=n(1),r=n(4),a=n(5),o=n(12),s=n(21),u=n(2),c=u.Vector2,h=function(t){h.superclass.constructor.call(this,t)};h.ATTRS={x1:0,y1:0,x2:0,y2:0,lineWidth:1,arrow:!1},i.extend(h,r),i.augment(h,{canStroke:!0,type:"line",getDefaultAttrs:function(){return{lineWidth:1,arrow:!1}},calculateBox:function(){var t=this.__attrs,e=t.x1,n=t.y1,i=t.x2,r=t.y2,a=t.lineWidth;return s.box(e,n,i,r,a)},isPointInPath:function(t,e){var n=this.__attrs,i=n.x1,r=n.y1,o=n.x2,s=n.y2,u=n.lineWidth;return!!this.hasStroke()&&a.line(i,r,o,s,u,t,e)},createPath:function(t){var e=this.__attrs,n=e.x1,i=e.y1,r=e.x2,a=e.y2,s=e.arrow,u=e.lineWidth;if(t=t||self.get("context"),t.beginPath(),t.moveTo(n,i),s){var h=new c(r-n,a-i),l=o.getEndPoint(h,new c(r,a),u);t.lineTo(l.x,l.y),o.makeArrow(t,h,l,u)}else t.lineTo(r,a)},getPoint:function(t){var e=this.__attrs;return{x:s.at(e.x1,e.x2,t),y:s.at(e.y1,e.y2,t)}}}),t.exports=h},function(t,e,n){var i=n(1),r=n(4),a=n(5),o=function(t){o.superclass.constructor.call(this,t)};o.Symbols={circle:function(t,e,n,i){i.arc(t,e,n,0,2*Math.PI,!1)},square:function(t,e,n,i){i.moveTo(t-n,e-n),i.lineTo(t+n,e-n),i.lineTo(t+n,e+n),i.lineTo(t-n,e+n),i.closePath()},diamond:function(t,e,n,i){i.moveTo(t-n,e),i.lineTo(t,e-n),i.lineTo(t+n,e),i.lineTo(t,e+n),i.closePath()},triangle:function(t,e,n,i){var r=n/.966,a=n;i.moveTo(t,e-n),i.lineTo(t+r,e+a),i.lineTo(t-r,e+a),i.closePath()},"triangle-down":function(t,e,n,i){var r=n/.966,a=n;i.moveTo(t,e+n),i.lineTo(t+r,e-a),i.lineTo(t-r,e-a),i.closePath()}},o.ATTRS={path:null,lineWidth:1},i.extend(o,r),i.augment(o,{type:"marker",canFill:!0,canStroke:!0,getDefaultAttrs:function(){return{x:0,y:0,lineWidth:1}},calculateBox:function(){var t=this.__attrs,e=t.x,n=t.y,i=t.radius,r=t.lineWidth,a=r/2+i;return{minX:e-a,minY:n-a,maxX:e+a,maxY:n+a}},isPointInPath:function(t,e){var n=this.__attrs,i=n.x,r=n.y,o=n.radius;return a.circle(i,r,o,t,e)},createPath:function(t){var e,n=this.__attrs,r=n.x,a=n.y,s=n.radius,u=n.symbol||"circle";e=i.isFunction(u)?u:o.Symbols[u],t.beginPath(),e(r,a,s,t)}}),t.exports=o},function(t,e,n){var i=n(1),r=n(4),a=n(118),o=n(41),s=n(12),u=n(35),c=n(14),h=n(2),l=h.Vector2,f=function(t){f.superclass.constructor.call(this,t)};f.ATTRS={path:null,lineWidth:1,curve:null,tCache:null},i.extend(f,r),i.augment(f,{canFill:!0,canStroke:!0,type:"path",getDefaultAttrs:function(){return{lineWidth:1}},__afterSetAttrPath:function(t){var e=this;if(i.isNull(t))return e.setSilent("segments",null),void e.setSilent("box",void 0);var n,r=o.parsePath(t),s=[];if(i.isArray(r)&&0!==r.length&&("M"===r[0][0]||"m"===r[0][0])){for(var u=r.length,c=0;c<r.length;c++){var h=r[c];n=new a(h,n,c===u-1),s.push(n)}e.setSilent("segments",s),e.set("tCache",null),this.setSilent("box",null)}},__afterSetAttrAll:function(t){t.path&&this.__afterSetAttrPath(t.path)},calculateBox:function(){var t=this,e=t.__attrs,n=e.lineWidth,r=e.lineAppendWidth||0,a=t.get("segments");if(!a)return null;n+=r;var o=1/0,s=-(1/0),u=1/0,c=-(1/0);return i.each(a,function(t){t.getBBox(n);var e=t.box;e&&(e.minX<o&&(o=e.minX),e.maxX>s&&(s=e.maxX),e.minY<u&&(u=e.minY),e.maxY>c&&(c=e.maxY))}),{minX:o,minY:u,maxX:s,maxY:c}},isPointInPath:function(t,e){var n=this,i=n.hasFill(),r=n.hasStroke();return i&&r?n.__isPointInFill(t,e)||n.__isPointInStroke(t,e):i?n.__isPointInFill(t,e):!!r&&n.__isPointInStroke(t,e)},__isPointInFill:function(t,e){var n=this,i=n.get("context");if(i)return n.createPath(),i.isPointInPath(t,e)},__isPointInStroke:function(t,e){var n=this,i=n.get("segments"),r=n.__attrs,a=r.lineWidth,o=r.lineAppendWidth||0;a+=o;for(var s=0,u=i.length;s<u;s++)if(i[s].isInside(t,e,a))return!0;return!1},__setTcache:function(){var t,e,n,r,a=0,o=0,s=[],u=this.curve;u&&(i.each(u,function(t,e){n=u[e+1],r=t.length,n&&(a+=c.len(t[r-2],t[r-1],n[1],n[2],n[3],n[4],n[5],n[6]))}),i.each(u,function(i,h){n=u[h+1],r=i.length,n&&(t=[],t[0]=o/a,e=c.len(i[r-2],i[r-1],n[1],n[2],n[3],n[4],n[5],n[6]),o+=e,t[1]=o/a,s.push(t))}),this.tCache=s)},__calculateCurve:function(){var t=this,e=t.__attrs,n=e.path;this.curve=u.toCurve(n)},getPoint:function(t){var e,n,r,a,o,s,u=this.tCache;return u||(this.__calculateCurve(),this.__setTcache(),u=this.tCache),e=this.curve,u?(i.each(u,function(e,i){t>=e[0]&&t<=e[1]&&(n=(t-e[0])/(e[1]-e[0]),r=i)}),a=e[r],i.isNull(a)||i.isNull(r)?null:(o=a.length,s=e[r+1],{x:c.at(a[o-2],s[1],s[3],s[5],1-n),y:c.at(a[o-1],s[2],s[4],s[6],1-n)})):e?{x:e[0][1],y:e[0][2]}:null},createPath:function(t){var e=this,n=e.__attrs,r=e.get("segments"),a=n.lineWidth,o=n.arrow;if(i.isArray(r)){t=t||e.get("context"),t.beginPath();for(var u=0,c=r.length;u<c;u++)if(u===c-1&&o){var h=r[u],f=r[u].endTangent,d={x:h.params[h.params.length-1].x,y:h.params[h.params.length-1].y};if(h&&i.isFunction(f)){var g=f(),p=s.getEndPoint(g,new l(d.x,d.y),a);h.params[h.params.length-1]=p,r[u].draw(t),s.makeArrow(t,g,p,a),h.params[h.params.length-1]=d}}else r[u].draw(t)}}}),t.exports=f},function(t,e,n){var i=n(1),r=n(4),a=n(5),o=function(t){o.superclass.constructor.call(this,t)};o.ATTRS={points:null,lineWidth:1},i.extend(o,r),i.augment(o,{canFill:!0,canStroke:!0,type:"polygon",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var t=this,e=t.__attrs,n=e.points,r=e.lineWidth;if(!n||0===n.length)return null;var a=1/0,o=1/0,s=-(1/0),u=-(1/0);i.each(n,function(t){var e=t[0],n=t[1];e<a&&(a=e),e>s&&(s=e),n<o&&(o=n),n>u&&(u=n)});var c=r/2;return{minX:a-c,minY:o-c,maxX:s+c,maxY:u+c}},isPointInPath:function(t,e){var n=this,i=n.hasFill(),r=n.hasStroke();return i&&r?n.__isPointInFill(t,e)||n.__isPointInStroke(t,e):i?n.__isPointInFill(t,e):!!r&&n.__isPointInStroke(t,e)},__isPointInFill:function(t,e){var n=this,i=n.get("context");return n.createPath(),i.isPointInPath(t,e)},__isPointInStroke:function(t,e){var n=this,i=n.__attrs,r=i.points;if(r.length<2)return!1;var o=i.lineWidth,s=r.slice(0);return r.length>=3&&s.push(r[0]),a.polyline(s,o,t,e)},createPath:function(t){var e=this,n=e.__attrs,r=n.points;r.length<2||(t=t||e.get("context"),t.beginPath(),i.each(r,function(e,n){0===n?t.moveTo(e[0],e[1]):t.lineTo(e[0],e[1])}),t.closePath())}}),t.exports=o},function(t,e,n){var i=n(1),r=n(4),a=n(5),o=n(12),s=n(21),u=n(2),c=u.Vector2,h=function(t){h.superclass.constructor.call(this,t)};h.ATTRS={points:null,lineWidth:1,arrow:!1,tCache:null},i.extend(h,r),i.augment(h,{canStroke:!0,type:"polyline",tCache:null,getDefaultAttrs:function(){return{lineWidth:1,arrow:!1}},calculateBox:function(){var t=this,e=t.__attrs,n=e.lineWidth,r=e.points;if(!r||0===r.length)return null;var a=1/0,o=1/0,s=-(1/0),u=-(1/0);i.each(r,function(t){var e=t[0],n=t[1];e<a&&(a=e),e>s&&(s=e),n<o&&(o=n),n>u&&(u=n)});var c=n/2;return{minX:a-c,minY:o-c,maxX:s+c,maxY:u+c}},__setTcache:function(){var t,e,n=this,r=n.__attrs,a=r.points,o=0,u=0,c=[];a&&0!==a.length&&(i.each(a,function(t,e){a[e+1]&&(o+=s.len(t[0],t[1],a[e+1][0],a[e+1][1]))}),o<=0||(i.each(a,function(n,i){a[i+1]&&(t=[],t[0]=u/o,e=s.len(n[0],n[1],a[i+1][0],a[i+1][1]),u+=e,t[1]=u/o,c.push(t))}),this.tCache=c))},isPointInPath:function(t,e){var n=this,i=n.__attrs;if(n.hasStroke()){var r=i.points;if(r.length<2)return!1;var o=i.lineWidth;return a.polyline(r,o,t,e)}return!1},createPath:function(t){var e,n,i=this,r=i.__attrs,a=r.points,s=r.arrow,u=r.lineWidth;if(!(a.length<2)){for(t=t||i.get("context"),t.beginPath(),t.moveTo(a[0][0],a[0][1]),n=1,e=a.length-1;n<e;n++)t.lineTo(a[n][0],a[n][1]);if(s){var h=new c(a[e][0]-a[e-1][0],a[e][1]-a[e-1][1]),l=o.getEndPoint(h,new c(a[e][0],a[e][1]),u);t.lineTo(l.x,l.y),o.makeArrow(t,h,l,u)}else t.lineTo(a[e][0],a[e][1])}},getPoint:function(t){var e,n,r=this.__attrs,a=r.points,o=this.tCache;return o||(this.__setTcache(),o=this.tCache),i.each(o,function(i,r){t>=i[0]&&t<=i[1]&&(e=(t-i[0])/(i[1]-i[0]),n=r)}),{x:s.at(a[n][0],a[n+1][0],e),y:s.at(a[n][1],a[n+1][1],e)}}}),t.exports=h},function(t,e,n){var i=n(1),r=n(4),a=n(5),o=n(12),s=n(22),u=n(2).Vector2,c=function(t){c.superclass.constructor.call(this,t)};c.ATTRS={p1:null,p2:null,p3:null,lineWidth:1,arrow:!1},i.extend(c,r),i.augment(c,{canStroke:!0,type:"quadratic",getDefaultAttrs:function(){return{lineWidth:1,arrow:!1}},calculateBox:function(){var t,e,n=this,r=n.__attrs,a=r.p1,o=r.p2,u=r.p3;if(i.isNull(a)||i.isNull(o)||i.isNull(u))return null;var c=r.lineWidth/2,h=s.extrema(a[0],o[0],u[0]);for(t=0,e=h.length;t<e;t++)h[t]=s.at(a[0],o[0],u[0],h[t]);h.push(a[0],u[0]);var l=s.extrema(a[1],o[1],u[1]);for(t=0,e=l.length;t<e;t++)l[t]=s.at(a[1],o[1],u[1],l[t]);return l.push(a[1],u[1]),{minX:Math.min.apply(Math,h)-c,maxX:Math.max.apply(Math,h)+c,minY:Math.min.apply(Math,l)-c,maxY:Math.max.apply(Math,l)+c}},isPointInPath:function(t,e){var n=this,i=n.__attrs,r=i.p1,o=i.p2,s=i.p3,u=i.lineWidth;return a.quadraticline(r[0],r[1],o[0],o[1],s[0],s[1],u,t,e)},createPath:function(t){var e=this,n=e.__attrs,r=n.p1,a=n.p2,s=n.p3,c=n.lineWidth,h=n.arrow;if(!(i.isNull(r)||i.isNull(a)||i.isNull(s)))if(t=t||e.get("context"),t.beginPath(),t.moveTo(r[0],r[1]),h){var l=new u(s[0]-a[0],s[1]-a[1]),f=o.getEndPoint(l,new u(s[0],s[1]),c);t.quadraticCurveTo(a[0],a[1],f.x,f.y),o.makeArrow(t,l,f,c)}else t.quadraticCurveTo(a[0],a[1],s[0],s[1])},getPoint:function(t){var e=this.__attrs;return{x:s.at(e.p1[0],e.p2[0],e.p3[0],t),y:s.at(e.p1[1],e.p2[1],e.p3[1],t)}}}),t.exports=c},function(t,e,n){var i=n(1),r=n(4),a=n(5),o=function(t){o.superclass.constructor.call(this,t)};o.ATTRS={x:0,y:0,width:0,height:0,radius:0,lineWidth:1},i.extend(o,r),i.augment(o,{canFill:!0,canStroke:!0,type:"rect",getDefaultAttrs:function(){return{lineWidth:1,radius:0}},calculateBox:function(){var t=this,e=t.__attrs,n=e.x,i=e.y,r=e.width,a=e.height,o=e.lineWidth,s=o/2;return{minX:n-s,minY:i-s,maxX:n+r+s,maxY:i+a+s}},isPointInPath:function(t,e){var n=this,i=n.hasFill(),r=n.hasStroke();return i&&r?n.__isPointInFill(t,e)||n.__isPointInStroke(t,e):i?n.__isPointInFill(t,e):!!r&&n.__isPointInStroke(t,e)},__isPointInFill:function(t,e){var n=this.get("context");return!!n&&(this.createPath(),n.isPointInPath(t,e))},__isPointInStroke:function(t,e){var n=this,i=n.__attrs,r=i.x,o=i.y,s=i.width,u=i.height,c=i.radius,h=i.lineWidth;if(0===c){var l=h/2;return a.line(r-l,o,r+s+l,o,h,t,e)||a.line(r+s,o-l,r+s,o+u+l,h,t,e)||a.line(r+s+l,o+u,r-l,o+u,h,t,e)||a.line(r,o+u+l,r,o-l,h,t,e)}return a.line(r+c,o,r+s-c,o,h,t,e)||a.line(r+s,o+c,r+s,o+u-c,h,t,e)||a.line(r+s-c,o+u,r+c,o+u,h,t,e)||a.line(r,o+u-c,r,o+c,h,t,e)||a.arcline(r+s-c,o+c,c,1.5*Math.PI,2*Math.PI,!1,h,t,e)||a.arcline(r+s-c,o+u-c,c,0,.5*Math.PI,!1,h,t,e)||a.arcline(r+c,o+u-c,c,.5*Math.PI,Math.PI,!1,h,t,e)||a.arcline(r+c,o+c,c,Math.PI,1.5*Math.PI,!1,h,t,e)},createPath:function(t){var e=this,n=e.__attrs,i=n.x,r=n.y,a=n.width,o=n.height,s=n.radius;t=t||e.get("context"),t.beginPath(),0===s?t.rect(i,r,a,o):(t.moveTo(i+s,r),t.lineTo(i+a-s,r),t.arc(i+a-s,r+s,s,-Math.PI/2,0,!1),t.lineTo(i+a,r+o-s),t.arc(i+a-s,r+o-s,s,0,Math.PI/2,!1),t.lineTo(i+s,r+o),t.arc(i+s,r+o-s,s,Math.PI/2,Math.PI,!1),t.lineTo(i,r+s),t.arc(i+s,r+s,s,Math.PI,3*Math.PI/2,!1),t.closePath())}}),t.exports=o},function(t,e,n){var i=n(1),r=n(4),a=n(5),o=n(39),s=function(t){s.superclass.constructor.call(this,t)};s.ATTRS={x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom",lineHeight:null,textArr:null},i.extend(s,r),i.augment(s,{canFill:!0,canStroke:!0,type:"text",getDefaultAttrs:function(){return{lineWidth:1,lineCount:1,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"}},__assembleFont:function(){var t=this.__attrs,e=t.fontSize,n=t.fontFamily,i=t.fontWeight,r=t.fontStyle,a=t.fontVariant;t.font=[r,a,i,e+"px",n].join(" ")},__afterSetAttrFontSize:function(){this.__assembleFont()},__afterSetAttrFontFamily:function(){this.__assembleFont()},__afterSetAttrFontWeight:function(){this.__assembleFont()},__afterSetAttrFontStyle:function(){this.__assembleFont()},__afterSetAttrFontVariant:function(){this.__assembleFont()},__afterSetAttrFont:function(){},__afterSetAttrText:function(){var t,e=this.__attrs,n=e.text;if(i.isString(n)&&n.indexOf("\n")!==-1){t=n.split("\n");var r=t.length;e.lineCount=r,e.textArr=t}},__getTextHeight:function(){var t=this.__attrs,e=t.lineCount,n=t.fontSize;if(e>1){var i=this.__getSpaceingY();return n*e+i*(e-1)}return n},__afterSetAttrAll:function(t){var e=this;("fontSize"in t||"fontWeight"in t||"fontStyle"in t||"fontVariant"in t||"fontFamily"in t)&&e.__assembleFont(),"text"in t&&e.__afterSetAttrText(t.text)},isHitBox:function(){return!1},calculateBox:function(){var t=this,e=t.__attrs,n=e.x,i=e.y,r=t.measureText();if(!r)return{minX:n,minY:i,maxX:n,maxY:i};var a=t.__getTextHeight(),o=e.textAlign,s=e.textBaseline,u=e.lineWidth,c={x:n,y:i-a};o&&("end"===o||"right"===o?c.x-=r:"center"===o&&(c.x-=r/2)),s&&("top"===s?c.y+=a:"middle"===s&&(c.y+=a/2)),this.set("startPoint",c);var h=u/2;return{minX:c.x-h,minY:c.y-h,maxX:c.x+r+h,maxY:c.y+a+h}},__getSpaceingY:function(){var t=this.__attrs,e=t.lineHeight,n=t.fontSize;return e?e-n:.14*n},isPointInPath:function(t,e){var n=this,i=n.getBBox();if(n.hasFill()||n.hasStroke())return a.box(i.minX,i.maxX,i.minY,i.maxY,t,e)},drawInner:function(t){var e=this,n=e.__attrs,r=n.text;if(r){var a,o=n.textArr,s=n.fontSize,u=e.__getSpaceingY(),c=n.x,h=n.y,l=n.textBaseline;if(o){var f=e.getBBox();a=f.maxY-f.minY}var d;if(t.beginPath(),e.hasFill()){var g=n.fillOpacity;i.isNull(g)||1===g||(t.globalAlpha=g),o?i.each(o,function(e,n){d=h+n*(u+s)-a+s,"middle"===l&&(d+=a-s-(a-s)/2),"top"===l&&(d+=a-s),t.fillText(e,c,d)}):t.fillText(r,c,h)}e.hasStroke()&&(o?i.each(o,function(e,n){d=h+n*(u+s)-a+s,"middle"===l&&(d+=a-s-(a-s)/2),"top"===l&&(d+=a-s),t.strokeText(e,c,d)}):t.strokeText(r,c,h))}},measureText:function(){var t,e=this,n=e.__attrs,r=n.text,a=n.font,s=n.textArr,u=0;if(!i.isNull(r)){var c=o.backupContext;return c.save(),c.font=a,s?i.each(s,function(e){t=c.measureText(e).width,u<t&&(u=t),c.restore()}):(u=c.measureText(r).width,c.restore()),u}}}),t.exports=s},function(t,e,n){var i=n(1),r=n(120),a=n(119);i.mix(i,a,{mixin:function(t,e){var n=t.CFG?"CFG":"ATTRS";if(t&&e){t._mixins=e,t[n]=t[n]||{};var r={};i.each(e,function(e){i.augment(t,e);var a=e[n];a&&i.mix(r,a)}),t[n]=i.mix(r,t[n])}},isPositiveNum:function(t){var e=/^[0-9]*[1-9][0-9]*$/;return e.test(t)},getRatio:function(){return window.devicePixelRatio?window.devicePixelRatio:2},getWidth:function(t){var e=i.getStyle(t,"width");return"auto"===e&&(e=t.offsetWidth),parseFloat(e)},getHeight:function(t){var e=i.getStyle(t,"height");return"auto"===e&&(e=t.offsetHeight),parseFloat(e)},getOuterHeight:function(t){var e=i.getHeight(t),n=parseFloat(i.getStyle(t,"borderTopWidth"))||0,r=parseFloat(i.getStyle(t,"paddingTop")),a=parseFloat(i.getStyle(t,"paddingBottom")),o=parseFloat(i.getStyle(t,"borderBottomWidth"))||0;return e+n+o+r+a},parsePathArray:function(t){return i.path2string(t)},path2Absolute:function(t){return i.pathToAbsolute(t)}}),i.MatrixUtil=r,t.exports=i},function(t,e,n){"use strict";var i=n(1),r=n(11).G,a=r.Group,o=function s(t){s.superclass.constructor.call(this,t)};i.extend(o,a),i.augment(o,{init:function(){o.superclass.init.call(this),this.set("gid",this.get("id"))},addShape:function(t,e){var n=this.get("id"),i=o.superclass.addShape.call(this,t,e);return i.set("id",n),i.set("gid",n+"-"+this.get("children").length),i},addGroup:function(t,e){var n=this.get("id"),i=o.superclass.addGroup.call(this,t,e);return i.set("id",n),i.set("gid",n+this.get("children").length),i}}),t.exports=o},function(t,e,n){"use strict";var i=n(25);i.Node=n(133),i.Edge=n(132),t.exports=i},function(t,e,n){"use strict";var i=n(1),r=n(10),a=["color","shape","size","label","style","tooltip"],o=n(134),s="origin",u=function c(t){c.superclass.constructor.call(this,t),this._init()};u.ATTRS={attrs:null,type:null},i.extend(u,r),i.augment(u,{_init:function(){this._initAttrs()},_initAttrs:function(){var t=this,e={};i.each(a,function(t){e[t]=new o({type:t})}),t.set("attrs",e)},_getAttr:function(t){return this.get("attrs")[t]},_updateAttr:function(t,e,n){var i=this,r=i._getAttr(t);r.dims=i._parseDims(e),r.callback=n},_parseDims:function(t){var e=null;return e=i.isArray(t)?t:i.isString(t)?t.split("*"):[t]},mapping:function(t){var e=this,n=e.get("attrs"),r={};return i.each(n,function(e){var n=e.type;i.isNull(t[n])?r[n]=e.getValue(t):r[n]=t[n]}),r.x=t.x?t.x:0,r.y=t.y?t.y:0,r.style=i.mix({},r.style,t.style),r.labelStyle=t.labelStyle,r[s]=t,r}}),i.each(a,function(t){u.prototype[t]=function(e,n){var r=this;return"label"!==t||n||(n=function(){return i.toArray(arguments)}),"tooltip"!==t||n||(n=function(){var t,n=i.toArray(arguments),a=r._parseDims(e),o=[];for(t=0;t<n.length;t++)o.push([a[t],n[t]]);return o}),r._updateAttr(t,e,n),r}}),t.exports=u},function(t,e,n){"use strict";var i=n(27);n(137),n(136),t.exports=i},function(t,e,n){"use strict";function i(t){var e=r.mix({},s.nodeStyle);return t.color&&(e.stroke=t.color,e.fill=t.color),t.style&&r.mix(e,t.style),e}var r=n(1),a=n(141),o=n(28),s=n(7);t.exports={drawNode:function(t,e,n){var r=i(e),o=a[t](e,n,r);return"text"!==t&&o.attr(r),o.set("zIndex",s.zIndex.node),o},getSnapAnchor:function(t,e){if(!t||!e)return!1;var n,i,a,s=t.getCenter(),u=t.getAnchorPoints(),c=o.vector(s,e),h=1/0;return r.each(u,function(t){a=o.vector(s,t),n=c.angleTo(a),n>Math.PI&&(n=2*Math.PI-n),n<h&&(h=n,i=t)}),i}}},function(t,e,n){"use strict";var i=n(3);i.buttonPointer=function(t){t._on("mouseenter",function(e){var n=e.shape;n&&n.hasClass("Button")&&t.css({cursor:"pointer"})}),t._on("mouseleave",function(e){var n=e.shape;n&&n.hasClass("Button")&&t.css({cursor:"default"})})}},function(t,e,n){"use strict";var i=n(3);i.clickActive=function(t){var e,n;t._on("click",function(i){e=i.item,n=i.shape,e&&n.get("clickActive")!==!1&&(t.clearAllActived(),t.setActivedItem(e),t.refresh(!1))})}},function(t,e,n){"use strict";var i=n(3),r=n(16);i.clickAddNode=function(t){var e,n,i,a=t.get("gridAssist"),o=a&&a.forceAlign;t._on("click",function(s){e=t.get("addingType"),n=t.get("addingModel"),"node"===e&&(n.x=s.x,n.y=s.y,o&&r.alignPoint(n,a.cell),i=t.add("node",n),t.clearAllActived(),t.setActivedItem(i),t._updateRollback(),t.draw(!1),t.endAdd(i))})}},function(t,e,n){"use strict";var i=n(3);i.clickBlankClearActive=function(t){t._on("click",function(e){e.shape||(t.clearAllActived(),t.refresh(!1))})}},function(t,e,n){"use strict";var i=n(3);i.collapse=function(t){t._on("click",function(e){var n=e.shape;n&&n.hasClass("collapseButton")&&(t.fire("collapse",e),t.css({cursor:"default"}))}),t._on("collapse",function(e){var n=t.get("dataMap"),i=e.item,r=i.get("id");n[r].isCollapsed=!0,t.clearAllActived(),t.refresh(!1),t.reRender()})}},function(t,e,n){"use strict";var i=n(3);i.dragAddEdge=function(t){var e,n,i,r,a,o;t._on("mousedown",function(a){n=a.item,i=t.get("addingType"),r=t.get("addingModel"),n&&"edge"===i&&t.isNode(n)&&(r.source=n.get("id"),r.target=n.get("id"),e=t.add("edge",r))}),t._on("dragmove",function(n){e&&(a={x:n.x,y:n.y,controlPointIndex:1},e.showDelegation(a),t.refresh(!1))}),t._on("mouseup",function(i){e&&(n=i.item,e.hideDelegation(),t.isNode(n)?(o={},o.target=n.get("id"),t._update(e,o),t._updateRollback(),t.clearAllActived(),t.setActivedItem(e),t.draw(!1),t.endAdd(e)):(t._remove(e),t.refresh(!1),t.endAdd()),e=null)})}},function(t,e,n){"use strict";var i=n(3),r=n(29);i.dragBlank=function(t){r(t,!0)}},function(t,e,n){"use strict";var i=n(3),r=n(7);i.dragEdge=function(t){var e,n,i,a,o,s,u,c,h,l=t.get("frontRootGroup");t._on("mousedown",function(e){if(n=e.frontEvObj.shape,n&&"control-point"===n.get("elCls")){if(s=n.get("item"),!t.isEdge(s))return void(s=void 0);if(u=n.get("pointIndex"),!s.isExtremePoint(u))return s=void 0,void(u=void 0)}}),t._on("dragmove",function(n){t.isEdge(s)&&(e=n.item,h={x:n.x,y:n.y,controlPointIndex:u},s.showDelegation(h),t.refresh(!1))}),t._on("mouseenter",function(a){t.isEdge(s)&&(e=a.item,n=a.frontEvObj.shape,!t.isNode(e)||n&&"anchor-point"===n.get("elCls")||e.get("anchorGroup")||(i=e,e.showAnchor(),l.sort()),n&&"anchor-point"===n.get("elCls")&&n.attr(r.anchorPointHoverStyle))}),t._on("mouseleave",function(u){t.isEdge(s)&&(e=u.item,o=u.toEvObj.item,a=u.toEvObj.frontEvObj.shape,n=u.frontEvObj.shape,n&&"anchor-point"===n.get("elCls")&&n.attr(r.anchorPointStyle),!t.isNode(i)||n&&n.get("item")===i&&o===i||a&&a.get("item")===i||t.isEdge(o)||(i.hideAnchor(),t.refresh(!1)))}),t.on("mouseup",function(r){t.isEdge(s)&&(e=r.item,n=r.frontEvObj.shape,c={},t.isNode(e)&&(s.isSourcePoint(u)?(c.source=e.get("id"),c.sourceAnchor=null):s.isTargetPoint(u)&&(c.target=e.get("id"),c.targetAnchor=null)),n&&"anchor-point"===n.get("elCls")&&n.get("item")===i&&(s.isSourcePoint(u)?(c.source=i.get("id"),c.sourceAnchor=n.get("anchorPointIndex")):s.isTargetPoint(u)&&(c.target=i.get("id"),c.targetAnchor=n.get("anchorPointIndex"))),s.hideDelegation(),i&&i.hideAnchor(),t._update(s,c),t._updateRollback(),t.draw(!1),e=void 0,s=void 0,c=void 0,u=void 0,h=void 0,n=void 0)})}},function(t,e,n){"use strict";var i=n(3);i.dragHideEdges=function(t){var e=t.get("edgeGroup");t._on("dragstart",function(){e.hide(),t.refresh()}),t._on("dragend",function(){e.show(),t.draw(!1)})}},function(t,e,n){"use strict";var i=n(1),r=n(3),a=n(16);r.dragNode=function(t){var e,n,r,o,s,u,c,h=t.get("gridAssist"),l=h&&h.forceAlign,f=[],d=null,g=!1;t._on("mousedown",function(a){r=a.frontEvObj.shape,n=a.item,t.isNode(n)&&!r&&(d={x:a.x,y:a.y},n.isActived()?(e=t._getAllActived(),i.each(e,function(t){f.push(t)})):f.push(n))}),t._on("dragmove",function(e){i.isArray(f)&&0!==f.length&&(g=!0,i.each(f,function(n){t.isNode(n)&&(c=n.getBBox(),u={x:(c.x+c.maxX)/2,y:(c.y+c.maxY)/2},n.showDelegation({x:u.x+e.x-d.x,y:u.y+e.y-d.y}))}),t.refresh(!1))}),t._on("mouseup",function(r){return i.isArray(f)&&0!==f.length&&g?(1===f.length&&(t.clearAllActived(),t.setActivedItem(f[0])),n=r.item,i.each(f,function(e){t.isNode(e)?(u=e.getPosition(),o={x:u.x+r.x-d.x,y:u.y+r.y-d.y},n!==e&&e&&!e.hasClass("preventToFront")&&t.toFront(e),l&&a.alignPoint(o,h.cell),e.hideDelegation()):(s=e.getControlPoints(),o={},s.length>2&&(i.each(s,function(t,e){0!==e&&e!==s.length-1&&(t.x=t.x+r.x-d.x,t.y=t.y+r.y-d.y,l&&a.alignPoint(t,h.cell))}),o={controlPoints:s})),t._update(e,o)}),t._updateRollback(),t.draw(!1),d=null,n=void 0,u=void 0,s=void 0,e=void 0,o=void 0,g=!1,void(f=[])):void(f=[])})}},function(t,e,n){"use strict";var i=n(1),r=n(3),a=n(7),o=n(8);r.multiSelect=function(t){var e,n,r,s,u,c,h,l,f,d,g,p=t.get("frontRootGroup"),v=!1;t._on("mousedown",function(e){s=e.item,u=e.frontEvObj.shape,s||c||u||(h={x:e.x,y:e.y},c=p.addShape("rect",{attrs:a.frameRectStyle}),t.set("frameSelecting",!0))}),t._on("dragmove",function(e){c&&(l=Math.min(h.x,e.x),f=Math.min(h.y,e.y),d=Math.max(h.x,e.x),g=Math.max(h.y,e.y),c.attr({x:l,y:f,width:d-l,height:g-f}),t.refresh(!1))}),t._on("mouseup",function(){c&&(e=t.get("itemCache"),i.each(e,function(e){n=e.getBBox(),r=[{x:n.x,y:n.y},{x:n.x,y:n.maxY},{x:n.maxX,y:n.y},{x:n.maxX,y:n.maxY}],i.each(r,function(n,i){if(v=o.isInRect(n,l,f,d,g),t.isNode(e)){if(v)return t.setActivedItem(e),!1}else{if(!v)return!1;i===r.length-1&&t.setActivedItem(e)}})}),c.remove(!0),t.refresh(!1),t.set("frameSelecting",!1),s=void 0,c=void 0,h=void 0,l=void 0,f=void 0,d=void 0,g=void 0)})}},function(t,e,n){"use strict";var i=n(3),r=n(16),a=n(8);i.resizeEdge=function(t){var e,n,i,o,s,u,c,h,l,f,d,g,p=t.get("gridAssist"),v=p&&p.forceAlign;t._on("click",function(i){e=i.item,n=t.getActived(),g=i.frontEvObj.shape,t.isEdge(e)&&e===n&&!g&&(e.addControlPoint({x:i.x,y:i.y}),s=e.getControlPoints(),t._update(e,{controlPoints:s}),t._updateRollback(),t.refresh(!1))}),t._on("mousedown",function(e){if(g=e.frontEvObj.shape,g&&"control-point"===g.get("elCls")){if(i=g.get("item"),!t.isEdge(i))return void(i=void 0);if(f=g.get("pointIndex"),i.isExtremePoint(f))return i=void 0,void(f=void 0);o=g.get("point"),s=i.getControlPoints(),u=s[f-1],c=s[f+1]}}),t._on("dragmove",function(n){t.isEdge(i)&&(e=n.item,d={x:n.x,y:n.y,controlPointIndex:f},a.isInSegment(u,c,d)?d.stroke="red":d.stroke="blue",i.showDelegation(d),t.refresh(!1))}),t._on("mouseup",function(y){t.isEdge(i)&&(e=y.item,g=y.frontEvObj.shape,h={x:y.x,y:y.y},l={},i.hideDelegation(),a.isInSegment(u,c,h)?s.splice(f,1):0!==f&&f!==s.length-1&&(o.x=h.x,o.y=h.y,v&&r.alignPoint(o,p.cell),l.controlPoints=s),t._update(i,l),t._updateRollback(),t.draw(!1),e=void 0,n=void 0,i=void 0,o=void 0,s=void 0,u=void 0,c=void 0,h=void 0,l=void 0,f=void 0,d=void 0,g=void 0)})}},function(t,e,n){"use strict";var i=n(3),r=n(16);i.resizeNode=function(t){var e,n,i,a,o,s,u,c=!1;t._on("mousedown",function(t){e=t.frontEvObj.shape,e&&"control-point"===e.get("elCls")&&(o=e.get("item"),s=e.get("point"),u=e.get("pointIndex"))}),t._on("dragmove",function(h){t.isNode(o)&&(c=!0,e=h.frontEvObj.shape,n={x:h.x,y:h.y},a=r.getControlInfo(n,u,s,o,"frontCanvas"),i=a.size,i[0]>5&&i[1]>5&&(o.showDelegation(a),t.refresh(!1)))}),t._on("mouseup",function(h){return t.isNode(o)&&c?(n={x:h.x,y:h.y},a=r.getControlInfo(n,u,s,o),i=a.size,i[0]>5&&i[1]>0&&(t._update(o,a),t._updateRollback()),o.hideDelegation(),t.draw(!1),o=null,e=void 0,n=void 0,i=void 0,a=void 0,o=void 0,s=void 0,c=!1,void(u=void 0)):(o=void 0,void(c=!1))})}},function(t,e,n){"use strict";var i=n(3);i.shortcut=function(t){var e=!1;t._on("keydown",function(n){if(!e)return e=!0,32===n.keyCode&&("drag"===t.get("mode")?t.changeMode("edit"):t.changeMode("drag"),e=!0),n.metaKey&&67===n.keyCode?void t.copy():n.metaKey&&86===n.keyCode?void t.paste():n.metaKey&&n.altKey&&90===n.keyCode?void t.redo():n.metaKey&&90===n.keyCode?void t.updo():n.ctrlKey&&67===n.keyCode?void t.copy():n.ctrlKey&&86===n.keyCode?void t.paste():n.ctrlKey&&n.altKey&&90===n.keyCode?void t.redo():n.ctrlKey&&90===n.keyCode?void t.updo():8===n.keyCode?void t.del():void 0}),t._on("keyup",function(){e=!1})}},function(t,e,n){"use strict";var i=n(3);i.spreadout=function(t){t._on("click",function(e){var n=e.shape;n&&n.hasClass("spreadoutButton")&&(t.fire("spreadout",e),t.css({cursor:"default"}))}),t._on("spreadout",function(e){var n=t.get("dataMap"),i=e.item,r=i.get("id");n[r].isCollapsed=!1,t.clearAllActived(),t.refresh(!1),t.reRender()})}},function(t,e,n){"use strict";var i=n(3),r=n(8);i.wheelZoom=function(t){var e,n,i,a,o=1,s=1.05,u=t.get("rootGroup"),c=u.get("canvas"),h=setTimeout(function(){},100);t._on("mousewheel",function(l){e=l.originEvent,e.preventDefault(),n=e.wheelDelta,Math.abs(n)>10&&(i=c.getPointByClient(e.clientX,e.clientY),i={x:i.x/c.get("pixelRatio"),y:i.y/c.get("pixelRatio")},a=u.getMatrix().clone(),n>0?(o*=s,r.scaleMatrix(s,i,a),t.updateMatrix(a)):(o/=s,r.scaleMatrix(1/s,i,a),t.updateMatrix(a)),t.refresh(),clearTimeout(h),h=setTimeout(function(){t.draw(!1)},100))})}},function(t,e,n){"use strict";var i=n(3);i.wheelZoomHideEdges=function(t){var e=t.get("edgeGroup"),n=setTimeout(function(){},100);t._on("mousewheel",function(){clearTimeout(n),e.hide(),t.refresh(),n=setTimeout(function(){e.show(),t.draw(!1)},100)})}},function(t,e,n){"use strict";var i=n(9),r=n(3),a=n(148);a.Mode={"default":["dragBlank","collapse","spreadout","buttonPointer","wheelZoom"]},i.registNode("tree-node",{style:function(){return{fillOpacity:1}}},"rect"),r.registMode(a),t.exports=a},function(t,e,n){"use strict";function i(){this.elements=[1,0,0,0,1,0,0,0,1]}var r=n(1),a=n(6);i.multiply=function(t,e){var n=t.elements,r=e.elements,a=new i;return a.set(n[0]*r[0]+n[3]*r[1]+n[6]*r[2],n[0]*r[3]+n[3]*r[4]+n[6]*r[5],n[0]*r[6]+n[3]*r[7]+n[6]*r[8],n[1]*r[0]+n[4]*r[1]+n[7]*r[2],n[1]*r[3]+n[4]*r[4]+n[7]*r[5],n[1]*r[6]+n[4]*r[7]+n[7]*r[8],n[2]*r[0]+n[5]*r[1]+n[8]*r[2],n[2]*r[3]+n[5]*r[4]+n[8]*r[5],n[2]*r[6]+n[5]*r[7]+n[8]*r[8])},i.equal=function(t,e){for(var n=t.elements,i=e.elements,r=!0,o=0,s=n.length;o<s;o++)if(!a.equal(n[o],i[o])){r=!1;break}return r},r.augment(i,{type:"matrix3",set:function(t,e,n,i,r,a,o,s,u){var c=this.elements;return c[0]=t,c[3]=e,c[6]=n,c[1]=i,c[4]=r,c[7]=a,c[2]=o,c[5]=s,c[8]=u,this},get:function(t,e){return t--,e--,this.elements[3*e+t]},identity:function(){return this.set(1,0,0,0,1,0,0,0,1)},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},det:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],u=t[7],c=t[8];return e*a*c-e*o*u-n*r*c+n*o*s+i*r*u-i*a*s},inverse:function(t){return this.copy(this.getInverse(t))},getInverse:function(t){var e=this.det();if(0===e){if(t)throw"matrix exception: get inverse matrix with 0 det";return console.warn("matrix cannot inverse"),new i}var n=this.elements,r=(n[0],n[3],n[6],n[1],n[4],n[7],n[2],n[5],n[8],new i);return r.set(n[4]*n[8]-n[7]*n[5],-(n[3]*n[8]-n[6]*n[5]),n[3]*n[7]-n[6]*n[4],-(n[1]*n[8]-n[7]*n[2]),n[0]*n[8]-n[6]*n[2],-(n[0]*n[7]-n[6]*n[1]),n[1]*n[5]-n[4]*n[2],-(n[0]*n[5]-n[3]*n[2]),n[0]*n[4]-n[3]*n[1]),r.multiplyScalar(1/e),r},transpose:function(){var t,e=this.elements;return t=e[1],
e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},multiply:function(t){return this.copy(i.multiply(this,t))},translate:function(t,e){var n=new i;return n.set(1,0,t,0,1,e,0,0,1),this.copy(i.multiply(n,this))},rotate:function(t){var e=new i;return e.set(Math.cos(t),-Math.sin(t),0,Math.sin(t),Math.cos(t),0,0,0,1),this.copy(i.multiply(e,this))},scale:function(t,e){var n=new i;return n.set(t,0,0,0,e,0,0,0,1),this.copy(i.multiply(n,this))},equal:function(t){return i.equal(this,t)},copy:function(t){for(var e=t.elements,n=this.elements,i=0,r=e.length;i<r;i++)n[i]=e[i];return this},clone:function(){for(var t=new i,e=t.elements,n=this.elements,r=0,a=n.length;r<a;r++)e[r]=n[r];return t},to2DObject:function(){var t=this.elements;return{a:t[0],b:t[1],c:t[3],d:t[4],e:t[6],f:t[7]}},from2DObject:function(t){var e=this.elements;return e[0]=t.a,e[1]=t.b,e[3]=t.c,e[4]=t.d,e[6]=t.e,e[7]=t.f,this}}),t.exports=i},function(t,e,n){"use strict";function i(t,e){if(1===arguments.length){var n=t;t=n[0],e=n[1]}this.x=t||0,this.y=e||0}var r=n(1),a=n(6);i.add=function(t,e){return new i(t.x+e.x,t.y+e.y)},i.sub=function(t,e){return new i(t.x-e.x,t.y-e.y)},i.lerp=function(t,e,n){return new i(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},i.angle=function(t,e){var n=t.dot(e)/(t.length()*e.length());return Math.acos(a.clamp(n,-1,1))},i.direction=function(t,e){return t.x*e.y-e.x*t.y},r.augment(i,{type:"vector2",set:function(t,e){return this.x=t,this.y=e,this},setComponent:function(t,e){switch(t){case 0:return this.x=e,this;case 1:return this.y=e,this;default:throw new Error("the index out of range:"+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("the index out of range:"+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t){return this.copy(i.add(this,t))},sub:function(t){return this.copy(i.sub(this,t))},subBy:function(t){return this.copy(i.sub(t,this))},multiplyScaler:function(t){return this.x*=t,this.y*=t,this},divideScaler:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e}else this.x=0,this.y=0;return this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this},clampScale:function(){var t,e;return function(n,r){return void 0===t&&(t=new i,e=new i),t.set(n,n),e.set(r,r),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSq())},normalize:function(){return this.divideScaler(this.length())},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},angleTo:function(t,e){var n=this.angle(t),r=i.direction(this,t)>=0;return e?r?2*Math.PI-n:n:r?n:2*Math.PI-n},vertical:function(t){return t?new i(this.y,(-this.x)):new i((-this.y),this.x)},angle:function(t){return i.angle(this,t)},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScaler(t/e),this},isZero:function(){return 0===this.x&&0===this.y},lerp:function(t,e){return this.copy(i.lerp(this,t,e))},equal:function(t){return a.equal(this.x,t.x)&&a.equal(this.y,t.y)},clone:function(){return new i(this.x,this.y)},rotate:function(t){var e=this.x*Math.cos(t)-this.y*Math.sin(t),n=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=e,this.y=n,this}}),t.exports=i},function(t,e,n){"use strict";function i(t,e,n){if(1===arguments.length)if(r.isArray(t)){var i=t;t=i[0],e=i[1],n=i[2]}else if("vector2"===t.type){var a=t;t=a.x,e=a.y,n=1}this.x=t||0,this.y=e||0,this.z=n||0}var r=n(1),a=n(6);i.add=function(t,e){return new i(t.x+e.x,t.y+e.y,t.z+e.z)},i.sub=function(t,e){return new i(t.x-e.x,t.y-e.y,t.z-e.z)},i.lerp=function(t,e,n){return new i(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n,t.z+(e.z-t.z)*n)},i.cross=function(t,e){var n=t.x,r=t.y,a=t.z,o=e.x,s=e.y,u=e.z;return new i(r*u-a*s,a*o-n*u,n*s-r*o)},i.angle=function(t,e){var n=t.dot(e)/(t.length()*e.length());return Math.acos(a.clamp(n,-1,1))},r.augment(i,{type:"vector3",set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setComponent:function(t,e){switch(t){case 0:return this.x=e,this;case 1:return this.y=e,this;case 2:return this.z=e,this;default:throw new Error("index is out of range:"+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range:"+t)}},add:function(t){return this.copy(i.add(this,t))},sub:function(t){return this.copy(i.sub(this,t))},subBy:function(t){return this.copy(i.sub(t,this))},multiplyScaler:function(t){return this.x*=t,this.y*=t,this.z*=t,this},divideScaler:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e,this.z*=e}else this.x=0,this.y=0,this.z=0;return this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this.z<t.z?this.z=t.z:this.z>e.z&&(this.z=e.z),this},clampScale:function(){var t,e;return function(n,r){return void 0===t&&(t=new i,e=new i),t.set(n,n,n),e.set(r,r,r),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.lengthSq())},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScaler(this.length())},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScaler(t/e),this},lerp:function(t,e){return this.copy(i.lerp(this,t,e))},cross:function(t){return this.copy(i.cross(this,t))},angle:function(t){return i.angle(this,t)},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},applyMatrix:function(t){var e=t.elements,n=e[0]*this.x+e[3]*this.y+e[6]*this.z,i=e[1]*this.x+e[4]*this.y+e[7]*this.z,r=e[2]*this.x+e[5]*this.y+e[8]*this.z;return this.x=n,this.y=i,this.z=r,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=void 0!==t.z?t.z:1,this},equal:function(t){return a.equal(this.x,t.x)&&a.equal(this.y,t.y)&&a.equal(this.z,t.z)},clone:function(){return new i(this.x,this.y,this.z)}}),t.exports=i},function(t,e,n){var i=n(85);t.exports=i},function(t,e,n){"use strict";var i=n(1),r=function(t,e,n,i){this.type=t,this.target=null,this.currentTarget=null,this.bubbles=n,this.cancelable=i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.removed=!1,this.event=e};i.augment(r,{preventDefault:function(){this.defaultPrevented=this.cancelable&&!0},stopPropagation:function(){this.propagationStopped=!0},remove:function(){this.remove=!0},clone:function(){return i.clone(this)},toString:function(){return"[Event (type="+this.type+")]"}}),t.exports=r},function(t,e,n){var i=n(89);t.exports={interpolation:i.interpolation,unInterpolation:i.unInterpolation}},function(t,e,n){"use strict";function i(t,e){for(var n=[],i=Math.min(t.length,e.length),r=0;r<i;r++)n[r]=a.singular(t[r],e[r]);return function(t){for(var e=[],r=0;r<i;r++)e[r]=n[r](t);return e}}function r(t,e){for(var n=[],i=Math.min(t.length,e.length),r=0;r<i;r++)n[r]=a.unSingular(t[r],e[r]);return function(t){for(var e=Math.min(n.length,t.length),i=0,r=0,a=0;a<e;a++)i+=n[a](t[a]),r++;return 0===r?0:i/r}}var a=n(13);t.exports={array:i,unArray:r}},function(t,e,n){"use strict";function i(t,e){switch(e.getType()){case"rgb":return a(t,e);case"hsl":return s(t,e)}}function r(t,e){switch(e.getType()){case"rgb":return o(t,e);case"hsl":return u(t,e)}}function a(t,e){var n=t.getR(),i=t.getG(),r=t.getB(),a=t.getA(),o=e.getR()-n,s=e.getG()-i,u=e.getB()-r,h=e.getA();return void 0===a&&void 0===h||(a=a||1,h=(void 0===h?1:h)-a),function(t){var e=new c;return e.setRGB(n+o*t,i+s*t,r+u*t,void 0!==a&&void 0!==h?a+h*t:void 0),e.getRGBStyle()}}function o(t,e){var n=t.getR(),i=t.getG(),r=t.getB(),a=t.getA(),o=e.getR()-n,s=e.getG()-i,u=e.getB()-r,h=e.getA();return void 0===a&&void 0===h||(a=a||1,h=(void 0===h?1:h)-a),function(t){if(t=new c(t),!t.getType())return 0;var e=t.getR(),l=t.getG(),f=t.getB(),d=t.getA();d=d||1;var g=0,p=0;return 0!==o&&(g+=(e-n)/o,p++),0!==s&&(g+=(l-i)/s,p++),0!==u&&(g+=(f-r)/u,p++),0!==h&&h&&(g+=(d-a)/h,p++),0===p?0:g/p}}function s(t,e){var n=t.getH(),i=t.getS(),r=t.getL(),a=t.getA(),o=e.getH()-n,s=e.getS()-i,u=e.getL()-r,h=e.getA();return void 0===a&&void 0===h||(a=a||1,h=(void 0===h?1:h)-a),function(t){var e=new c;return e.setHSL(n+o*t,i+s*t,r+u*t,void 0!==a&&void 0!==h?a+h*t:void 0),e.getHSLStyle()}}function u(t,e){var n=t.getH(),i=t.getS(),r=t.getL(),a=t.getA(),o=e.getH()-n,s=e.getS()-i,u=e.getL()-r,h=e.getA();return void 0===a&&void 0===h||(a=a||1,h=(void 0===h?1:h)-a),function(t){if(t=new c(t),!t.getType())return 0;var e=t.getH(),l=t.getS(),f=t.getL(),d=t.getA();d=d||1;var g=0,p=0;return 0!==o&&(g+=(e-n)/o,p++),0!==s&&(g+=(l-i)/s,p++),0!==u&&(g+=(f-r)/u,p++),0!==h&&h&&(g+=(d-a)/h,p++),0===p?0:g/p}}var c=n(17);t.exports={color:i,unColor:r}},function(t,e,n){"use strict";function i(t,e){return t instanceof l&&e instanceof l?c.matrix(t,e):a.isArray(t)&&a.isArray(e)?o.array(t,e):a.isObject(t)&&a.isObject(e)?s.object(t,e):u.singular(t,e)}function r(t,e){return t instanceof l&&e instanceof l?c.unMatrix(t,e):a.isArray(t)&&a.isArray(e)?o.unArray(t,e):a.isObject(t)&&a.isObject(e)?s.unObject(t,e):u.unSingular(t,e)}var a=n(1),o=n(87),s=n(92),u=n(13),c=n(90),h=n(2),l=h.Matrix3;t.exports={interpolation:i,unInterpolation:r}},function(t,e,n){"use strict";function i(t,e){for(var n=[],i=t.elements,r=e.elements,o=0;o<u;o++)n[o]=a.singular(i[o],r[o]);return function(t){for(var e=new s,i=e.elements,r=0;r<u;r++)i[r]=n[r](t);return e}}function r(t,e){for(var n=[],i=t.elements,r=e.elements,o=0;o<u;o++)n[o]=a.unSingular(i[o],r[o]);return function(t){for(var e=t.elements,i=0,r=0,a=0;a<u;a++){var o=n[a](e[a]);0!==o&&(i+=o,r++)}return i/r}}var a=n(13),o=n(2),s=o.Matrix3,u=9;t.exports={matrix:i,unMatrix:r}},function(t,e){"use strict";function n(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function i(t,e){return e-=t,function(n){return 0===e?0:(n-t)/e}}t.exports={number:n,unNumber:i}},function(t,e,n){"use strict";function i(t,e){var n={};for(var i in t)i in e&&(n[i]=a.singular(t[i],e[i]));return function(t){var e={};for(var i in n)e[i]=n[i](t);return e}}function r(t,e){var n={};for(var i in t)i in e&&(n[i]=a.unSingular(t[i],e[i]));return function(t){var e=0,i=0;for(var r in n)r in t&&(e+=n[r](t[r]),i++);return 0===i?0:e/i}}var a=n(13);t.exports={object:i,unObject:r}},function(t,e,n){"use strict";function i(t){this.space={},r.isString(t)?this.setStyle(t):t instanceof i&&this.copy(t)}var r=n(1),a=(n(6),n(95)),o=n(96),s=n(94),u={hex:/^#([A-Fa-f0-9]{3}|[A-Fa-f0-9]{6})$/,space:/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)$/,rgbNum:/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*$/,rgbaNum:/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([0-9]*\.?[0-9]+)\s*$/,rgbPre:/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*$/,rgbaPre:/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*([0-9]*\.?[0-9]+)\s*$/,hsl:/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*$/,hsla:/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*([0-9]*\.?[0-9]+)\s*$/};r.augment(i,{getType:function(){return this.space.type},toRGB:function(){var t=this.space;if("rgb"!==t.type){var e=t.toRGB();this.setRGB(e.r,e.g,e.b,e.a)}},toHSL:function(){var t=this.space;if("hsl"!==t.type){var e=t.toHSL();this.setHSL(e.h,e.s,e.l,e.a)}},getR:function(){return this.toRGB(),this.space.r},getG:function(){return this.toRGB(),this.space.g},getB:function(){return this.toRGB(),this.space.b},getH:function(){return this.toHSL(),this.space.h},getS:function(){return this.toHSL(),this.space.s},getL:function(){return this.toHSL(),this.space.l},getA:function(){return this.space.a},multiplyA:function(t){return void 0===t?this:(void 0===this.space.a&&(this.space.a=1),this.space.a*=t,this)},getRGBStyle:function(){return this.toRGB(),this.space.getStyle()},getRGBPreStyle:function(){return this.toRGB(),this.space.getPreStyle()},getHSLStyle:function(){return this.toHSL(),this.space.getStyle()},getHex:function(){return this.toRGB(),this.space.getHex()},setRGB:function(t,e,n,i){return this.space=new o,this.space.setRGB(t,e,n,i),this},setHSL:function(t,e,n,i){return this.space=new a,this.space.setHSL(t,e,n,i),this},setHex:function(t){return this.space=new o,t=Math.floor(t),this.space.r=(t>>16&255)/255,this.space.g=(t>>8&255)/255,this.space.b=(255&t)/255,this},setStyle:function(t){var e;if(e=u.hex.exec(t)){var n=e[1],i=n.length;if(3===i)return this.setRGB(parseInt(n.charAt(0)+n.charAt(0),16)/255,parseInt(n.charAt(1)+n.charAt(1),16)/255,parseInt(n.charAt(2)+n.charAt(2),16)/255),this;if(6===i)return this.setRGB(parseInt(n.charAt(0)+n.charAt(1),16)/255,parseInt(n.charAt(2)+n.charAt(3),16)/255,parseInt(n.charAt(4)+n.charAt(5),16)/255),this}else if(e=u.space.exec(t)){var r,a=e[1],o=e[2];switch(a){case"rgb":if(r=u.rgbNum.exec(o))return this.setRGB(parseInt(r[1],10)/255,parseInt(r[2],10)/255,parseInt(r[3],10)/255),this;if(r=u.rgbPre.exec(o))return this.setRGB(parseInt(r[1],10)/100,parseInt(r[2],10)/100,parseInt(r[3],10)/100),this;break;case"rgba":if(r=u.rgbaNum.exec(o))return this.setRGB(parseInt(r[1],10)/255,parseInt(r[2],10)/255,parseInt(r[3],10)/255,parseFloat(r[4])),this;if(r=u.rgbaPre.exec(o))return this.setRGB(parseInt(r[1],10)/100,parseInt(r[2],10)/100,parseInt(r[3],10)/100,parseFloat(r[4])),this;break;case"hsl":if(r=u.hsl.exec(o))return this.setHSL(parseInt(r[1],10)/360,parseInt(r[2],10)/100,parseInt(r[3],10)/100),this;break;case"hsla":if(r=u.hsla.exec(o))return this.setHSL(parseInt(r[1],10)/360,parseInt(r[2],10)/100,parseInt(r[3],10)/100,parseFloat(r[4])),this}}else t=t.toLowerCase(),void 0!==s[t]?this.setHex(s[t]):this.setHex(s.black)},copy:function(t){this.space=t.space.clone()},clone:function(){return new i(this)}}),t.exports=i},function(t,e){t.exports={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074}},function(t,e,n){"use strict";var i=n(1),r=n(6),a=function(){this.h=0,this.s=0,this.l=0};i.augment(a,{type:"hsl",setHSL:function(t,e,n,i){this.h=r.mod(t,1),this.s=r.clamp(e,0,1),this.l=r.clamp(n,0,1),void 0!==i?this.a=r.clamp(i,0,1):this.a=void 0},toRGB:function(){function t(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(){var e=this,n=e.h,i=e.s,r=e.l;if(0===i)return{r:r,g:r,b:r,a:e.a};var a=r<=.5?r*(1+i):r+i-r*i,o=2*r-a;return{r:t(o,a,n+1/3),g:t(o,a,n),b:t(o,a,n-1/3),a:e.a}}}(),clone:function(){var t=new a;return t.h=this.h,t.s=this.s,t.l=this.l,t.a=this.a,t},copy:function(t){return this.h=t.h,this.s=t.s,this.l=t.l,this.a=t.a,this},getStyle:function(){var t=this;return void 0===t.a?"hsl("+Math.round(360*t.h)+", "+Math.round(100*t.s)+"%, "+Math.round(100*t.l)+"%)":"hsla("+Math.round(360*t.h)+", "+Math.round(100*t.s)+"%, "+Math.round(100*t.l)+"%, "+t.a+")"}}),t.exports=a},function(t,e,n){"use strict";var i=n(1),r=n(6),a=function(){this.r=0,this.g=0,this.b=0,this.type="rgb"};i.augment(a,{type:"rgb",setRGB:function(t,e,n,i){this.r=r.clamp(t,0,1),this.g=r.clamp(e,0,1),this.b=r.clamp(n,0,1),void 0!==i?this.a=r.clamp(i,0,1):this.a=void 0},toHSL:function(){var t,e,n=this.r,i=this.g,r=this.b,a=Math.max(n,i,r),o=Math.min(n,i,r),s=(o+a)/2;if(o===a)t=0,e=0;else{var u=a-o;switch(e=s<=.5?u/(a+o):u/(2-a-o),a){case n:t=(i-r)/u+(i<r?6:0);break;case i:t=(r-n)/u+2;break;case r:t=(n-i)/u+4}t/=6}return{h:t,s:e,l:s,a:this.a}},getHex:function(){var t=255*this.r<<16^255*this.g<<8^255*this.b<<0;return"#"+("000000"+t.toString(16)).slice(-6)},getStyle:function(){return void 0===this.a?"rgb("+Math.round(255*this.r).toString()+", "+Math.round(255*this.g).toString()+", "+Math.round(255*this.b).toString()+")":"rgba("+Math.round(255*this.r).toString()+", "+Math.round(255*this.g).toString()+", "+Math.round(255*this.b).toString()+", "+this.a+")"},getPreStyle:function(){return void 0===this.a?"rgb("+Math.round(100*this.r).toString()+"%, "+Math.round(100*this.g).toString()+"%, "+Math.round(100*this.b).toString()+"%)":"rgba("+Math.round(100*this.r).toString()+"%, "+Math.round(100*this.g).toString()+"%, "+Math.round(100*this.b).toString()+"%, "+this.a+")"},clone:function(){var t=new a;return t.r=this.r,t.g=this.g,t.b=this.b,t.a=this.a,t},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}}),t.exports=a},function(t,e,n){"use strict";var i=n(19),r=n(10),a=n(98),o=function(t){o.superclass.constructor.call(this,t),this._init()};i.extend(o,r),o.ATTRS={time:0,createTime:null,playTime:null,pauseTimeSpace:0,available:!1,canvases:[],tweens:[],endTime:0,infinite:!1,removeCanvas:!0,autoPlay:!1,autoDraw:!0,loop:!1,status:"silent",autoDestroy:!0},i.augment(o,{_init:function(){window.tween=this;var t=this.get("autoPlay");this.set("createTime",+new Date),t&&this.play()},_trySetEndTime:function(t){var e=this;i.isObject(t)?e._setEndTime(t):i.isArray(t)&&i.each(t,function(t,n){e._setEndTime(t)})},_trySetCanvases:function(t){var e=this;i.isObject(t)?e._setCanvases(t):i.isArray(t)&&i.each(t,function(t,n){e._setCanvases(t)})},_setEndTime:function(t){var e=this.get("endTime"),n=t.get("endTime");n>e&&this.set("endTime",n)},_setCanvases:function(t){var e=t.get("canvas"),n=this.get("canvases");n.indexOf(e)===-1&&n.push(e)},_resetTweens:function(){var t=this.get("tweens");t.sort(function(t,e){return e.get("startTime")-t.get("startTime")}),i.each(t,function(t){t.reset()})},_getTime:function(){var t=this.get("playTime"),e=this.get("pauseTimeSpace");return+new Date-t+e},_refresh:function(t){for(var e,n,r=this.get("tweens"),a=this.get("canvases"),o=this.get("autoDraw"),s=this.get("autoDestroy"),u=this.get("removeCanvas"),c=[],h=[],l=0;l<r.length;l++)n=r[l],e=n.get("canvas"),n.get("needsDestroy")&&s?n.destroy():n.get("destroyed")||n.get("needsDestroy")||n.tryStep(t),n.destroyed||c.push(n),i.inArray(a,e)||h.push(e);o&&this.draw(),u&&this.set("canvases",h),this.set("tweens",c)},_update:function(){if(this.get("available")){var t=this,e=t._getTime(),n=t.get("endTime"),r=t.get("loop"),a=t.get("infinite"),o=t.get("tweens");t._refresh(e),t.fire("update"),i.requestAnimationFrame(function(){e<=n+32||a||o.length>0?t._update():t._tryShut(),e>n&&r&&(t.set("pauseTimeSpace",0),t._resetTweens(),t.set("playTime",+new Date))})}},_tryShut:function(){var t=this;setTimeout(function(){var e=t._getTime(),n=t.get("endTime"),i=t.get("tweens");e<=n+100&&i.length>0?t._update():(t.reset(),t.set("status","silent"))},100)},animate:function(t,e){var n=new a({target:t,timeline:this,startTime:e?e:0});return n},add:function(t){var e,n=this.get("tweens");return i.isArray(t)?e=n.concat(t):i.isObject(t)&&"tween"===t.get("type")?(n.push(t),e=n):console.error("Timeline not Support this type"),this.set("tweens",e),this._trySetCanvases(t),this._trySetEndTime(t),this._removeOverdueTweens(),this},_removeOverdueTweens:function(){var t=this.get("tweens"),e=this.getNow();i.each(t,function(n,r){i.isObject(n)&&n.get("endTime")<e&&n.get("needsDestroy")&&(n.destroyed||n.destroy(),t.splice(r,1))})},getNow:function(){var t=this.get("playTime");return t?+new Date-t:0},getTime:function(){var t=this.get("playTime");return t?+new Date-t:0},play:function(){var t=this.get("status");return"silent"===t&&(this.set("playTime",+new Date),this.set("available",!0),this.set("status","playing"),this._update()),this},loop:function(t){return t||void 0===t?(this.set("infinite",!0),this.set("autoDestroy",!1),this.set("removeCanvas",!1),this.set("loop",!0)):this.set("loop",!1),this},stop:function(){this.set("status","silent"),this.set("available",!1),this.set("pauseTimeSpace",0),this._resetTweens(),this._refresh(0),this.draw()},pause:function(){var t=this.get("available");return t&&this.set("pauseTimeSpace",+new Date-this.get("playTime")),this.set("available",!1),this.set("status","silent"),this},reset:function(){this.set("playTime",0),this.set("endTime",0),this.set("canvases",[])},draw:function(){for(var t,e=this.get("canvases"),n=0;n<e.length;n++)t=e[n],!t.get("destroyed")&&t.draw()}}),t.exports=o},function(t,e,n){"use strict";var i=n(19),r=n(33),a=n(10),o=n(34),s=n(2),u=(s.Matrix3,function(t){u.superclass.constructor.call(this,t)});i.extend(u,a),u.ATTRS={target:null,timeline:null,startTime:null},i.augment(u,{append:function(t,e,n,a){var s,u=i.guid("tween_"),c=this.get("target"),h=(this.get("tweens"),this.get("timeline")),l=this.get("startTime"),f=r.getKeyFrameByProps(c,e),d=f[1];return t=t?t:l,e&&e.delay&&(t+=e.delay),s=new o({id:u,canvas:c.get("canvas"),startTime:t,target:c,easing:n,callBack:a,endKeyFrame:d,duration:e.duration?e.duration:1e3,repeat:!!e.repeat&&e.repeat,destroyTarget:!!e.destroy&&e.destroy}),h&&h.add(s),this}}),t.exports=u},function(t,e,n){"use strict";function i(t){if(!t._attrs&&t!==r){var e=t.superclass.constructor;e&&!e._attrs&&i(e),t._attrs={},a.mix(!0,t._attrs,e._attrs),a.mix(!0,t._attrs,t.ATTRS)}}var r,a=n(1);r=function(t){i(this.constructor),this._attrs={},this.events={};var e=this.getDefaultCfg();a.mix(this._attrs,e,t)},a.augment(r,{getDefaultCfg:function(){var t=this,e=t.constructor,n=e._attrs,i=a.mix(!0,{},n);return i},set:function(t,e){var n="_onRender"+a.ucfirst(t);return this[n]&&this[n](e,this._attrs[t]),this._attrs[t]=e,this},get:function(t){return this._attrs[t]},on:function(t,e){var n=this,i=n.events,r=i[t];return r||(r=i[t]=[]),r.push(e),n},fire:function(t,e){var n=this,i=n.events,r=i[t];r&&a.each(r,function(t){t(e)})},off:function(t,e){var n=this,i=n.events,r=i[t];return t?(r&&a.remove(r,e),n):(n.events={},n)},destroy:function(){var t=this,e=t.destroyed;return e?t:(t._attrs={},t.events={},void(t.destroyed=!0))}}),t.exports=r},function(t,e,n){var i=n(101);t.exports=i},function(t,e){"use strict";function n(t,e,i){i=i||0;for(var r in e)if(e.hasOwnProperty(r)){var s=e[r];null!==s&&o.isObject(s)?(o.isObject(t[r])||(t[r]={}),i<a?n(t[r],e[r],i+1):t[r]=e[r]):o.isArray(s)?(t[r]=[],t[r]=t[r].concat(s)):void 0!==s&&(t[r]=e[r])}}var i=Object.prototype,r=i.toString,a=5,o={substitute:function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]}):t},ucfirst:function(t){return t+="",t.charAt(0).toUpperCase()+t.substring(1)},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},isBoolean:function(t){return"boolean"==typeof t},isFunction:function(t){return"function"==typeof t},isArray:"isArray"in Array?Array.isArray:function(t){return"[object Array]"===r.call(t)},isDate:function(t){return"[object Date]"===r.call(t)},isNull:function(t){return void 0===t||null===t},notNull:function(t){return!o.isNull(t)},isBlank:function(t){if(o.isArray(t))return 0===t.length;if(o.isObject(t)){var e=0;return o.each(t,function(t,n){e++}),0===e}return!1},isObject:"[object Object]"===r.call(null)?function(t){return null!==t&&void 0!==t&&"[object Object]"===r.call(t)&&void 0===t.ownerDocument}:function(t){return"[object Object]"===r.call(t)},extend:function(t,e,n,i){o.isFunction(e)||(n=e,e=t,t=function(){});var r=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}n.prototype=t;var i=new n;return i.constructor=e,i},a=r(e.prototype,t);return t.prototype=o.mix(a,t.prototype),t.superclass=r(e.prototype,e),o.mix(a,n),o.mix(t,i),t},augment:function(t){for(var e=o.toArray(arguments),n=1;n<e.length;n++){var i=e[n];o.isFunction(i)&&(i=i.prototype),o.mix(t.prototype,i)}},toArray:function(t){return t&&t.length?Array.prototype.slice.call(t):[]},mix:function(){var t=o.toArray(arguments),e=t[0];if(e===!0){e=t[1];for(var i=2;i<t.length;i++){var r=t[i];n(e,r)}}else for(var i=1;i<t.length;i++){var r=t[i];for(var a in r)r.hasOwnProperty(a)&&"constructor"!==a&&(e[a]=r[a])}return e},each:function(t,e){if(t)if(o.isObject(t)){for(var n in t)if(t.hasOwnProperty(n)){var i=e(t[n],n);if(i===!1)break}}else if(t.length)for(var r=0;r<t.length;r++){var i=e(t[r],r);if(i===!1)break}},requestAnimationFrame:function(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return setTimeout(t,16)};return e(t)},cancelAnimationFrame:function(t){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||function(t){return clearTimeout(t)};return e(t)}};t.exports=o},function(t,e,n){var i=n(103);i.Util=n(36),t.exports=i},function(t,e,n){"use strict";function i(t,e,n,i){var r=t[i]+(e[i]-t[i])*n;return r}var r=n(36),a=n(1),o={calColor:function(t,e,n){var a,o=t.length-1,s=Math.floor(o*e),u=o*e-s,c=t[s],h=s===o?c:t[s+1];return"hsl"===n?a=r.hsl2Rgb([i(c,h,u,0),i(c,h,u,1),i(c,h,u,2)]):(a={r:i(c,h,u,0),g:i(c,h,u,1),b:i(c,h,u,2)},a="#"+r.toHex(a.r)+r.toHex(a.g)+r.toHex(a.b)),a},lightness:function(t,e){e=e||0;var n=[[e,1,.9],[e,1,.5]];return o.calColor(n,t,"hsl")},red:function(t){return o.lightness(t,0)},blue:function(t){return o.lightness(t,.66)},green:function(t){return o.lightness(t,.33)},gradient:function(t){var e=[];return a.isString(t)&&(t=t.split("-")),a.each(t,function(t){t.indexOf("#")===-1&&(t=r.toRGB(t)),e.push(r.rgb2arr(t))}),function(t){return o.calColor(e,t)}},gradientHsl:function(t){var e=[];return a.isString(t)&&(t=t.split("-")),a.each(t,function(t){t.indexOf("#")===-1&&(t=r.toRGB(t)),e.push(r.rgb2hsl(t))}),function(t){return o.calColor(e,t,"hsl")}},saturation:function(t,e){e=e||0;var n=[[e,0,.5],[e,1,.5]];return o.calColor(n,t,"hsl")},hue:function(t){var e=[[0,1,.5],[1,1,.5]];return o.calColor(e,t,"hsl")},brightness:function(t){var e=[[255,255,255],[0,0,0]];return o.calColor(e,t)},heat:function(t){var e=[[255,255,255],[255,127.5,0],[0,0,0]];return o.calColor(e,t)},rainbow:function(t){var e=[[0,255,255],[0,0,255],[0,255,0],[255,0,0]];return o.calColor(e,t)},circular:function(t){var e=[[0,0,255],[0,255,0],[255,255,0],[255,0,0],[0,0,255]];return o.calColor(e,t)},bipolar:function(t){var e=[[0,255,0],[0,0,0],[255,0,0]];return o.calColor(e,t)}};t.exports=o},function(t,e){"use strict";function n(t,e){var n=t.length;if(0===n)return NaN;var i=t[0];if(e<t[0])return NaN;if(e>=t[n-1])return t[n-1];for(var r=1;r<t.length&&!(e<t[r]);r++)i=t[r];return i}function i(t,e){var n=t.length;if(0===n)return NaN;var i,r=t[0];if(e>t[n-1])return NaN;if(e<t[0])return t[0];for(var a=1;a<t.length;a++){if(e<=t[a]){i=t[a];break}r=t[a]}return i}var r={PRECISION:1e-5,equal:function(t,e){return Math.abs(t-e)<r.PRECISION},clamp:function(t,e,n){return t<e?e:t>n?n:t},snapTo:function(t,e){var r=n(t,e),a=i(t,e);if(isNaN(r)||isNaN(a)){if(t[0]>=e)return t[0];var o=t[t.length-1];if(o<=e)return o}return Math.abs(e-r)<Math.abs(a-e)?r:a},snapFloor:function(t,e){return n(t,e)},snapCeiling:function(t,e){return i(t,e)},degreeToRad:function(t){return Math.PI/180*t},radToDegree:function(t){return 180/Math.PI*t},mod:function(t,e){return(t%e+e)%e}};t.exports=r},function(t,e,n){"use strict";function i(t,e){var n=e.toString(),i=n.indexOf(".");if(i===-1)return Math.round(t);var r=n.substr(i+1).length;return parseFloat(t.toFixed(r))}function r(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}var a=n(100);a.mix(a,{mixin:function(t,e){if(t&&e){t._mixins=e,t.ATTRS=t.ATTRS||{};var n={};a.each(e,function(e){a.augment(t,e);var i=e.ATTRS;i&&a.mix(n,i)}),t.ATTRS=a.mix(n,t.ATTRS)}},map:function(t,e){var n=[];return a.each(t,function(t,i){n.push(e(t,i))}),n},filter:function(t,e){var n=[];return a.each(t,function(t,i){e(t,i)&&n.push(t)}),n},guid:function(){var t={};return function(e){return e=e||"g",t[e]?t[e]+=1:t[e]=1,e+t[e]}}(),inArray:function(t,e){return a.indexOf(t,e)!==-1},indexOf:function(t,e){var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var i=-1,r=0;r<t.length;r++)if(t[r]===e){i=r;break}return i},remove:function(t,e){var n=a.indexOf(t,e);n!==-1&&t.splice(n,1)},empty:function(t){if(!(t instanceof Array))for(var e=t.length-1;e>=0;e--)delete t[e];t.length=0},equalsArray:function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=!0,i=0;i<t.length;i++)if(t[i]!==e[i]){n=!1;
break}return n},wrapBehavior:function(t,e){var n=function(n){t[e](n)};return t["_wrap_"+e]=n,n},getWrapBehavior:function(t,e){return t["_wrap_"+e]},fixedBase:function(t,e){return i(t,e)},length:function(t){if(a.isArray(t))return t.length;if(a.isObject(t)){var e=0;return a.each(t,function(){e++}),e}return 0},clone:function(t){if("object"!=typeof t||null===t)return t;var e;if(a.isArray(t)){e=[];for(var n=0,i=t.length;n<i;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=a.clone(t[n]):e[n]=t[n]}else{e={};for(var r in t)"object"==typeof t[r]&&null!=t[r]?e[r]=a.clone(t[r]):e[r]=t[r]}return e},simpleMix:function(t,e,n,i){return e&&r(t,e),n&&r(t,n),i&&r(t,i),t}}),t.exports=a},function(t,e,n){"use strict";var i=n(1),r=function(){};r.ATTRS={actived:!1},i.augment(r,{isActived:function(){return this.get("actived")},setActived:function(){this.setActiveStatus(!0),this.set("actived",!0)},setActiveStatus:function(){},clearActived:function(){this.setActiveStatus(!1),this.set("actived",!1),this.clearActivedItem&&this.clearActivedItem()}}),t.exports=r},function(t,e,n){"use strict";var i=n(1),r=function(){};r.ATTRS={multipleActive:!1},i.augment(r,{isItemActived:function(t){return t.isActived()},getActiveItems:function(){return this.get("children")},setItemActived:function(t,e){e?t.setActived():t.clearActived()},onActived:function(t){this.fire("itemactived",{item:t}),this.fireUpGroup&&this.fireUpGroup("actived",t)},onUnActived:function(t){this.fire("itemunactived",{item:t}),this.fireUpGroup&&this.fireUpGroup("unactived",t)},setActivedItem:function(t){var e=this,n=e.get("multipleActive");n||e.clearActivedItem(),t&&!e.isItemActived(t)&&(e.setItemActived(t,!0),e.onActived(t))},getActived:function(){var t=this,e=t.getActiveItems(),n=null;return i.each(e,function(e){if(t.isItemActived(e))return n=e,!1}),n},getAllActived:function(){var t=this,e=t.getActiveItems(),n=[];return i.each(e,function(e){t.isItemActived(e)&&n.push(e)}),n},clearAllActived:function(){var t=this,e=t.getAllActived();return i.each(e,function(e){t.setItemActived(e,!1),t.onUnActived(e)}),this},clearActivedItem:function(t){var e=this;return t=t||e.getActived(),t&&(e.setItemActived(t,!1),e.onUnActived(t)),this}}),t.exports=r},function(t,e,n){"use strict";var i=n(57),r=n(111),a=n(42),o=function(t){o.superclass.constructor.call(this,t)};o.CFG={eventEnable:!0,width:null,height:null,widthCanvas:null,heightCanvas:null,widthStyle:null,heightStyle:null,containerDOM:null,canvasDOM:null,pixelRatio:null},i.extend(o,a.Group),i.augment(o,{init:function(){o.superclass.init.call(this),this._setGlobalParam(),this._setDOM(),this._setInitSize(),this._setCanvas(),this._scale(),this.get("eventEnable")&&this._registEvents()},_registEvents:function(){var t=this,e=t.get("el"),n=new r(t);e.addEventListener("mouseout",function(t){n.mouseout(t)},!1),e.addEventListener("mouseover",function(t){n.mouseover(t)},!1),e.addEventListener("mousemove",function(t){n.mousemove(t)},!1),e.addEventListener("mousedown",function(t){n.mousedown(t)},!1),e.addEventListener("mouseup",function(t){n.mouseup(t)},!1),e.addEventListener("click",function(t){n.click(t)},!1),e.addEventListener("dblclick",function(t){n.dblclick(t)},!1)},_scale:function(){var t=this.get("pixelRatio");this.scale(t,t)},_setCanvas:function(){var t=this.get("canvasDOM");this.set("el",t),this.set("context",t.getContext("2d")),this.set("canvas",this)},_setGlobalParam:function(){var t=this.get("pixelRatio");t||this.set("pixelRatio",i.getRatio())},_setDOM:function(){this._setContainer(),this._setLayer()},_setContainer:function(){var t=this.get("containerId"),e=this.get("containerDOM");e||(e=document.getElementById(t),this.set("containerDOM",e)),i.modiCSS(e,{position:"relative"})},_setLayer:function(){var t=this.get("containerDOM"),e=i.guid("canvas_");if(t){var n=i.createDom('<canvas id="'+e+'"></canvas>');t.appendChild(n),this.set("canvasDOM",n)}},_setInitSize:function(){this.get("widthStyle")?this.changeSizeByCss(this.get("widthStyle"),this.get("heightStyle")):this.get("width")&&this.changeSize(this.get("width"),this.get("height"))},_getPx:function(t,e){var n=this.get("canvasDOM");n.style[t]=e;var r=i.getBoundingClientRect(n);return"width"===t?r.right-r.left:"height"===t?r.bottom-r.top:void 0},_reSize:function(){var t=this.get("canvasDOM"),e=this.get("widthCanvas"),n=this.get("heightCanvas"),i=this.get("widthStyle"),r=this.get("heightStyle");t.style.width=i,t.style.height=r,t.setAttribute("width",e),t.setAttribute("height",n)},getWidth:function(){var t=this.get("pixelRatio"),e=this.get("width");return e*t},getHeight:function(){var t=this.get("pixelRatio"),e=this.get("height");return e*t},changeSizeByCss:function(t,e){var n=this.get("pixelRatio");t=this._getPx("width",t),e=this._getPx("height",e);var i=t*n,r=e*n;this.set("widthStyle",t),this.set("heightStyle",e),this.set("widthCanvas",i),this.set("heightCanvas",r),this.set("width",t),this.set("height",e),this._reSize()},changeSize:function(t,e){var n=this.get("pixelRatio"),i=t*n,r=e*n;this.set("widthCanvas",i),this.set("heightCanvas",r),this.set("widthStyle",t+"px"),this.set("heightStyle",e+"px"),this.set("width",t),this.set("height",e),this._reSize()},getPointByClient:function(t,e){var n=this.get("el"),i=n.getBoundingClientRect(),r=i.right-i.left,a=i.bottom-i.top;return{x:(t-i.left)*(n.width/r),y:(e-i.top)*(n.height/a)}},getClientByPoint:function(t,e){var n=this.get("el"),i=n.getBoundingClientRect(),r=i.right-i.left,a=i.bottom-i.top;return{clientX:t/(n.width/r)+i.left,clientY:e/(n.height/a)+i.top}},beforeDraw:function(){var t=this.get("context"),e=this.get("el");t&&t.clearRect(0,0,e.width,e.height)},_beginDraw:function(){this.setSilent("toDraw",!0)},_endDraw:function(){this.setSilent("toDraw",!1)},draw:function(){function t(){e.set("animateHandler",i.requestAnimationFrame(function(){e.set("animateHandler",void 0),e.get("toDraw")&&t()})),e.beforeDraw();try{var n=e.get("context");o.superclass.draw.call(e,n)}catch(r){console.warn("error in draw canvas, detail as:"),console.warn(r),e._endDraw()}e._endDraw()}var e=this;e.get("destroyed")||(e.get("animateHandler")?this._beginDraw():t())},destroy:function(){var t=this.get("containerDOM"),e=this.get("canvasDOM");e&&t&&t.removeChild(e),o.superclass.destroy.call(this)}}),t.exports=o},function(t,e,n){"use strict";var i=n(1),r=function(t,e,n,i){this.type=t,this.target=null,this.currentTarget=null,this.bubbles=n,this.cancelable=i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.removed=!1,this.event=e};i.augment(r,{preventDefault:function(){this.defaultPrevented=this.cancelable&&!0},stopPropagation:function(){this.propagationStopped=!0},remove:function(){this.remove=!0},clone:function(){return i.clone(this)},toString:function(){return"[Event (type="+this.type+")]"}}),t.exports=r},function(t,e,n){var i=n(1),r=n(109);t.exports={initEventDispatcher:function(){this.__listeners={}},on:function(t,e){var n=this.__listeners;return i.isNull(n[t])&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e),this},off:function(t,e){var n=this.__listeners;return 0===arguments.length?(this.__listeners={},this):1===arguments.length&&i.isString(t)?(n[t]=[],this):2===arguments.length&&i.isString(t)&&i.isFunction(e)?(i.remove(n[t],e),this):void 0},has:function(t,e){var n=this.__listeners;return 0===arguments.length&&!i.isBlank(n)||(!(1!==arguments.length||!n[t]||i.isBlank(n[t]))||!(2!==arguments.length||!n[t]||n[t].indexOf(e)===-1))},trigger:function(t){var e=this,n=e.__listeners,r=n[t.type];if(t.target=e,i.notNull(r)&&r.forEach(function(n){n.call(e,t)}),t.bubbles){var a=e.get("parent");a&&!t.propagationStopped&&a.trigger(t)}return e},fire:function(t,e){var n=new r(t);i.each(e,function(t,e){n[e]=t}),this.trigger(n)}}},function(t,e,n){"use strict";var i=n(1),r=n(84),a=function(t){this.canvas=t,this.el=t.get("el"),this.current=null,this.pre=null};i.augment(a,{tryTrigger:function(t,e){t.__listeners&&t.trigger(e)},getCurrent:function(t){var e=this.canvas,n=e.getPointByClient(t.clientX,t.clientY);this.point=n,this.pre=this.current,this.current=e.getShape(n.x,n.y)},mousemove:function(t){this.getCurrent(t);var e=this.point,n=this.canvas;if(n.has("canvas-mousemove")){var i=new r("canvas-mousemove",t,(!0),(!0));i.x=e.x,i.y=e.y,i.clientX=t.clientX,i.clientY=t.clientY,i.currentTarget=n,this.tryTrigger(n,i)}if(this.pre&&this.pre!==this.current){var a=new r("mouseleave",t,(!0),(!0));a.x=e.x,a.y=e.y,a.clientX=t.clientX,a.clientY=t.clientY,a.currentTarget=this.pre,a.target=this.pre,this.tryTrigger(this.pre,a)}if(this.current){var o=new r("mousemove",t,(!0),(!0));if(o.x=e.x,o.y=e.y,o.clientX=t.clientX,o.clientY=t.clientY,o.currentTarget=this.current,o.target=this.current,this.tryTrigger(this.current,o),this.pre!==this.current){var s=new r("mouseenter",t,(!0),(!0));s.x=e.x,s.y=e.y,s.clientX=t.clientX,s.clientY=t.clientY,s.currentTarget=this.current,s.target=this.current,this.tryTrigger(this.current,s)}}},mousedown:function(t){var e=this.point,n=this.canvas;if(n.has("canvas-mousedown")){var i=new r("canvas-mousedown",t,(!0),(!0));i.x=e.x,i.y=e.y,i.clientX=t.clientX,i.clientY=t.clientY,i.currentTarget=n,this.tryTrigger(n,i)}if(this.current){var a=new r("mousedown",t,(!0),(!0));a.x=e.x,a.y=e.y,a.clientX=t.clientX,a.clientY=t.clientY,a.currentTarget=this.current,a.target=this.current,this.tryTrigger(this.current,a)}},mouseup:function(t){var e=this.point,n=this.canvas;if(n.has("canvas-mouseup")){var i=new r("canvas-mouseup",t,(!0),(!0));i.x=e.x,i.y=e.y,i.clientX=t.clientX,i.clientY=t.clientY,i.currentTarget=n,this.tryTrigger(n,i)}if(this.current){var a=new r("mouseup",t,(!0),(!0));a.x=e.x,a.y=e.y,a.clientX=t.clientX,a.clientY=t.clientY,a.currentTarget=this.current,a.target=this.current,this.tryTrigger(this.current,a)}},click:function(t){this.getCurrent(t);var e=this.point,n=this.canvas;if(n.has("canvas-click")){var i=new r("canvas-click",t,(!0),(!0));i.x=e.x,i.y=e.y,i.clientX=t.clientX,i.clientY=t.clientY,i.currentTarget=n,this.tryTrigger(n,i)}if(this.current){var a=new r("click",t,(!0),(!0));a.x=e.x,a.y=e.y,a.clientX=t.clientX,a.clientY=t.clientY,a.currentTarget=this.current,a.target=this.current,this.tryTrigger(this.current,a)}},dblclick:function(t){var e=this.point,n=this.canvas;if(n.has("canvas-dblclick")){var i=new r("canvas-dblclick",t,(!0),(!0));i.x=e.x,i.y=e.y,i.clientX=t.clientX,i.clientY=t.clientY,i.currentTarget=n,this.tryTrigger(n,i)}if(this.current){var a=new r("dblclick",t,(!0),(!0));a.x=e.x,a.y=e.y,a.clientX=t.clientX,a.clientY=t.clientY,a.currentTarget=this.current,a.target=this.current,this.tryTrigger(this.current,a)}},mouseout:function(t){var e=this.point,n=this.canvas,i=new r("canvas-mouseleave",t,(!0),(!0));i.x=e.x,i.y=e.y,i.currentTarget=n,this.tryTrigger(n,i)},mouseover:function(t){var e=this.canvas,n=new r("canvas-mouseenter",t,(!0),(!0));n.currentTarget=e,this.tryTrigger(e,n)}}),t.exports=a},function(t,e,n){function i(t,e,n){for(var i,r=t.length-1;r>=0;r--){var a=t[r];if(a.__cfg.visible&&a.__cfg.capture&&(a.isGroup?i=a.getShape(e,n):a.isHit(e,n)&&(i=a)),i)break}return i}function r(t){if(!t.__cfg&&t!==h){var e=t.superclass.constructor;e&&!e.__cfg&&r(e),t.__cfg={},a.mix(!0,t.__cfg,e.__cfg),a.mix(!0,t.__cfg,t.CFG)}}var a=n(1),o=n(2).Vector3,s=n(40),u=n(116),c={},h=function(t){h.superclass.constructor.call(this,t),this.set("children",[]),this._beforeRenderUI(),this._renderUI(),this._bindUI()};a.extend(h,s),a.augment(h,{isGroup:!0,canFill:!0,canStroke:!0,getDefaultCfg:function(){return r(this.constructor),a.mix(!0,{},this.constructor.__cfg)},_beforeRenderUI:function(){},_renderUI:function(){},_bindUI:function(){},addShape:function(t,e){var n,i=this.get("canvas");e=e||{};var r=c[t];return r||(r=a.ucfirst(t),c[t]=r),e.canvas=i,e.type=t,n=new u[r](e),this.add(n),n},addGroup:function(t,e){var n,i=this.get("canvas");if(e=a.mix({},e),a.isFunction(t))e?(e.canvas=i,e.parent=this,n=new t(e)):n=new t({canvas:i,parent:this}),this.add(n);else if(a.isObject(t))t.canvas=i,n=new h(t),this.add(n);else{if(void 0!==t)return!1;n=new h,this.add(n)}return n},renderBack:function(t,e){var n=this.get("backShape"),i=this.getBBox(),r=this.get("parent");return a.mix(e,{x:i.minX-t[3],y:i.minY-t[0],width:i.width+t[1]+t[3],height:i.height+t[0]+t[2]}),n?n.attr(e):n=r.addShape("rect",{zIndex:-1,attrs:e}),this.set("backShape",n),r.sort(),n},removeChild:function(t,e){if(arguments.length>=2)this.contain(t)&&t.remove(e);else{if(1===arguments.length){if(!a.isBoolean(t))return this.contain(t)&&t.remove(!0),this;e=t}0===arguments.length&&(e=!0),h.superclass.remove.call(this,e)}return this},add:function(t){var e=this,n=e.get("children");if(a.isArray(t))a.each(t,function(t){var n=t.get("parent");n&&n.removeChild(t,!1),e.__setEvn(t)}),n.push.apply(n,t);else{var i=t,r=i.get("parent");r&&r.removeChild(i,!1),e.__setEvn(i),n.push(i)}return e},contain:function(t){var e=this.get("children");return e.indexOf(t)>-1},getChildByIndex:function(t){var e=this.get("children");return e[t]},getFirst:function(){return this.getChildByIndex(0)},getLast:function(){var t=this.get("children").length-1;return this.getChildByIndex(t)},__setEvn:function(t){var e=this;t.__cfg.parent=e,t.__cfg.context=e.__cfg.context,t.__cfg.canvas=e.__cfg.canvas;var n=t.__attrs.clip;n&&(n.setSilent("parent",e),n.setSilent("context",e.get("context")));var i=t.__cfg.children;i&&a.each(i,function(e){t.__setEvn(e)})},getBBox:function(){var t=this,e=1/0,n=-(1/0),i=1/0,r=-(1/0),s=t.get("children");a.each(s,function(t){if(t.get("visible")){var a=t.getBBox();if(!a)return!0;var s=new o(a.minX,a.minY,1),u=new o(a.minX,a.maxY,1),c=new o(a.maxX,a.minY,1),h=new o(a.maxX,a.maxY,1);t.apply(s),t.apply(u),t.apply(c),t.apply(h);var l=Math.min(s.x,u.x,c.x,h.x),f=Math.max(s.x,u.x,c.x,h.x),d=Math.min(s.y,u.y,c.y,h.y),g=Math.max(s.y,u.y,c.y,h.y);l<e&&(e=l),f>n&&(n=f),d<i&&(i=d),g>r&&(r=g)}});var u={minX:e,minY:i,maxX:n,maxY:r};return u.x=u.minX,u.y=u.minY,u.width=u.maxX-u.minX,u.height=u.maxY-u.minY,u},drawInner:function(t){for(var e=this.get("children"),n=0;n<e.length;n++){var i=e[n];i.draw(t)}return this},getCount:function(){return this.get("children").length},sort:function(){var t=this.get("children");return t.sort(function(t,e){return t.get("zIndex")-e.get("zIndex")}),this},find:function(t){return this.findBy(function(e){return e.get("id")===t})},findBy:function(t){var e=this.get("children"),n=null;return a.each(e,function(e){if(t(e)?n=e:e.findBy&&(n=e.findBy(t)),n)return!1}),n},findAllBy:function(t){var e=this.get("children"),n=[],i=[];return a.each(e,function(e){t(e)&&n.push(e),e.findAllBy&&(i=e.findAllBy(t),n=n.concat(i))}),n},getShape:function(t,e){var n,r=this,a=r.__attrs.clip,o=r.__cfg.children;return a?a.inside(t,e)&&(n=i(o,t,e)):n=i(o,t,e),n},clearTotalMatrix:function(){var t=this.get("totalMatrix");if(t){this.setSilent("totalMatrix",null);for(var e=this.__cfg.children,n=0;n<e.length;n++){var i=e[n];i.clearTotalMatrix()}}},clear:function(){for(var t=this.get("children");0!==t.length;)t[t.length-1].remove();return this},destroy:function(){this.get("destroyed")||(this.clear(),h.superclass.destroy.call(this))}}),t.exports=h},function(t,e,n){var i=n(1),r=n(31),a=new r;t.exports={tween:a,animate:function(t,e,n,r){var o=a.getNow(),s=i.mix({},t,{duration:e});a.animate(this).append(o,s,n,r),"silent"===a.get("status")&&a.play()}}},function(t,e,n){var i=n(1),r=n(2).Vector3,a=["strokeStyle","fillStyle","globalAlpha"],o=["circle","ellipse","fan","polygon","rect","path"],s={r:"R",opacity:"Opacity",lineWidth:"LineWidth",clip:"Clip",stroke:"Stroke",fill:"Fill",strokeOpacity:"Stroke",fillOpacity:"Fill",x:"X",y:"Y",rx:"Rx",ry:"Ry",re:"Re",rs:"Rs",width:"Width",height:"Height",img:"Img",x1:"X1",x2:"X2",y1:"Y1",y2:"Y2",points:"Points",p1:"P1",p2:"P2",p3:"P3",p4:"P4",text:"Text",radius:"Radius",textAlign:"TextAlign",textBaseline:"TextBaseline",font:"Font",fontSize:"FontSize",fontStyle:"FontStyle",fontVariant:"FontVariant",fontWeight:"FontWeight",fontFamily:"FontFamily",clockwise:"Clockwise",startAngle:"StartAngle",endAngle:"EndAngle",path:"Path"},u={stroke:"strokeStyle",fill:"fillStyle",opacity:"globalAlpha"};t.exports={canFill:!1,canStroke:!1,initAttrs:function(t){return this.__attrs={opacity:1,fillOpacity:1,strokeOpacity:1},this.attr(i.simpleMix(this.getDefaultAttrs(),t)),this},getDefaultAttrs:function(){return{}},attr:function(t,e){var n=this;if(0===arguments.length)return n.__attrs;if(i.isObject(t)){for(var r in t)if(a.indexOf(r)===-1){var o=t[r];n._setAttr(r,o)}return n.__afterSetAttrAll&&n.__afterSetAttrAll(t),n.clearBBox(),n}if(2===arguments.length){if(n._setAttr(t,e)!==!1){var u="__afterSetAttr"+s[t];n[u]&&n[u](e)}return n.clearBBox(),n}return n._getAttr(t)},clearBBox:function(){this.setSilent("box",null)},__afterSetAttrAll:function(){},_getAttr:function(t){return this.__attrs[t]},_setAttr:function(t,e){var n=this;if("clip"===t)n.__setAttrClip(e),n.__attrs.clip=e;else{n.__attrs[t]=e;var i=u[t];i&&(n.__attrs[i]=e)}return n},hasFill:function(){return this.canFill&&this.__attrs.fillStyle},hasStroke:function(){return this.canStroke&&this.__attrs.strokeStyle},__setAttrOpacity:function(t){return this.__attrs.globalAlpha=t,t},__setAttrClip:function(t){var e=this;return t&&o.indexOf(t.type)>-1?(null===t.get("canvas")&&(t=i.clone(t)),t.set("parent",e.get("parent")),t.set("context",e.get("context")),t.inside=function(n,i){var a=new r(n,i,1);return t.invert(a,e.get("canvas")),t.__isPointInFill(a.x,a.y)},t):null}}},function(t,e,n){function i(t){var e=t.elements;return 1===e[0]&&0===e[1]&&0===e[3]&&1===e[4]&&0===e[6]&&0===e[7]}function r(t){var e=t.elements;return 0===e[1]&&0===e[3]&&0===e[6]&&0===e[7]}function a(t,e){i(e)||(r(e)?(t.elements[0]*=e.elements[0],t.elements[4]*=e.elements[4]):t.multiply(e))}var o=n(1),s=n(2).Matrix3;t.exports={initTransform:function(){this.__m=new s},translate:function(t,e){return this.__m.translate(t,e),this.clearTotalMatrix(),this},rotate:function(t){return this.__m.rotate(t),this.clearTotalMatrix(),this},scale:function(t,e){return this.__m.scale(t,e),this.clearTotalMatrix(),this},rotateAtStart:function(t){var e=this.attr("x"),n=this.attr("y");Math.abs(t)>2*Math.PI&&(t=t/180*Math.PI),this.transform([["t",-e,-n],["r",t],["t",e,n]])},move:function(t,e){var n=this.get("x")||0,i=this.get("y")||0;this.translate(t-n,e-i),this.set("x",t),this.set("y",e)},transform:function(t){var e=this;return o.each(t,function(t){switch(t[0]){case"t":e.translate(t[1],t[2]);break;case"s":e.scale(t[1],t[2]);break;case"r":e.rotate(t[1]);break;case"m":e.__m=s.multiply(t[1],e.__m),e.clearTotalMatrix()}}),e},setTransform:function(t){return this.__m.identity(),this.transform(t)},getMatrix:function(){return this.__m},setMatrix:function(t){return this.__m=t,this.clearTotalMatrix(),this},apply:function(t,e){var n;return n=e?this._getMatrixByRoot(e):this.__m,t.applyMatrix(n),this},_getMatrixByRoot:function(t){var e=this;t=t||e;for(var n=e,i=[];n!==t;)i.unshift(n),n=n.get("parent");i.unshift(n);var r=new s;return o.each(i,function(t){r.multiply(t.__m)}),r},getTotalMatrix:function(){var t=this.__cfg.totalMatrix;if(!t){t=new s;var e=this.__cfg.parent;if(e){var n=e.getTotalMatrix();a(t,n)}a(t,this.__m),this.__cfg.totalMatrix=t}return t},clearTotalMatrix:function(){},invert:function(t){var e=this.getTotalMatrix();if(r(e))t.x/=e.elements[0],t.y/=e.elements[4];else{var n=e.getInverse();t.applyMatrix(n)}return this},resetTransform:function(t){var e=this.__m.to2DObject();i(this.__m)||t.transform(e.a,e.b,e.c,e.d,e.e,e.f)}}},function(t,e,n){var i={Rect:n(55),Circle:n(44),Ellipse:n(46),Path:n(51),Text:n(56),Line:n(49),Image:n(48),Polygon:n(52),Polyline:n(53),Arc:n(43),Fan:n(47),Cubic:n(45),Quadratic:n(54),Marker:n(50)};t.exports=i},function(t,e){t.exports={xAt:function(t,e,n,i,r){return e*Math.cos(t)*Math.cos(r)-n*Math.sin(t)*Math.sin(r)+i},yAt:function(t,e,n,i,r){return e*Math.sin(t)*Math.cos(r)+n*Math.cos(t)*Math.sin(r)+i},xExtrema:function(t,e,n){return Math.atan(-n/e*Math.tan(t))},yExtrema:function(t,e,n){return Math.atan(n/(e*Math.tan(t)))}}},function(t,e,n){function i(t,e,n){return{x:n.x+t,y:n.y+e}}function r(t,e){return{x:e.x+(e.x-t.x),y:e.y+(e.y-t.y)}}function a(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function o(t,e){return(t[0]*e[0]+t[1]*e[1])/(a(t)*a(e))}function s(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(o(t,e))}function u(t,e,n,i,r,a,u){var c=h.mod(h.degreeToRad(u),2*Math.PI),l=t.x,f=t.y,d=e.x,g=e.y,p=Math.cos(c)*(l-d)/2+Math.sin(c)*(f-g)/2,v=-1*Math.sin(c)*(l-d)/2+Math.cos(c)*(f-g)/2,y=p*p/(r*r)+v*v/(a*a);y>1&&(r*=Math.sqrt(y),a*=Math.sqrt(y));var x=Math.sqrt((r*r*(a*a)-r*r*(v*v)-a*a*(p*p))/(r*r*(v*v)+a*a*(p*p)));n===i&&(x*=-1),isNaN(x)&&(x=0);var m=x*r*v/a,b=x*-a*p/r,_=(l+d)/2+Math.cos(c)*m-Math.sin(c)*b,w=(f+g)/2+Math.sin(c)*m+Math.cos(c)*b,M=s([1,0],[(p-m)/r,(v-b)/a]),S=[(p-m)/r,(v-b)/a],A=[(-1*p-m)/r,(-1*v-b)/a],P=s(S,A);return o(S,A)<=-1&&(P=Math.PI),o(S,A)>=1&&(P=0),0===i&&P>0&&(P-=2*Math.PI),1===i&&P<0&&(P+=2*Math.PI),[t,_,w,r,a,M,P,c,i]}var c=n(1),h=n(6),l=n(5),f=n(14),d=n(22),g=n(117),p=n(2),v=p.Vector2,y=p.Vector3,x=p.Matrix3,m=["m","l","c","a","q","h","v","t","s","z"],b=function(t,e,n){this.preSegment=e,this.isLast=n,this.init(t,e)};c.augment(b,{init:function(t,e){var n=t[0];e=e||{endPoint:{x:0,y:0}};var a,o,s,c,h=m.indexOf(n)>=0,l=h?n.toUpperCase():n,f=t,d=e.endPoint,g=f[1],p=f[2];switch(l){default:break;case"M":c=h?i(g,p,d):{x:g,y:p},this.command="M",this.params=[d,c],this.subStart=c,this.endPoint=c;break;case"L":c=h?i(g,p,d):{x:g,y:p},this.command="L",this.params=[d,c],this.subStart=e.subStart,this.endPoint=c,this.isLast&&(this.endTangent=function(){return new v(c.x-d.x,c.y-d.y)});break;case"H":c=h?i(g,0,d):{x:g,y:d.y},this.command="L",this.params=[d,c],this.subStart=e.subStart,this.endPoint=c,this.endTangent=function(){return new v(c.x-d.x,c.y-d.y)};break;case"V":c=h?i(0,g,d):{x:d.x,y:g},this.command="L",this.params=[d,c],this.subStart=e.subStart,this.endPoint=c,this.endTangent=function(){return new v(c.x-d.x,c.y-d.y)};break;case"Q":h?(a=i(g,p,d),o=i(f[3],f[4],d)):(a={x:g,y:p},o={x:f[3],y:f[4]}),this.command="Q",this.params=[d,a,o],this.subStart=e.subStart,this.endPoint=o,this.endTangent=function(){return new v(o.x-a.x,o.y-a.y)};break;case"T":o=h?i(g,p,d):{x:g,y:p},"Q"===e.command?(a=r(e.params[1],d),this.command="Q",this.params=[d,a,o],this.subStart=e.subStart,this.endPoint=o,this.endTangent=function(){return new v(o.x-a.x,o.y-a.y)}):(this.command="TL",this.params=[d,o],this.subStart=e.subStart,this.endPoint=o,this.endTangent=function(){return new v(o.x-d.x,o.y-d.y)});break;case"C":h?(a=i(g,p,d),o=i(f[3],f[4],d),s=i(f[5],f[6],d)):(a={x:g,y:p},o={x:f[3],y:f[4]},s={x:f[5],y:f[6]}),this.command="C",this.params=[d,a,o,s],this.subStart=e.subStart,this.endPoint=s,this.endTangent=function(){return new v(s.x-o.x,s.y-o.y)};break;case"S":h?(o=i(g,p,d),s=i(f[3],f[4],d)):(o={x:g,y:p},s={x:f[3],y:f[4]}),"C"===e.command?(a=r(e.params[2],d),this.command="C",this.params=[d,a,o,s],this.subStart=e.subStart,this.endPoint=s,this.endTangent=function(){return new v(s.x-o.x,s.y-o.y)}):(this.command="SQ",this.params=[d,o,s],this.subStart=e.subStart,this.endPoint=s,this.endTangent=function(){return new v(s.x-o.x,s.y-o.y)});break;case"A":var y=g,x=p,b=f[3],_=f[4],w=f[5];c=h?i(f[6],f[7],d):{x:f[6],y:f[7]},this.command="A",this.params=u(d,c,_,w,y,x,b),this.subStart=e.subStart,this.endPoint=c;break;case"Z":this.command="Z",this.params=[d,e.subStart],this.subStart=e.subStart,this.endPoint=e.subStart}},isInside:function(t,e,n){var i=this,r=i.command,a=i.params,o=i.box;if(o&&!l.box(o.minX,o.maxX,o.minY,o.maxY,t,e))return!1;switch(r){default:break;case"M":return!1;case"TL":case"L":case"Z":return l.line(a[0].x,a[0].y,a[1].x,a[1].y,n,t,e);case"SQ":case"Q":return l.quadraticline(a[0].x,a[0].y,a[1].x,a[1].y,a[2].x,a[2].y,n,t,e);case"C":return l.cubicline(a[0].x,a[0].y,a[1].x,a[1].y,a[2].x,a[2].y,a[3].x,a[3].y,n,t,e);case"A":var s=a,u=s[1],c=s[2],h=s[3],f=s[4],d=s[5],g=s[6],p=s[7],v=s[8],m=h>f?h:f,b=h>f?1:h/f,_=h>f?f/h:1;s=new y(t,e,1);var w=new x;return w.translate(-u,-c),w.rotate(-p),w.scale(1/b,1/_),s.applyMatrix(w),l.arcline(0,0,m,d,d+g,1-v,n,s.x,s.y)}return!1},draw:function(t){var e,n,i,r=this.command,a=this.params;switch(r){default:break;case"M":t.moveTo(a[1].x,a[1].y);break;case"TL":case"L":t.lineTo(a[1].x,a[1].y);break;case"SQ":case"Q":e=a[1],n=a[2],t.quadraticCurveTo(e.x,e.y,n.x,n.y);break;case"C":e=a[1],n=a[2],i=a[3],t.bezierCurveTo(e.x,e.y,n.x,n.y,i.x,i.y);break;case"A":var o=a,s=o[1],u=o[2],c=s,h=u,l=o[3],f=o[4],d=o[5],g=o[6],p=o[7],v=o[8],y=l>f?l:f,x=l>f?1:l/f,m=l>f?f/l:1;t.translate(c,h),t.rotate(p),t.scale(x,m),t.arc(0,0,y,d,d+g,1-v),t.scale(1/x,1/m),t.rotate(-p),t.translate(-c,-h);break;case"Z":t.closePath()}},getBBox:function(t){var e,n,i,r,a=t/2,o=this.params;switch(this.command){default:case"M":case"Z":break;case"TL":case"L":this.box={minX:Math.min(o[0].x,o[1].x)-a,maxX:Math.max(o[0].x,o[1].x)+a,minY:Math.min(o[0].y,o[1].y)-a,maxY:Math.max(o[0].y,o[1].y)+a};break;case"SQ":case"Q":for(n=d.extrema(o[0].x,o[1].x,o[2].x),i=0,r=n.length;i<r;i++)n[i]=d.at(o[0].x,o[1].x,o[2].x,n[i]);for(n.push(o[0].x,o[2].x),e=d.extrema(o[0].y,o[1].y,o[2].y),i=0,r=e.length;i<r;i++)e[i]=d.at(o[0].y,o[1].y,o[2].y,e);e.push(o[0].y,o[2].y),this.box={minX:Math.min.apply(Math,n)-a,maxX:Math.max.apply(Math,n)+a,minY:Math.min.apply(Math,e)-a,maxY:Math.max.apply(Math,e)+a};break;case"C":for(n=f.extrema(o[0].x,o[1].x,o[2].x,o[3].x),i=0,r=n.length;i<r;i++)n[i]=f.at(o[0].x,o[1].x,o[2].x,o[3].x,n[i]);for(e=f.extrema(o[0].y,o[1].y,o[2].y,o[3].y),i=0,r=e.length;i<r;i++)e[i]=f.at(o[0].y,o[1].y,o[2].y,o[3].y,e[i]);n.push(o[0].x,o[3].x),e.push(o[0].y,o[3].y),this.box={minX:Math.min.apply(Math,n)-a,maxX:Math.max.apply(Math,n)+a,minY:Math.min.apply(Math,e)-a,maxY:Math.max.apply(Math,e)+a};break;case"A":var s=o,u=s[1],c=s[2],h=s[3],l=s[4],p=s[5],v=s[6],y=s[7],x=s[8],m=p,b=p+v,_=g.xExtrema(y,h,l),w=1/0,M=-(1/0),S=[m,b];for(i=2*-Math.PI;i<=2*Math.PI;i+=Math.PI){var A=_+i;1===x?m<A&&A<b&&S.push(A):b<A&&A<m&&S.push(A)}for(i=0,r=S.length;i<r;i++){var P=g.xAt(y,h,l,u,S[i]);P<w&&(w=P),P>M&&(M=P)}var E=g.yExtrema(y,h,l),T=1/0,C=-(1/0),I=[m,b];for(i=2*-Math.PI;i<=2*Math.PI;i+=Math.PI){var k=E+i;1===x?m<k&&k<b&&I.push(k):b<k&&k<m&&I.push(k)}for(i=0,r=I.length;i<r;i++){var B=g.yAt(y,h,l,c,I[i]);B<T&&(T=B),B>C&&(C=B)}this.box={minX:w-a,maxX:M+a,minY:T-a,maxY:C+a}}}}),t.exports=b},function(t,e){var n=document.createElement("table"),i=document.createElement("tr"),r=/^\s*<(\w+|!)[^>]*>/,a={tr:document.createElement("tbody"),tbody:n,thead:n,tfoot:n,td:i,th:i,"*":document.createElement("div")};t.exports={getBoundingClientRect:function(t){var e=t.getBoundingClientRect(),n=document.documentElement.clientTop,i=document.documentElement.clientLeft;return{top:e.top-n,bottom:e.bottom-n,left:e.left-i,right:e.right-i}},getStyle:function(t,e){return window.getComputedStyle?window.getComputedStyle(t,null)[e]:t.currentStyle[e]},modiCSS:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n]);return t},createDom:function(t){var e=r.test(t)&&RegExp.$1;e in a||(e="*");var n=a[e];return t=t.replace(/(^\s*)|(\s*$)/g,""),n.innerHTML=""+t,n.childNodes[0]},addEventListener:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):void 0}}},function(t,e){t.exports={transform:function(t,e){t=t.clone();for(var n=0,i=e.length;n<i;n++){var r=e[n];switch(r[0]){case"t":t.translate(r[1],r[2]);break;case"s":t.scale(r[1],r[2]);break;case"r":t.rotate(r[1]);break;case"m":t.multiply(r[1]);break;default:continue}}return t},scale:function(t,e,n,i,r){return t=t.clone(),t.translate(-1*i,-1*r),t.scale(e,n),t.translate(i,r),t},rotate:function(t,e,n,i){return t=t.clone(),t.translate(-1*n,-1*i),t.rotate(e),t.translate(n,i),t},isMatrix3:function(t){return"matrix3"===t.type}}},function(t,e,n){"use strict";var i=n(24),r=n(8);t.exports=function(t){var e=r.getBBox(t,t),n=e.centerX,a=e.centerY;i.scaleIn(t,n,a)}},function(t,e,n){"use strict";var i=n(24),r=n(8);t.exports=function(t){var e=r.getBBox(t,t),n=e.centerX,a=e.centerY;i.scaleOut(t,n,a)}},function(t,e,n){"use strict";var i=n(7);t.exports=function(t,e){t.set("capture",!1),t.animate(e,i.updateDuration,i.updateEasing,function(){t.set("capture",!0)})}},function(t,e,n){"use strict";function i(t,e){if(!t||!e)return!1;var n,i,r,o,u=t.length,c=e.length,h=c>u?e:t,f={attrs0:{},attrs1:{}},d=!1;return a.each(h,function(u,c){n=t[c],i=e[c],a.isObject(n)||a.isObject(i)||"path"===c&&(r=a.isString(n)?n:s.toString(n),o=a.isString(i)?i:s.toString(i),r===o||r.indexOf("NaN")!==-1||o.indexOf("NaN")!==-1)||a.isArray(n)&&a.isArray(i)&&a.equalsArray(n,i)||n===i||l[c]||(f.attrs0[c]=n,f.attrs1[c]=i,d=!0)}),!!d&&f}function r(t,e,n){var i,o,s=e.get("children");return a.each(s,function(e){n++,o=e.get("gid"),e.isGroup&&(n=r(t,e,n)),o&&(t[o]={matrix:e.getMatrix().clone(),origin:e},i=e.get("shapeCfg"),i&&(t[o].enterAnimate=e.get("enterAnimate"),t[o].leaveAnimate=e.get("leaveAnimate"),t[o].model=i.origin),e.isShape&&(t[o].attrs=e.getAllAttrs()))}),n}var a=n(1),o=n(2),s=n(37),u=n(23),c=u.Update,h=o.Matrix3,l={text:"text",elements:"elements",rotate:"rotate",textAlign:"textAlign",textBaseline:"textBaseline",fontStyle:"fontStyle",font:"font",fontWeight:"fontWeight",fontFamily:"fontFamily",points:"points"},f=function(t){a.mix(this,t)};a.augment(f,{canvas:null,map0:null,map1:null,run:function(){this.init(),this.count<1500&&(this._compare(),this._addTween()),this.canvas.draw()},init:function(){var t=this.canvas,e=this.elementsStash,n={},i=0;e=e?e:{},i=r(n,t,i),this.elementsStash=n,this.map0=e,this.map1=n,this.count=i},_compare:function(){var t=this.map0,e=this.map1,n=[],i=[],r=[];a.each(e,function(e,i){t[i]?r.push(i):n.push(i)}),a.each(t,function(t,n){e[n]||i.push(n)}),this.enterElements=n,this.leaveElements=i,this.updateElements=r},_addTween:function(){var t,e,n,r,o,s=this,u=this.enterElements,l=this.leaveElements,f=this.updateElements,d=this.map0,g=this.map1;a.each(u,function(t){o=g[t],o.enterAnimate&&o.enterAnimate(o.origin,d,g)}),a.each(l,function(t){r=d[t],r.leaveAnimate&&(r.origin.getParent().add(r.origin),r.leaveAnimate(r.origin,d,g))}),a.each(f,function(u){o=g[u],r=d[u],e=i(r.attrs,o.attrs),t=h.equal(r.matrix,o.matrix),n={},e&&(o.origin.attr(e.attrs0),a.mix(n,e.attrs1)),t||(o.origin.setMatrix(r.matrix),n.matrix=o.matrix),!e&&t||c(o.origin,n,s)})}}),t.exports=f},function(t,e,n){"use strict";function i(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):void 0}var r=n(1),a=function(t){r.mix(this,t),this.init()};r.augment(a,{graph:null,frontCanvas:null,canvas:null,currentItem:null,dragitem:null,rootGroup:null,lastEventObj:null,currentEventObj:null,el:null,init:function(){var t=this.graph;this.frontCanvas=t.get("frontCanvas"),this.canvas=t.get("canvas"),this._initEvent()},_initEvent:function(){var t=this,e=t.frontCanvas,n=e.get("el");this.el=n,this.domMouseDown=i(n,"mousedown",r.wrapBehavior(t,"onMouseDown")),this.domMouseUp=i(n,"mouseup",r.wrapBehavior(t,"onMouseUp")),this.domMouseMove=i(n,"mousemove",r.wrapBehavior(t,"onMouseMove")),this.domDblClick=i(n,"dblclick",r.wrapBehavior(t,"onDblClick")),this.domMouseWheel=i(n,"mousewheel",r.wrapBehavior(t,"onMouseWheel")),this.domKeyDown=i(n,"keydown",r.wrapBehavior(t,"onKeyDown")),this.domKeyUp=i(n,"keyup",r.wrapBehavior(t,"onKeyUp")),this.domContextMenu=i(n,"contextmenu",r.wrapBehavior(t,"onContextMenu"))},_parsePoint:function(t,e){var n=this.canvas.get("pixelRatio"),i=this.graph,r={x:t/n,y:e/n};return i.invertPoint(r)},_getEventObj:function(t,e){var n,i=this.graph,r=t.clientX,a=t.clientY,o=e.getPointByClient(r,a),s=this._parsePoint(o.x,o.y),u=e.getShape(o.x,o.y),c=i.getItem(u);return c&&(n=c.get("type")),{item:c,itemType:n,shape:u,x:s.x,y:s.y,domX:t.offsetX,domY:t.offsetY,originEvent:t}},getEventObj:function(t){return{item:t.item,itemType:t.itemType,x:t.x,y:t.y,domX:t.domX,domY:t.domY,
shape:t.shape,toEvObj:t.toEvObj,frontEvObj:t.frontEvObj,originEvent:t.originEvent}},_processEventObj:function(t){var e,n,i=this.canvas,a=this.frontCanvas,o=this.currentEventObj;o&&r.isObject(o)&&(this.lastEventObj=r.mix({},o)),e=this._getEventObj(t,i),n=this._getEventObj(t,a),e.frontEvObj=n,this.currentEventObj=e,this.currentItem=e.item},onContextMenu:function(t){this._processEventObj(t);var e=this.currentEventObj;this.graph.fire("contextmenu",this.getEventObj(e))},onDblClick:function(t){this._processEventObj(t);var e=this.currentEventObj;this.graph.fire("dblclick",this.getEventObj(e))},onKeyUp:function(t){t.preventDefault(),this.graph.fire("keyup",t)},onKeyDown:function(t){t.preventDefault(),this.graph.fire("keydown",t)},onMouseWheel:function(t){this._processEventObj(t);var e=this.currentEventObj;this.graph.fire("mousewheel",this.getEventObj(e))},onMouseDown:function(t){t.preventDefault(),this._processEventObj(t);var e=this.currentEventObj;this.pressing=!0,this.dragging=!0,0===t.button&&this.graph.fire("mousedown",this.getEventObj(e))},onMouseUp:function(t){t.preventDefault(),this._processEventObj(t);var e=this.currentEventObj;0===t.button&&(this.pressing&&(this.graph.fire("click",this.getEventObj(e)),this.pressing=!1),this.dragging&&(this.dragStartPoint&&this.graph.fire("dragend",this.getEventObj(e)),this.dragging=!1),this.graph.fire("mouseup",this.getEventObj(e)),this.dragStartPoint=null,this.dragItem=null)},onMouseMove:function(t){t.preventDefault(),this._processEventObj(t);var e=this.graph,n=this.currentEventObj,i=this.lastEventObj;i&&n&&(i.toEvObj=n,n.fromEvObj=i,this.isSame(i,n,"shape")||((i.shape||i.frontEvObj.shape)&&e.fire("mouseleave",this.getEventObj(i)),(n.shape||i.frontEvObj.shape)&&e.fire("mouseenter",this.getEventObj(n))),this.isSame(i,n,"item")||((i.shape||i.frontEvObj.shape)&&e.fire("itemmouseleave",this.getEventObj(i)),(n.shape||i.frontEvObj.shape)&&e.fire("itemmouseenter",this.getEventObj(n)))),this.pressing=!1,this.dragging&&(this.dragStartPoint?e.fire("dragmove",this.getEventObj(n)):(this.dragStartPoint={x:n.x,y:n.y},this.dragItem=n.item,e.fire("dragstart",this.getEventObj(n)))),n.item&&e.fire("mouseover",this.getEventObj(n)),e.fire("mousemove",this.getEventObj(n))},isSame:function(t,e,n){var i=t[n],r=e[n],a=t.frontEvObj[n],o=e.frontEvObj[n];return i===r&&a===o},destroy:function(){var t=this.domMouseUp,e=this.domMouseDown,n=this.domMouseMove,i=this.domDblClick,r=this.domMouseWheel,a=this.domContextMenu,o=this.domKeyDown,s=this.domKeyUp;a&&a.remove(),s&&s.remove(),r&&r.remove(),o&&o.remove(),i&&i.remove(),t&&t.remove(),e&&e.remove(),n&&n.remove()}}),t.exports=a},function(t,e,n){"use strict";var i=n(1),r=function(t){i.mix(this,t),this.init()};i.augment(r,{group:null,visible:!0,gridEl:null,minX:0,minY:0,cell:10,maxX:1e3,maxY:1e3,line:null,init:function(){var t=this,e=t.group,n=t._getPath(),r=i.mix({},t.line);r.path=n;var a=e.addShape("path",{attrs:r,capture:!1});a.set("visible",t.visible),this.gridEl=a},_getPath:function(){for(var t=this,e=t.minX,n=t.minY,i=t.maxX,r=t.maxY,a=t._getCell(),o=Math.ceil(e/a)*a,s=Math.ceil(n/a)*a,u=[],c=0;c<=i-e;c+=a){var h=o+c;u.push(["M",h,n]),u.push(["L",h,r])}for(var l=0;l<=r-n;l+=a){var f=s+l;u.push(["M",e,f]),u.push(["L",i,f])}return u},_getCell:function(){var t=this.cell?this.cell:10;return t},update:function(t){i.mix(this,t);var e=this._getPath(),n=this.gridEl;n.attr("path",e),n.set("visible",this.visible)},destroy:function(){var t=this,e=t.gridEl;e&&e.remove()}}),t.exports=r},function(t,e,n){"use strict";var i=n(1),r=n(8),a=function(t){i.mix(this,t)};i.augment(a,{graph:null,tooltipDOM:null,titleDOM:null,listDOM:null,tooltipCSS:{border:"none","border-radius":"4px",background:"rgba(33,33,33,0.7)",color:"white","font-size":"14px",margin:0,padding:"8px 16px"},titleCSS:{margin:0},listCSS:{margin:0,"list-style-type":"none",padding:"0px"},title:"",dx:10,dy:10,margin:10,split:": ",tooltipHtml:'<div class="g6-tooltip" style="position: absolute;"></div>',titleHtml:'<h4 class="g6-tooltip-title"></h4>',listHtml:'<ul class="g6-tooltip-list"></ul>',liTpl:"<li><span>{name}</span>{split}{value}</li>",init:function(){this._createDOM(),this._bindEvent()},_createDOM:function(){var t=this.graph,e=t.get("graphContainer"),n=r.createDOM(this.tooltipHtml,this.tooltipCSS),i=r.createDOM(this.titleHtml,this.titleCSS),a=r.createDOM(this.listHtml,this.listCSS);e.appendChild(n),n.appendChild(i),n.appendChild(a),n.hide(),i.innerHTML=this.title,this.titleDOM=i,this.listDOM=a,this.tooltipDOM=n},_bindEvent:function(){var t=this.graph;t.on("mouseover",i.wrapBehavior(this,"onMouseover")),t.on("mouseleave",i.wrapBehavior(this,"onMouseleave"))},_followMode:function(t){var e=this.tooltipDOM,n=this.dx,i=this.dy,r=e.height();e.css({top:t.domY-r-i+"px",left:t.domX+n+"px"})},onMouseleave:function(){var t=this.tooltipDOM;t.hide()},onMouseover:function(t){var e=this,n=this.tooltipDOM,r=this.listDOM,a=this.liTpl,o=t.item.getShapeCfg().tooltip,s="";o&&(i.isArray(o[0])||(o=[o]),i.each(o,function(t){s+=i.substitute(a,{name:t[0],value:t[1],split:e.split})}),r.innerHTML=s,e._followMode(t),n.show())},destroy:function(){var t=this.graph;this.tooltipDOM.destroy(),t.off("mouseover",i.getWrapBehavior(this,"onMouseover")),t.off("mouseleave",i.getWrapBehavior(this,"onMouseleave"))}}),t.exports=a},function(t,e,n){"use strict";var i=n(1),r=n(11),a=n(26),o=r.G,s=function(){};i.augment(s,{clear:function(t){var e=this.get("children");for(t=t!==!1;0!==e.length;)e[e.length-1].remove(t);return this},findByCFG:function(t,e){var n=this.get("children"),r=[];return i.each(n,function(n){n.get(t)===e&&r.push(n)}),r}}),i.mixin(o.Group,[s,a]),t.exports=s},function(t,e,n){"use strict";var i=n(1),r=n(11),a=n(26),o=r.G,s=function(){};i.augment(s,{getAllAttrs:function(){var t=this,e=t.get("attrs"),n={};return i.each(e,function(e,i){n[i]=t.attr(i)}),n}}),i.mixin(o.Shape,[s,a]),t.exports=s},function(t,e,n){"use strict";function i(t,e){var n=e.get("children");a.each(n,function(e){e.isGroup&&e.get("visible")?i(t,e):t.push(e)})}function r(t,e,n){for(var i=t.get("parent");i!==n;)e.push(i),i=i.get("parent")}var a=n(1),o=n(8),s=n(11).G,u=s.Group,c=function h(t){h.superclass.constructor.call(this,t)};a.extend(c,u),a.augment(c,{drawInner:function(t){var e,n=this,s=[];return i(s,n),o.radixSort(s),a.each(s,function(i){e=[],t.save(),r(i,e,n),a.each(e,function(e){e.resetTransform(t)}),i.draw(t),t.restore()}),n}}),t.exports=c},function(t,e,n){"use strict";function i(t,e,n){return new o({width:t,height:e,eventEnable:!1,containerDOM:n})}var r=n(1),a=n(10),o=n(11),s=n(2),u=n(38),c=n(135),h=n(60),l=n(59),f=n(126),d=n(125),g=n(127),p=n(124),v=n(8),y=n(7),x=n(130),m=n(58),b=u.Group,_=s.Matrix3,w=function M(t){M.superclass.constructor.call(this,t),this._init()};w.ATTRS={id:null,container:null,graphContainer:null,width:null,height:500,addingType:"",itemCache:null,items:[],nodes:[],edges:[],canvas:null,useAnchor:!0,multipleActive:!0,eventStash:{},el:null,forceFit:!1,layoutFn:null,layoutCfg:null,layout:null,grid:!0,defaultNodeShape:null,animate:!1,fitView:null},r.extend(w,a),r.mixin(w,[b,c]),r.augment(w,{_init:function(){this._initDOM(),this._initData(),this._initMapper(),this._initEvent(),this._initForceFit(),this.get("grid")&&this._initGrid(),this.get("forceFit")&&(window.addEventListener("resize",r.wrapBehavior(this,"_initForceFitEvent")),this.forceFit()),this._initEditor(),this._initMode(),this._initLayout(),this._initAnimate()},_initEditor:function(){},_initLayout:function(){var t=this.get("layoutFn"),e=this.get("layoutCfg"),n=this.get("layout");!n&&t&&e&&(n=new t(e),this.set("layout",n))},_initAnimate:function(){var t=this.get("animate"),e=this.get("canvas");t&&this.set("animateAssist",new p({canvas:e}))},_initForceFit:function(){this.get("width")||this.set("forceFit",!0)},_initForceFitEvent:function(){var t=this,e=setTimeout(function(){t.forceFit()},200);clearTimeout(this.get("resizeTimer")),this.set("resizeTimer",e)},_on:function(t,e){var n=this.get("eventStash");n[t]||(n[t]=[]),n[t].push(e),this.on(t,e)},_off:function(){var t=this,e=this.get("eventStash");r.each(e,function(n,i){r.each(n,function(e){t.off(i,e)}),e[i]=[]})},_initData:function(){this.set("itemCache",{}),this.set("items",[])},_initMapper:function(){this.set("nodeMapper",new h),this.set("edgeMapper",new h)},_initDOM:function(){var t=this,e=t.get("container");if(!e){var n=t.get("id");if(e=document.getElementById(n),!e)throw new Error("please set the id for the graph")}var a=t.get("width"),o=t.get("height"),s=r.createDom('<div class="graph-container" style="position:relative;"></div>');e.appendChild(s);var u=i(a,o,s),c=i(a,o,s),h=c.get("el");h.style.position="absolute",h.style.top=0,h.style.left=0,s.style["font-family"]=y.fontFamily;var l=u.addGroup({gid:"rootGroup"}),f=c.addGroup({gid:"frontRootGroup"}),d=l.addGroup(),g=l.addGroup(),p=g.addGroup(x),v=g.addGroup();d.set("animate",!1),t.set("rootGroup",l),t.set("itemGroup",g),t.set("backGroup",d),t.set("frontRootGroup",f),t.set("nodeGroup",v),t.set("edgeGroup",p),t.set("canvas",u),t.set("frontCanvas",c),t.set("graphContainer",s),t.set("container",e),t.set("el",h),h.style.outline="none",h.setAttribute("tabIndex",-2),t.on("click",function(){h.focus()})},_initGrid:function(){var t=this,e=r.mix({minX:0,minY:0,maxX:t.get("width"),maxY:t.get("height"),group:t.get("backGroup")},y.grid,t.get("grid")),n=new f(e);t.set("gridAssist",n)},_initEvent:function(){var t=new d({graph:this,frontCanvas:this.get("frontCanvas"),canvas:this.get("canvas"),rootGroup:this.get("rootGroup")});this.set("eventAssist",t)},_updateGrid:function(){var t=this.get("gridAssist");if(t){var e=this,n=e.get("width"),i=e.get("height"),r=e.invertPoint({x:0,y:0}),a=e.invertPoint({x:n,y:i});t.update({minX:r.x,minY:r.y,maxX:a.x,maxY:a.y})}},_updateCache:function(t,e){var n=this.get("itemCache");n[t]=e},css:function(t){var e=this.get("el");r.each(t,function(t,n){e.style[n]=t})},_clearInner:function(){var t=this.get("animate"),e=!t;this.get("nodeGroup").clear(e),this.get("edgeGroup").clear(e),this.get("frontRootGroup").clear(e)},_updateEdgeEnd:function(t,e,n){var i=this,r=i.get("itemCache"),a=e[n],o=t.get(n);if(!o||o.get("id")!==a){o&&o.removeEdge(t);var s=r[a];s.addEdge(t),t.set(n,s)}},_addItems:function(){var t=this.get("nodes");this.addNodes(t);var e=this.get("edges");this.addEdges(e)},addNodes:function(t){var e=this,n=e.get("nodeGroup"),i=e.get("itemCache"),a=[];return r.each(t,function(t){var o=t.id;if(r.isNull(o)&&(o=v.guid(),t.id=o),i[o])throw new Error("id: "+o+" \u5df2\u5b58\u5728\uff01id: "+o+" already exist!");var s=n.addGroup(m,{id:o,type:"node"}),u=new l.Node({id:o,graph:e,group:s,model:t,mapper:e.get("nodeMapper"),useAnchor:e.get("useAnchor"),frontGroup:e.get("frontRootGroup")});e._updateCache(o,u),a.push(u),u.draw(),e.get("items").push(u)}),a},_getAllActived:function(){var t=this.getAllActived();return t.sort(function(t,e){var n,i,r=t.get("group"),a=e.get("group");return r&&(n=r.get("parent"),i=n.get("children")),i.indexOf(r)-i.indexOf(a)}),t},read:function(t){var e=this;r.each(t,function(t,n){e["_read"+r.ucfirst(n)](t)})},save:function(){return{source:this._saveSource()}},_readSource:function(){},_saveSource:function(){},_zoom:function(t,e,n){var i,r,a=new _,o=this.get("width"),s=this.get("height"),u=this.get("itemGroup"),c=u.getBBox(),h=(c.maxX+c.minX)/2,l=(c.maxY+c.minY)/2,f=y.autoZoomPadding,d=h,g=l;i=c.maxX-c.minX+2*f,r=c.maxY-c.minY+2*f,n&&(d=n.x,g=n.y),e&&(o=i,s=r,this.changeSize(i,r)),t||(t=o/i,o/i>s/r&&(t=s/r)),a.translate(-d,-g),a.scale(t,t),a.translate(o/2,s/2),this.updateMatrix(a)},addEdges:function(t){var e=this,n=e.get("itemCache"),i=e.get("edgeGroup"),a=[];return r.each(t,function(t){var o=t.id,s=n[t.source],u=n[t.target];if(!s||!u)throw new Error("can not find effective node in edge model");if(n[o])throw new Error("id: "+o+" \u5df2\u5b58\u5728\uff01id: "+o+" already exist!");r.isNull(o)&&(o=v.guid(),t.id=o);var c=i.addGroup(m,{id:o,type:"edge"}),h=new l.Edge({id:o,graph:e,source:s,target:u,model:t,group:c,mapper:e.get("edgeMapper"),frontGroup:e.get("frontRootGroup")});h.draw(),e._updateCache(o,h),a.push(h),e.get("items").push(h)}),a},invertPoint:function(t){var e=this.get("rootGroup").getMatrix();return v.invertPoint(t,e)},converPoint:function(t){var e=this.get("rootGroup").getMatrix();return v.converPoint(t,e)},forceFit:function(){var t=this.get("container"),e=v.getDOMWidth(t),n=this.get("height");e!==this.get("width")&&this.changeSize(e,n)},tooltip:function(t){var e=this.get("tooltipAssist");return t?(r.isObject(e)&&e.destroy(),e=new g,r.isObject(t)&&r.mix(e,t),e.graph=this,e.init(),this.set("tooltipAssist",e)):(e&&e.destroy(),this.set("tooltipAssist",null)),this},getItem:function(t){if(!t)return null;var e=t.get("parent"),n=this.get("itemCache");return n[e.get("id")]},getActiveItems:function(){return this.get("items")},updateMatrix:function(t){var e=this,n=e.get("rootGroup"),i=e.get("frontRootGroup");n.setMatrix(t),i.setMatrix(t.clone()),e._updateGrid()},toFront:function(t){var e=t.get("group"),n=e.get("parent"),i=n.get("children");return r.remove(i,e),i.push(e),self},toBack:function(t){var e=t.get("group"),n=e.get("parent"),i=n.get("children");return r.remove(i,e),i.unshift(e),self},source:function(t,e){this.set("nodes",t),this.set("edges",e)},node:function(){return this.get("nodeMapper")},edge:function(){return this.get("edgeMapper")},clear:function(){this._clearInner(),this._initMapper(),this._initData(),this._initEditor()},draw:function(t){var e=this.get("animateAssist");e?t!==!1?e.run():(e.init(),this.refresh()):this.refresh()},refresh:function(t){t!==!1&&this.get("canvas").draw(),this.get("frontCanvas").draw()},_update:function(t,e){var n,i,a=this,o=a.get("itemCache");if(r.isString(t)&&(t=o[t]),n=t.get("type"),i=t.get("model"),r.mix(i,e),"edge"===n)a._updateEdgeEnd(t,i,"source"),a._updateEdgeEnd(t,i,"target"),t.update();else if("node"===n){t.update();var s=t.get("edges");r.each(s,function(t){t.update()})}return t},_remove:function(t){var e,n=this,i=n.get("itemCache");if(r.isString(t)&&(t=i[t]),e=t.get("id"),delete i[e],"node"===t.get("type")){var a=t.get("edges").slice();r.each(a,function(t){delete i[t.get("model").id],n._remove(t)})}t.destroy()},update:function(t,e){this._update(t,e),this.draw()},remove:function(t){this._remove(t),this.draw()},render:function(){var t=this.get("fitView");this._addItems(),r.isString(t)&&this[t](!1),r.isObject(t)&&this.focusPoint(t,!1),this.draw()},changeLayout:function(t){var e=this.save();this._clearInner(),this._initData(),this.set("layout",t),this.read(e),this._addItems(),this.draw()},changeData:function(){var t=r.toArray(arguments);this._clearInner(),this._initData(),this._initEditor(),this.source.apply(this,t),this._addItems(),this.draw()},changeSize:function(t,e){if(Math.abs(t)>=1/0||Math.abs(e)>=1/0)return void console.warn("size parameter more than the maximum");var n=this,i=n.get("canvas"),r=n.get("frontCanvas");i.changeSize(t,e),r.changeSize(t,e),n.set("width",t),n.set("height",e),n._updateGrid(),n.refresh()},getMatrix:function(){var t=this.get("rootGroup");return t.getMatrix()},destroy:function(){var t=this,e=t.get("canvas"),n=t.get("gridAssist"),i=t.get("tooltipAssist"),a=t.get("eventAssist"),o=t.get("container"),s=t.get("graphContainer");o&&o.removeChild(s),a&&a.destroy(),n&&n.destroy(),i&&i.destroy(),e&&e.destroy(),w.superclass.destroy.call(this),window.removeEventListener("resize",r.getWrapBehavior(this,"_initForceFitEvent"))},find:function(t){var e=this,n=e.get("itemCache");return n[t]},isNode:function(t){return t&&r.isObject(t)&&"node"===t.get("type")},isEdge:function(t){return t&&r.isObject(t)&&"edge"===t.get("type")},zoom:function(t,e){this._zoom(t),e!==!1&&this.draw()},autoZoom:function(t){this._zoom(),t!==!1&&this.draw()},resetZoom:function(t){var e=new _;this.updateMatrix(e),t!==!1&&this.draw()},autoSize:function(t){this._zoom(void 0,!0),t!==!1&&this.draw()},focusPoint:function(t,e){this._zoom(1,void 0,t),e!==!1&&this.draw()},snapshot:function(){var t=this.get("canvas"),e=t.get("el");return e.toDataURL("image/png")},downloadImage:function(){var t=this.snapshot(),e=document.createElement("a");return e.download="chart.png",e.href=t.replace("image/png","image/octet-stream"),e.click(),e}}),t.exports=w},function(t,e,n){"use strict";var i=n(1),r=n(8),a=n(25),o=n(7),s=function u(t){u.superclass.constructor.call(this,t),this._initEnds()};s.ATTRS={type:"edge",controlPoints:[null,null],source:null,target:null,sourceAnchor:null,targetAnchor:null},i.extend(s,a),i.augment(s,{_initEnds:function(){var t=this,e=t.get("source"),n=t.get("target");e&&e.addEdge(t),n&&n.addEdge(t)},_getEdgePoints:function(){var t,e=this,n=e.get("model"),r=e.get("source"),a=e.get("target"),s=e.getControlPoints(),u=n.sourceAnchor,c=n.targetAnchor,h=r.getCenter(),l=a?a.getCenter():r.getCenter(),f=s.length,d=e.getShapeCfg(),g=e.get("shapeManger"),p=0,v=f-1;return null===u&&delete n.sourceAnchor,null===c&&delete n.targetAnchor,i.isNumber(u)&&r&&(u=r.getAnchor(u)),i.isNumber(c)&&a&&(c=a.getAnchor(c)),f>2?(r&&!u&&(u=r.getAnchor(s[p+1])),a&&!c&&(c=a.getAnchor(s[v-1]))):(t=o.preciseAnchor&&g.getPath(d.shape,[h,l]),r&&!u&&(u=t?r.getAnchor(t):r.getAnchor(l)),a&&!c&&(c=t?a.getAnchor(t):a.getAnchor(h))),s[0]={x:u.x,y:u.y},s[v]={x:c.x,y:c.y},s},beforeDraw:function(){var t=this.getShapeCfg(),e=this.get("group");t.points=this._getEdgePoints(),t.target=this.get("target"),t.source=this.get("source"),e.set("controlPoints",this.get("controlPoints"))},afterDraw:function(){s.superclass.afterDraw.call(this)},getControlPoints:function(){var t=this.get("model"),e=t.controlPoints?t.controlPoints:this.get("controlPoints");return e},addControlPoint:function(t){var e,n,a,o=this.getControlPoints(),s=1/0;return i.each(o,function(i,u){if(n=o[u+1]){if(a=r.segmentDistance(i,n,t),a<1)return e=u,!1;a<s&&(s=a,e=u)}}),o.splice(e+1,0,t),e},getDelegationPath:function(t){var e,n=this,i=n.getControlPoints(),a=t.controlPointIndex,o=i[a-1],s=i[a+1],u=[{x:t.x,y:t.y}];return o&&u.unshift(o),s&&u.push(s),e=r.pointsToPolygon(u)},destroyItem:function(){var t=this,e=t.get("source");e&&e.removeEdge(t);var n=t.get("target");n&&n.removeEdge(t)},isExtremePoint:function(t){var e,n=this.getControlPoints();return i.isObject(t)&&(e=n.indexOf(t)),i.isNumber(t)&&(e=t),0===e||e===n.length-1},isSourcePoint:function(t){var e,n=this.getControlPoints();return i.isObject(t)&&(e=n.indexOf(t)),i.isNumber(t)&&(e=t),0===e},isTargetPoint:function(t){var e,n=this.getControlPoints();return i.isObject(t)&&(e=n.indexOf(t)),i.isNumber(t)&&(e=t),e===n.length-1},show:function(){this._show()},hide:function(){this._hide()}}),t.exports=s},function(t,e,n){"use strict";var i=n(1),r=n(25),a=n(8),o=n(7),s=function u(t){u.superclass.constructor.call(this,t)};s.ATTRS={type:"node",useAnchor:!0,anchorPersentPoints:null,anchorPoints:null,edges:[],anchorGroup:null,boxStash:null},i.extend(s,r),i.augment(s,{calculateAnchorPoints:function(){var t,e=this,n=e.getBBox(),r=e.get("shapeManger"),a=e.getShapeCfg(),o=r.getAnchorPoints(a.shape,a,e.get("group"));return i.isArray(o)?(t=[],i.each(o,function(e){t.push({x:n.minX+e[0]*n.width,y:n.minY+e[1]*n.height})}),e.set("anchorPoints",t),t):(e.set("anchorPoints",o),t)},_showBox:function(t){var e=this.getBBox(),n=this.getKeyShape(),r=n.attr("lineWidth");r=i.isNumber(r)?r:0,t.addShape("rect",{attrs:i.mix({x:e.x+r/2,y:e.y+r/2,width:e.width-r,height:e.height-r},o.nodeAcitveBoxStyle)})},getAnchorPoints:function(){var t=this.get("anchorPoints"),e=this.get("useAnchor");return t||e&&this.calculateAnchorPoints()},getCenter:function(){var t=this.getBBox();return{x:t.centerX,y:t.centerY}},getPosition:function(){var t=this.get("model");return{x:t.x,y:t.y}},getAnchor:function(t){var e,n=this.get("useAnchor"),r=this.getCenter(),o=this.getAnchorPoints();if(!n||"center"===o)return r;if(i.isNumber(t))return this.getAnchorByIndex(t);if(i.isObject(t)&&(e=this.getInterPointByPoint(t)),i.isArray(t)&&(e=this.getInterPointByPath(t)),e){if("auto"===o)return e;if(i.isArray(o))return a.getSnapAnchor(this,e)}return r},getInterPointByPoint:function(t){var e=this.getBBox(),n=a.getRectIntersect(e,t);return n},getInterPointByPath:function(t){var e=this.getBBox(),n=a.rectPath(e.x,e.y,e.width,e.height),i=a.intersection(t,n)[0];return i},getAnchorByIndex:function(t){var e=this.getAnchorPoints();return e[t]},getControlPoints:function(){var t=this,e=t.getBBox(),n=[];return n.push({x:e.x,y:e.y}),n.push({x:e.maxX,y:e.y}),n.push({x:e.maxX,y:e.maxY}),n.push({x:e.x,y:e.maxY}),n},getDelegationPath:function(t){var e=this,n=e.getBBox(),i=t.x,r=t.y,a=t.size,o=n.width,s=n.height;a&&(o=a[0],s=a[1]);var u=[];return u.push(["M",i-o/2,r-s/2]),u.push(["L",i+o/2,r-s/2]),u.push(["L",i+o/2,r+s/2]),u.push(["L",i-o/2,r+s/2]),u.push(["Z"]),u},addEdge:function(t){this.get("edges").push(t)},removeEdge:function(t){i.remove(this.get("edges"),t)},showAnchor:function(){var t=this,e=t.getAnchorPoints(),n=t.get("anchorPoints"),r=t.get("frontGroup"),a=t.get("anchorGroup");a&&a.remove(!0),a=r.addGroup({zIndex:o.zIndex.anchorPoint}),i.each(e,function(e,r){a.addShape("circle",{elCls:"anchor-point",item:t,anchorPointIndex:r,anchorPoint:n[r],point:e,attrs:i.mix({x:e.x,y:e.y},o.anchorPointStyle)})}),this.set("anchorGroup",a)},hideAnchor:function(){var t=this.get("anchorGroup");t&&t.remove(!0),this.set("anchorGroup",null)},beforeDraw:function(){s.superclass.beforeDraw.call(this);var t=this.get("graph"),e=this.get("group"),n=this.getShapeCfg();e.initTransform(),t&&i.isFunction(t.beforeNodeDraw)&&t.beforeNodeDraw(this),n.shape||(n.shape=t.get("defaultNodeShape"))},afterDraw:function(){var t=this.get("group"),e=t.get("children"),n=this.get("graph");n&&i.isFunction(n.afterNodeDraw)&&n.afterNodeDraw(this),s.superclass.afterDraw.call(this),t.set("children",a.radixSort(e)),this.calculateAnchorPoints()},show:function(){for(var t=this.get("edges"),e=0;e<t.length;e++)t[e]._show();this._show()},hide:function(){for(var t=this.get("edges"),e=0;e<t.length;e++)t[e]._hide();this._hide()},getLinkNodes:function(){var t,e,n,r=this,a=r.get("graph"),o=r.get("edges"),s=a.get("itemCache"),u=[];return i.each(o,function(i){t=i.get("model"),e=s[t.target],n=s[t.source],u.indexOf(e)===-1&&e!==r&&u.push(e),u.indexOf(n)===-1&&n!==r&&u.push(n)}),u},getUnLinkNodes:function(){var t=this.get("id"),e=this.getLinkNodes(),n=this.get("graph"),r=n.get("itemCache"),a=[];return i.each(r,function(n){"node"===n.get("type")&&e.indexOf(n)===-1&&n.get("id")!==t&&a.push(n)}),a},getRelativeItems:function(){var t,e,n,r=this,a=r.get("id"),o=r.get("graph"),s=r.get("edges"),u=o.get("itemCache"),c=[];return c=c.concat(s),i.each(s,function(i){n=i.get("model"),t=u[n.target],e=u[n.source],c.indexOf(t)===-1&&i.get("id")!==a&&c.push(t),c.indexOf(e)===-1&&i.get("id")!==a&&c.push(e)}),c},getUnRelativeItems:function(){var t=this.get("id"),e=this.get("graph"),n=e.get("itemCache"),r=this.getRelativeItems(),a=[];return i.each(n,function(e){r.indexOf(e)===-1&&e.get("id")!==t&&a.push(e)}),a}}),t.exports=s},function(t,e,n){"use strict";var i=n(1),r=function(t){i.mix(this,t)};i.augment(r,{type:null,dims:null,callback:null,getValue:function(t){var e=this.dims,n=this.callback,r=null,a=null;if(n){var o=[];i.each(e,function(e){o.push(t[e])}),r=n.apply(this,o)}else r=e?e:t[this.type];return i.isArray(r)||(r=[r]),a=r.length>1?r:r[0]}}),t.exports=r},function(t,e,n){"use strict";function i(t,e){var n,i;for(n=0;n<t.length;n++)for(i=0;i<e.length;i++)t[n]===e[i]&&t.splice(n,1);for(n=0;n<e.length;n++)t.push(e[n]);return t}function r(t,e){for(var n=0;n<t.length;n++)if(t[n]===e){t.splice(n,1);break}}var a=n(1),o=n(3),s=function(){};s.ATTRS={modes:null,mode:"default",behaviourFilter:null,behaviours:null},a.augment(s,{_initMode:function(){var t=this.get("modes"),e=this.get("mode");t||(t=this.constructor.Mode,this.set("modes",t)),this.changeMode(e)},_filterBehaviour:function(t){var e=this.get("behaviourFilter"),n={};return a.each(t,function(t,i){n[i]=a.filter(t,function(t){return e.indexOf(t)===-1})}),n},_mapCursor:function(t){var e={add:"pointer",drag:"move","default":"default",edit:"default"},n=e[t];n&&this.css({cursor:e[t]})},filterBehaviour:function(t){this.set("behaviourFilter",t),this.resetMode()},addBehaviour:function(t,e){var n=this.get("modes");return a.isArray(t)?a.each(n,function(e,r){n[r]=i(e,t)}):n[t]?n[t]=i(n[t],e):n[t]=e,this.resetMode(),this},removeBehaviour:function(t,e){var n=this.get("modes");return a.isArray(t)?a.each(n,function(e){a.each(t,function(t){r(e,t)})}):n[t]&&a.each(e,function(e){r(n[t],e)}),this.resetMode(),this},resetMode:function(){var t=this.get("mode");this.changeMode(t)},changeMode:function(t){var e=this.get("modes"),n=this.get("behaviourFilter");e&&"none"!==e&&(n&&(e=this._filterBehaviour(e)),e[t]&&(o.resetMode(e[t],this),this.set("mode",t),this._mapCursor(t)))}}),t.exports=s},function(t,e,n){"use strict";var i=n(1),r=n(27),a=n(8);r.registGeom("edge",{defaultShapeType:"line",getPath:function(t,e){var n=this.getShape(t);return!!i.isFunction(n.getPath)&&n.getPath(e)}}),r.registEdge("line",{draw:function(t,e){return a.drawEdge("line",t,e,!1,"line")}}),r.registEdge("arrow",{draw:function(t,e){return a.drawEdge("line",t,e,!0,"line")}}),r.registEdge("HV",{getPath:function(t){return a.getEdgePath("HV",t,"line")},draw:function(t,e){return a.drawEdge("HV",t,e,!1,"line",!1)}}),r.registEdge("VH",{getPath:function(t){return a.getEdgePath("VH",t,"line")},draw:function(t,e){return a.drawEdge("VH",t,e,!1,"line",!1)}}),r.registEdge("HVH",{getPath:function(t){return a.getEdgePath("HVH",t,"line")},draw:function(t,e){return a.drawEdge("HVH",t,e,!1,"line",!1)}}),r.registEdge("VHV",{getPath:function(t){return a.getEdgePath("VHV",t,"line")},draw:function(t,e){return a.drawEdge("VHV",t,e,!1,"line",!1)}}),r.registEdge("smooth",{getPath:function(t){return a.getEdgePath("bezierCurve",t,"curve","auto")},draw:function(t,e){return a.drawEdge("bezierCurve",t,e,!1,"curve","auto")}}),r.registEdge("smoothArrow",{getPath:function(t){return a.getEdgePath("bezierCurve",t,"curve","auto")},draw:function(t,e){return a.drawEdge("bezierCurve",t,e,!0,"curve","auto")}}),r.registEdge("bezierHorizontal",{getPath:function(t){return a.getEdgePath("bezierCurve",t,"curve","horizontal")},draw:function(t,e){return a.drawEdge("bezierCurve",t,e,!1,"curve","horizontal")}}),r.registEdge("bezierVertical",{getPath:function(t){return a.getEdgePath("bezierCurve",t,"curve","vertical")},draw:function(t,e){return a.drawEdge("bezierCurve",t,e,!1,"curve","vertical")}}),r.registEdge("bezierQuadratic",{getPath:function(t){return a.getEdgePath("bezierQuadratic",t,"curve")},draw:function(t,e){return a.drawEdge("bezierQuadratic",t,e,!1,"curve",!1)}})},function(t,e,n){"use strict";function i(){return[[.5,0],[1,.5],[.5,1],[0,.5]]}var r=n(1),a=n(27),o=n(8),s=.5/Math.sqrt(2);a.registGeom("node",{defaultShapeType:"rect",getAnchorPoints:function(t,e,n){var i=this.getShape(t);return!!r.isFunction(i.getAnchorPoints)&&i.getAnchorPoints(e,n)}}),a.registNode("rect",{draw:function(t,e){return o.drawNode("rect",t,e)},getAnchorPoints:i}),a.registNode("rhombus",{draw:function(t,e){return o.drawNode("rhombus",t,e)},getAnchorPoints:i}),a.registNode("text",{draw:function(t,e){return o.drawNode("text",t,e)},getAnchorPoints:i}),a.registNode("image",{draw:function(t,e){return o.drawNode("image",t,e)},getAnchorPoints:i}),a.registNode("circle",{draw:function(t,e){return o.drawNode("circle",t,e)},getAnchorPoints:function(){return[[.5-s,.5-s],[.5,0],[.5+s,.5-s],[1,.5],[.5+s,.5+s],[.5,1],[.5-s,.5+s],[0,.5]]}})},function(t,e,n){"use strict";var i=n(1),r={getDOMHeight:function(t){var e=i.getStyle(t,"height");return parseFloat(e)},getDOMWidth:function(t){var e=i.getStyle(t,"width");return parseFloat(e)},createDOM:function(t,e){var n=i.createDom(t);return n.hide=function(){return n.style.visibility="hidden",n},n.show=function(){return n.style.visibility="visible",n},n.css=function(t){return i.modiCSS(n,t),n},n.width=function(){return r.getDOMWidth(n)},n.height=function(){return r.getDOMHeight(n)},n.destroy=function(){n.parentNode.removeChild(n)},n.on=function(t,e){n.addEventListener(t,e)},n.off=function(t,e){n.removeEventListener(t,e)},n.attr=function(t){return n.getAttribute(t)},n.css(e),n}};t.exports=r},function(t,e,n){"use strict";function i(t,e){return Math.abs(t.x-e.x)>Math.abs(t.y-e.y)}function r(t,e,n,r,a){var o=[];if("horizontal"===n)o.push({x:1*(t.x+e.x)/2,y:t.y}),o.push({x:1*(t.x+e.x)/2,y:e.y});else if("vertical"===n)o.push({x:t.x,y:1*(t.y+e.y)/2}),o.push({x:e.x,y:1*(t.y+e.y)/2});else{var s=Math.abs(e.x-t.x),u=Math.abs(e.y-t.y),c=t,h=e;r&&r.getCenter&&(c=r.getCenter()),a&&a.getCenter&&(h=a.getCenter()),i(t,c)||t===c&&u<s?o.push({x:1*(t.x+e.x)/2,y:t.y}):o.push({x:t.x,y:1*(t.y+e.y)/2}),i(e,h)||e===h&&u<s?o.push({x:1*(t.x+e.x)/2,y:e.y}):o.push({x:e.x,y:1*(t.y+e.y)/2})}return o}function a(t,e){var n={x:(t.x+e.x)/2,y:(t.y+e.y)/2},i=u.vector(e,t),r=i.vertical(),a=i.length();return r.setLength(.2*a),[h.add(n,r)]}var o=n(1),s=n(2),u=n(28),c=n(15),h=s.Vector2,l={bezierCurve:function(t,e,n,i){var a=t[0],s=t[t.length-1],u=["M",a.x,a.y],c=r(a,s,e,n,i),h=["C"],l=[u];return o.each(c,function(t){h.push(t.x,t.y)}),h.push(s.x,s.y),l.push(h),l},bezierQuadratic:function(t){var e=t[0],n=t[t.length-1],i=["M",e.x,e.y],r=a(e,n),s=["Q"],u=[i];return o.each(r,function(t){s.push(t.x,t.y)}),s.push(n.x,n.y),u.push(s),u},line:function(t){var e=c.pointsToPolygon(t);return e},HV:function(t){var e=t.length,n=c.pointsToPolygon([t[0],{x:t[e-1].x,y:t[0].y},t[e-1]]);return n},VH:function(t){var e=t.length,n=c.pointsToPolygon([t[0],{x:t[0].x,y:t[e-1].y},t[e-1]]);return n},HVH:function(t){var e=t.length,n=c.pointsToPolygon([t[0],{x:(t[0].x+t[e-1].x)/2,y:t[0].y},{x:(t[0].x+t[e-1].x)/2,y:t[e-1].y},t[e-1]]);return n},VHV:function(t){var e=t.length,n=c.pointsToPolygon([t[0],{x:t[0].x,y:(t[0].y+t[e-1].y)/2},{x:t[e-1].x,y:(t[0].y+t[e-1].y)/2},t[e-1]]);return n}};t.exports=l},function(t,e,n){"use strict";function i(t,e){var n={};return n.arrow=e,t.color&&(n.stroke=t.color),t.size&&(n.lineWidth=t.size),a.mix({},h.edgeStyle,n,t.style)}function r(t,e,n){if(t.label){var i,r;try{i=n.getPoint(.5)}catch(o){}r=a.isObject(t.label)?a.mix({},h.edgeLabelStyle,t.label,{x:i.x,y:i.y},t.labelStyle):a.mix({},h.edgeLabelStyle,{text:t.label,x:i.x,y:i.y},t.labelStyle);var s=e.addShape("text",{attrs:r,"class":"label",zIndex:h.zIndex.edgeLabel}),u=s.getBBox(),c=u.maxX-u.minX,l=u.maxY-u.minY,d=c+2*f,g=l+2*f;e.addShape("rect",{attrs:a.mix({x:i.x-d/2,y:i.y-g/2,width:d,height:g},h.edgeLabelRectStyle),zIndex:h.zIndex.edgeLabelBackground})}}var a=n(1),o=n(15),s=n(2),u=n(62),c=n(139),h=n(7),l=s.Vector2,f=5,d={getEdgePath:function(t,e,n,i,r,a){return 2===e.length?c[t](e,i,r,a):"curve"===n?o.pointsToBezier(e):o.pointsToPolygon(e)},drawEdge:function(t,e,n,a,o,s){var u,c=i(e,a),l=d.getEdgePath(t,e.points,o,s,e.source,e.target);return c.path=l,u=n.addShape("path",{attrs:c,zIndex:h.zIndex.edge}),r(e,n,u),u},arrowTo:function(t,e,n,i,r,a,o){var s=new l(1,0),u=new l(a-i,o-r),c=u.angleTo(s,!0);return t.transform([["r",c],["t",e,n]]),t},snapPreciseAnchor:function(t,e){var n=e.getInterPointByPath(t),i=u.getSnapAnchor(e,n);return i}};t.exports=d},function(t,e,n){"use strict";function i(t){return s.isObject(t.label)?s.mix({},u.nodeLabelStyle,t.label,{x:t.x,y:t.y}):s.mix({},u.nodeLabelStyle,{text:t.label,x:t.x,y:t.y})}function r(t,e){e.attr({y:e.attr("y")+t.attr("height")/2+l})}function a(t){var e=t.getBBox(),n=e.maxX-e.minX,i=e.maxY-e.minY,r=n+2*h[1],a=i+2*h[0];return[r,a]}function o(t,e,n){var r,o;return n=n?n:a,t.label&&(r=s.mix(i(t),t.labelStyle),o=e.addShape("text",{attrs:r,"class":"label",zIndex:u.zIndex.nodeLabel}),t.size||(t.size=n(o))),t.size||(t.size=[f,f]),s.isNumber(t.size)&&(t.size=[t.size,t.size]),o}var s=n(1),u=n(7),c=n(15),h=[8,16],l=5,f=50,d={rect:function(t,e,n){o(t,e);var i,r,a=t.size[0],s=t.size[1],u=t.x-a/2,h=t.y-s/2;return r=n.radius?c.rectPath(u,h,a,s,n.radius):c.rectPath(u,h,a,s),i=e.addShape("path",{attrs:{path:r}})},circle:function(t,e){o(t,e,function(t){var e,n,i,r,a,o=t.getBBox(),s=o.maxX-o.minX+2*h[1],u=o.maxY-o.minY+2*h[0];
return e=(s+u/2)/2,n=Math.acos(s/2/e),a=2*(Math.sin(n)*e),r=2*e,s<u&&(i=a,a=r,r=i),[r,a]});var n=t.size[0],i=t.size[1],r=e.addShape("path",{attrs:{path:c.getEllipsePath(t.x,t.y,n/2,i/2)}});return r},text:function(t,e){t.labelStyle&&!t.labelStyle.fill&&t.color&&(t.labelStyle.fill=t.color),t.color&&(t.labelStyle={fill:t.color}),t.size&&(s.isArray(t.size)&&(t.labelStyle={fontSize:Math.min(t.size[0],t.size[1])}),s.isNumber(t.size)&&(t.labelStyle={fontSize:t.size}));var n=o(t,e);return n},image:function g(t,e){var n,g,a=t.shape,o=s.isArray(a)?a[1]:a,c={img:o};if(t.size||(t.size=f),c.width=s.isArray(t.size)?t.size[0]:t.size,c.height=s.isArray(t.size)?t.size[1]:t.size,c.x=t.x-c.width/2,c.y=t.y-c.height/2,g=e.addShape("image",{attrs:c,zIndex:u.zIndex.node}),t.label){var h=s.mix(i(t),t.labelStyle);h.textBaseline="top",n=e.addShape("text",{attrs:h,zIndex:u.zIndex.nodeLabel}),r(g,n)}return g},rhombus:function(t,e){o(t,e,function(t){var e=t.getBBox(),n=e.maxX-e.minX+2*h[1],i=e.maxY-e.minY+2*h[0],r=Math.sqrt(n/2*i/2),a=n+r,o=i+r;return[a,o]});var n=t.x,i=t.y,r=t.size[0],a=t.size[1],s=[{x:n,y:i-a/2},{x:n+r/2,y:i},{x:n,y:i+a/2},{x:n-r/2,y:i}],u=e.addShape("path",{attrs:{path:c.pointsToPolygon(s,!0)}});return u}};t.exports=d},function(t,e,n){"use strict";var i=n(3),r=n(143);r.Mode={},i.registMode(r),n(144),t.exports=r},function(t,e,n){"use strict";var i=n(1),r=n(18),a=n(80),o=function s(t){s.superclass.constructor.call(this,t)};o.ATTRS={layoutFn:r.CompactBoxTree,layoutCfg:{direction:"H",getHGap:function(){return 30},getVGap:function(){return 10}},rootShape:"tree-node-root-mind"},i.extend(o,a),t.exports=o},function(t,e,n){"use strict";var i=n(9);i.registNode("tree-node-root-mind",{getAnchorPoints:"center"},"tree-node-root")},function(t,e,n){"use strict";var i=n(1),r=n(9),a=r.Util,o={max:5,current:0,cache:[]},s={nodes:[],edges:[]},u=function(){};u.ATTRS={clipboard:!1,rollback:!1},i.augment(u,{_initEditor:function(){var t=this.get("rollback"),e=this.get("clipboard");t&&this.set("rollback",i.clone(o)),e&&this.set("clipboard",i.clone(s))},_changeData:function(t,e){this._clearInner(),this._initData(),this.source(t,e),this.render(!1)},_updateRollback:function(){var t=this.get("rollback");if(i.isObject(t)){var e=t.current,n=t.cache,r=t.max,a=n.length,o=this.save().source;n.splice(0,e,o),a>r&&n.splice(r,a-r+1),t.current=0}},copy:function(){var t,e,n,r=this,o=r.getAllActived(),s=r.get("clipboard"),u={};s.nodes=[],s.edges=[],i.each(o,function(c){t=i.mix(!0,{},c.get("model"),{id:a.guid()}),u[c.get("model").id]=t.id,r.isNode(c)?(t.x+=10,t.y-=10,s.nodes.push(t)):(e=c.get("model").target,n=c.get("model").source,e=r.find(e),n=r.find(n),o.indexOf(e)!==-1&&o.indexOf(n)!==-1&&(t.controlPoints&&i.each(t.controlPoints,function(e,n){t.controlPoints[n]={x:e.x+=10,y:e.y-=10}}),t.target=u[t.target],t.source=u[t.source],s.edges.push(t)))}),this.refresh()},paste:function(){var t=this,e=t.get("clipboard"),n=t.addNodes(e.nodes);n=n.concat(t.addEdges(e.edges)),t.clearAllActived(),i.each(n,function(e){t.setActivedItem(e)}),e.nodes=[],e.edges=[],t._updateRollback(),this.refresh()},del:function(){var t=this,e=t.getAllActived();i.each(e,function(e){t._remove(e)}),this._updateRollback(),this.refresh()},updo:function(){var t=this.get("rollback");if(i.isObject(t)){var e=t.cache,n=t.current,r=n+1,a=e[r];0!==e.length&&a&&(a=i.clone(a),this._changeData(a.nodes,a.edges),t.current=r,this.refresh())}},redo:function(){var t=this.get("rollback");if(i.isObject(t)){var e=t.cache,n=t.current,r=n-1,a=e[r];0!==e.length&&a&&(a=i.clone(a),this._changeData(a.nodes,a.edges),t.current=r,this.refresh())}},beginAdd:function(t,e){this.changeMode("add"),this.set("addingType",t),this.set("addingModel",e)},endAdd:function(t){this.changeMode("edit"),this.set("addingType",""),this.set("addingModel",null),t&&this.fire("afteradd",{item:t})}}),t.exports=u},function(t,e,n){"use strict";var i=n(3),r=n(147);r.Mode={"default":["dragNode","dragEdge","dragBlank","clickBlankClearActive","resizeEdge","clickActive","resizeNode","wheelZoom"],edit:["dragNode","dragEdge","clickBlankClearActive","resizeEdge","clickActive","multiSelect","resizeNode","shortcut","wheelZoom"],complicated:["dragCanvas","wheelZoom","dragHideEdges","wheelZoomHideEdges"],drag:["shortcut","dragCanvas","wheelZoom"],add:["clickAddNode","dragAddEdge"]},i.registMode(r),t.exports=r},function(t,e,n){"use strict";var i=n(1),r=n(145),a=n(9),o=function s(t){s.superclass.constructor.call(this,t)};o.ATTRS={defaultNodeShape:"rect"},i.extend(o,a),i.mixin(o,[r]),i.augment(o,{_readSource:function(t){this.source(t.nodes,t.edges)},_saveSource:function(){function t(t,e){i.each(t.get("children"),function(t){var n=t.get("id"),i=s[n];e.push(i.get("model"))})}var e=this,n=[],r=[],a=e.get("nodeGroup"),o=e.get("edgeGroup"),s=e.get("itemCache");return t(a,n),t(o,r),i.clone({nodes:n,edges:r})},render:function(t){o.superclass.render.call(this),t!==!1&&this._updateRollback()},add:function(t,e){var n,i=this;return"node"===t?n=i.addNodes([e]):"edge"===t&&(n=i.addEdges([e])),n[0]}}),t.exports=o},function(t,e,n){"use strict";var i=n(1),r=n(18),a=n(23),o=n(149),s=n(7),u=n(9),c=a.Util,h=u.Util,l=function f(t){f.superclass.constructor.call(this,t)};l.ATTRS={layoutFn:r.CompactBoxTree,layoutCfg:{direction:"LR",getHGap:function(){return 40},getVGap:function(){return 10}},layout:null,grid:null,data:null,dataMap:null,showButton:!0,defaultNodeShape:"tree-node",animate:!0},i.extend(l,u),i.augment(l,{_readSource:function(t){this.source(t)},_saveSource:function(){var t=this.get("data"),e=o.clone(t,{parent:!0});return e},_createMap:function(t){var e={};return t.root=!0,t.id||(t.id=h.guid()),e[t.id]=t,e.root=t,o.traverseTree(t,function(t,n){t.id||(t.id=h.guid()),t.parent=n,e[t.id]=t}),e},_setWidthHeight:function(){var t,e,n=this.get("itemCache"),r=this.get("nodes"),a=this.get("dataMap");i.each(r,function(i){t=i.id,e=n[t].getBBox(),a[t].width=e.width,a[t].height=e.height})},source:function(t){var e,n,i=this.get("layout");this.set("dataMap",this._createMap(t)),i.root=t,e=i.getNodes(),n=i.getEdges(),this.set("data",t),this.set("nodes",e),this.set("edges",n)},reRender:function(){var t=this.get("data");this.clearAllActived(),this.refresh(!1),this._clearInner(),this._initData(),this.source(t),this._addItems(),this.draw()},enterAnimate:function(t,e,n){var i,r=h.getBBox(t,t),a=r.centerX,s=r.centerY,u=t.get("shapeCfg"),l=u.origin;i="node"===t.get("type")?o.getButtonPoint(l,e,a,s):o.getButtonPoint(n[l.target].model,e,a,s),c.scaleIn(t,i.x,i.y,a,s)},leaveAnimate:function(t,e,n){var i,r=h.getBBox(t,t),a=r.centerX,s=r.centerY,u=t.get("shapeCfg"),l=u.origin;i="node"===t.get("type")?o.getButtonPoint(l,n,a,s):o.getButtonPoint(e[l.target].model,n,a,s),c.scaleOut(t,i.x,i.y)},render:function(){var t=this.get("data"),e=this.get("dataMap"),n=[];i.each(e,function(t,e){t.isCollapsed&&(n.push(e),t.isCollapsed=!1)}),this.source(t),this._addItems(),this._setWidthHeight(),this._clearInner(),this._initData(),i.each(n,function(t){e[t].isCollapsed=!0}),this.source(t),l.superclass.render.call(this)},beforeNodeDraw:function(t){var e=this,n=t.getShapeCfg(),i=e.get("layout");n.direction=i.options.direction,t.addChild=function(n){return e.add(t.get("id"),n)}},afterNodeDraw:function(t){var e,n,i=this.get("showButton"),r=t.get("group"),a=t.getShapeCfg(),u=t.getKeyShape(),c=t.get("shapeObj"),l=a.origin,f=u.getBBox(),d=l.inAnchor,g=l.outAnchor;if(c.getAnchorPoints=function(){return d?[d,g]:"center"},e=t.getAnchorPoints(),!l.root&&e){switch(n=h.getpointInRectQuadrant(f,e[1])){case 0:a.buttonX=e[1].x,a.buttonY=e[1].y-s.treeButtonRadius;break;case 1:a.buttonX=e[1].x+s.treeButtonRadius,a.buttonY=e[1].y;break;case 2:a.buttonX=e[1].x,a.buttonY=e[1].y+s.treeButtonRadius;break;case 3:a.buttonX=e[1].x-s.treeButtonRadius,a.buttonY=e[1].y;break;default:a.buttonX=e[1].x,a.buttonY=e[1].y}if(l.isCollapsed?a.buttonType="plus":a.buttonType="minus",!i)return r.set("buttonX",(f.minX+f.maxX)/2),void r.set("buttonY",(f.minY+f.maxY)/2);l.children&&0!==l.children.length&&o.drawButton(a,r),r.set("buttonX",a.buttonX),r.set("buttonY",a.buttonY)}},add:function(t,e){var n=this.get("dataMap"),r=n[t],a=this.addNodes([e])[0],o=a.getBBox(),s=e.id;return s||(s=i.guid(),e.id=s),e.width=o.width,e.height=o.height,l.superclass._remove.call(this,a),i.isArray(r.children)?r.children.push(e):r.children=[e],this.reRender(),this.find(s)},remove:function(t){var e,n,r=this.get("dataMap");return i.isString(t)&&(t=r[t]),n=t.parent,e=n.children,n.children=i.filter(e,function(e){return t!==e}),this.reRender(),this},update:function(t,e){if(t=l.superclass._update.call(this,t,e),"node"===t.get("type")){var n=t.getBBox(),i=t.get("model");i.width=n.width,i.height=n.height}return this.reRender(),t}}),t.exports=l},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(1),a=n(9),o=n(7),s=a.Util,u={traverseTree:function(t,e){var n=t.children;r.each(n,function(n){e(n,t),n.children&&u.traverseTree(n,e)})},getButtonPoint:function(t,e,n,i){for(var r,a=t.parent;t&&a&&!e[a.id];)a=a.parent;return a?(r=e[a.id].origin,s.apply({x:r.get("buttonX"),y:r.get("buttonY")},r)):{x:n,y:i}},clone:function(t,e){var n;if(r.isArray(t)){n=[];for(var a=0,o=t.length;a<o;a++)"object"===i(t[a])&&null!==t[a]?n[a]=u.clone(t[a],e):n[a]=t[a]}else{n={};for(var s in t)e[s]||("object"===i(t[s])&&null!==t[s]?n[s]=u.clone(t[s],e):n[s]=t[s])}return n},drawButton:function(t,e){"plus"===t.buttonType?u.drawspreadoutButton(t.buttonX,t.buttonY,o.treeButtonRadius,o.treeButtonPadding,e):u.drawcollapseButton(t.buttonX,t.buttonY,o.treeButtonRadius,o.treeButtonPadding,e)},drawspreadoutButton:function(t,e,n,i,a){var s=n-i,u=a.addShape("path",{attrs:r.mix({},{path:[["M",0,0-n],["a",n,n,0,1,1,0,2*n],["a",n,n,0,1,1,0,-2*n],["z"],["M",0-s,0],["L",0+s,0],["M",0,0-s],["L",0,0+s]]},o.treeButtonStyle),clickActive:!1,"class":"spreadoutButton"});return u.translate(t,e),u},drawcollapseButton:function(t,e,n,i,a){var s=n-i,u=a.addShape("path",{attrs:r.mix({},{path:[["M",0,0-n],["a",n,n,0,1,1,0,2*n],["a",n,n,0,1,1,0,-2*n],["z"],["M",0-s,0],["L",0+s,0]]},o.treeButtonStyle),clickActive:!1,"class":"collapseButton"});return u.translate(t,e),u}};t.exports=u},function(t,e,n){"use strict";var i=n(30);setTimeout(function(){if(i.tracking){var t=new i;t.log({g6:!0,version:"0.1.0",page_type:"page"})}},2e3)},function(t,e,n){function i(t){return n(r(t))}function r(t){return a[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var a={"./buttonPointer":63,"./buttonPointer.js":63,"./clickActive":64,"./clickActive.js":64,"./clickAddNode":65,"./clickAddNode.js":65,"./clickBlankClearActive":66,"./clickBlankClearActive.js":66,"./collapse":67,"./collapse.js":67,"./dragAddEdge":68,"./dragAddEdge.js":68,"./dragBlank":69,"./dragBlank.js":69,"./dragCanvas":29,"./dragCanvas.js":29,"./dragEdge":70,"./dragEdge.js":70,"./dragHideEdges":71,"./dragHideEdges.js":71,"./dragNode":72,"./dragNode.js":72,"./multiSelect":73,"./multiSelect.js":73,"./resizeEdge":74,"./resizeEdge.js":74,"./resizeNode":75,"./resizeNode.js":75,"./shortcut":76,"./shortcut.js":76,"./spreadout":77,"./spreadout.js":77,"./wheelZoom":78,"./wheelZoom.js":78,"./wheelZoomHideEdges":79,"./wheelZoomHideEdges.js":79};i.keys=function(){return Object.keys(a)},i.resolve=r,t.exports=i,i.id=151}])});