<!DOCTYPE html>
<html lang="en">
  
  <head>
    <meta charset="UTF-8">
    <title>Radial Layout</title>
  </head>
  
  <body>
    <div id="description">click canvas to add data</div>
    <div id="mountNode"></div>
    <script src="../build/g6.js"></script>
    <script src="./assets/d3-4.13.0.min.js"></script>
    <script src="../build/radial.js"></script>
    <script>
      const usingData = {
        nodes: [{
          id: "0",
          label: "0"
        },
        {
          id: "1",
          label: "1"
        },
        {
          id: "2",
          label: "2"
        },
        {
          id: "3",
          label: "3"
        },
        {
          id: "4",
          label: "4"
        },
        {
          id: "5",
          label: "5"
        },
        {
          id: "6",
          label: "6"
        },
        {
          id: "7",
          label: "7"
        },
        {
          id: "8",
          label: "8"
        },
        {
          id: "9",
          label: "9"
        },
        {
          id: "10",
          label: "10"
        },
        {
          id: "11",
          label: "11"
        },
        {
          id: "12",
          label: "12"
        },
        {
          id: "13",
          label: "13"
        },
        {
          id: "14",
          label: "14"
        },
        {
          id: "15",
          label: "15"
        },
        {
          id: "16",
          label: "16"
        },
        {
          id: "17",
          label: "17"
        },
        {
          id: "18",
          label: "18"
        },
        {
          id: "19",
          label: "19"
        },
        {
          id: "20",
          label: "20"
        },
        {
          id: "21",
          label: "21"
        },
        {
          id: "22",
          label: "22"
        },
        {
          id: "23",
          label: "23"
        },
        {
          id: "24",
          label: "24"
        },
        {
          id: "25",
          label: "25"
        },
        {
          id: "26",
          label: "26"
        },
        {
          id: "27",
          label: "27"
        },
        {
          id: "28",
          label: "28"
        },
        {
          id: "29",
          label: "29"
        },
        {
          id: "30",
          label: "30"
        },
        {
          id: "31",
          label: "31"
        },
        {
          id: "32",
          label: "32"
        },
        {
          id: "33",
          label: "33"
        }],
        edges: [{
          source: "0",
          target: "1"
        },
        {
          source: "0",
          target: "2"
        },
        {
          source: "0",
          target: "3"
        },
        {
          source: "0",
          target: "4"
        },
        {
          source: "0",
          target: "5"
        },
        {
          source: "0",
          target: "7"
        },
        {
          source: "0",
          target: "8"
        },
        {
          source: "0",
          target: "9"
        },
        {
          source: "0",
          target: "10"
        },
        {
          source: "0",
          target: "11"
        },
        {
          source: "0",
          target: "13"
        },
        {
          source: "0",
          target: "14"
        },
        {
          source: "0",
          target: "15"
        },
        {
          source: "0",
          target: "16"
        },
        {
          source: "2",
          target: "3"
        },
        {
          source: "4",
          target: "5"
        },
        {
          source: "4",
          target: "6"
        },
        {
          source: "5",
          target: "6"
        },
        {
          source: "7",
          target: "13"
        },
        {
          source: "8",
          target: "14"
        },
        {
          source: "9",
          target: "10"
        },
        {
          source: "10",
          target: "22"
        },
        {
          source: "10",
          target: "14"
        },
        {
          source: "10",
          target: "12"
        },
        {
          source: "10",
          target: "24"
        },
        {
          source: "10",
          target: "21"
        },
        {
          source: "10",
          target: "20"
        },
        {
          source: "11",
          target: "24"
        },
        {
          source: "11",
          target: "22"
        },
        {
          source: "11",
          target: "14"
        },
        {
          source: "12",
          target: "13"
        },
        {
          source: "16",
          target: "17"
        },
        {
          source: "16",
          target: "18"
        },
        {
          source: "16",
          target: "21"
        },
        {
          source: "16",
          target: "22"
        },
        {
          source: "17",
          target: "18"
        },
        {
          source: "17",
          target: "20"
        },
        {
          source: "18",
          target: "19"
        },
        {
          source: "19",
          target: "20"
        },
        {
          source: "19",
          target: "33"
        },
        {
          source: "19",
          target: "22"
        },
        {
          source: "19",
          target: "23"
        },
        {
          source: "20",
          target: "21"
        },
        {
          source: "21",
          target: "22"
        },
        {
          source: "22",
          target: "24"
        },
        {
          source: "22",
          target: "25"
        },
        {
          source: "22",
          target: "26"
        },
        {
          source: "22",
          target: "23"
        },
        {
          source: "22",
          target: "28"
        },
        {
          source: "22",
          target: "30"
        },
        {
          source: "22",
          target: "31"
        },
        {
          source: "22",
          target: "32"
        },
        {
          source: "22",
          target: "33"
        },
        {
          source: "23",
          target: "28"
        },
        {
          source: "23",
          target: "27"
        },
        {
          source: "23",
          target: "29"
        },
        {
          source: "23",
          target: "30"
        },
        {
          source: "23",
          target: "31"
        },
        {
          source: "23",
          target: "33"
        },
        {
          source: "32",
          target: "33"
        }]
      };

      focusNode = usingData.nodes[0];
      focusNode.style = {
        fill: '#0a0'
      }

      const graph = new G6.Graph({
        container: 'mountNode',
        width: 1000,
        height: 600,
        animate: true,
        layout: {
          type: 'radial',
          center: [500, 300],
          maxIteration: 1000,
          focusNode,
          unitRadius: 100,
          linkDistance: 5,
          preventOverlap: true,
          nodeSize: 30,
          sortBy: 'data'
        },
        modes: {
          default: [ 'drag-node' ]
        },
        defaultNode: {
          size: [20, 20],
          color: 'steelblue',
          style: {
            lineWidth: 2,
            fill: '#fff'
          }
        },
        defaultEdge: {
          size: 1,
          color: '#e2e2e2',
          style: {
            endArrow: {
              path: 'M 4,0 L -4,-4 L -4,4 Z',
              d: 4
            }
          }
        },
        nodeStateStyle: {
          selected: {
            fill: 'steelblue'
          }
        }
      });
      graph.data(usingData);
      graph.render();
      graph.on('canvas:click', e => {
        const newData = {
          nodes: [
            {
              id: 'new-node-0',
              x: 457,
              y: 209
            }, {
              id: 'new-node-1',
              x: 457,
              y: 209
            }, {
              id: 'new-node-2',
              x: 457,
              y: 209
            }, {
              id: 'new-node-3',
              x: 457,
              y: 209
            },
          ],
          edges: [
            {
              source: 'new-node-0',
              target: '0'
            }, 
            {
              source: '1',
              target: 'new-node-1'
            }, 
            {
              source: '29',
              target: 'new-node-2'
            }, 
            {
              source: '11',
              target: 'new-node-2'
            }, 
            {
              source: '10',
              target: 'new-node-3'
            }
          ]
        }
        const allNodes = usingData.nodes.concat(newData.nodes);
        const allEdges = usingData.edges.concat(newData.edges);
        console.log(allNodes[1])
        graph.changeData({ nodes: allNodes, edges: allEdges });
      });
    </script>
  </body>
</html>